/*! For license information please see 1586.4b07b660.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["1586"],{"../node_modules/react-easy-crop/react-easy-crop.css?49e3":function(){},"../node_modules/normalize-wheel/index.js":function(e,t,r){e.exports=r("../node_modules/normalize-wheel/src/normalizeWheel.js")},"../node_modules/normalize-wheel/src/ExecutionEnvironment.js":function(e){"use strict";var t=!!("undefined"!=typeof window&&window.document&&window.document.createElement),r={canUseDOM:t,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=r},"../node_modules/normalize-wheel/src/UserAgent_DEPRECATED.js":function(e){var t,r,o,i,n,a,s,l,c,h,d,u,p,f,g,m=!1;function w(){if(!m){m=!0;var e=navigator.userAgent,w=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),v=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(u=/\b(iPhone|iP[ao]d)/.exec(e),p=/\b(iP[ao]d)/.exec(e),h=/Android/i.exec(e),f=/FBAN\/\w+;/i.exec(e),g=/Mobile/i.exec(e),d=!!/Win64/.exec(e),w){(t=w[1]?parseFloat(w[1]):w[5]?parseFloat(w[5]):NaN)&&document&&document.documentMode&&(t=document.documentMode);var b=/(?:Trident\/(\d+.\d+))/.exec(e);a=b?parseFloat(b[1])+4:t,r=w[2]?parseFloat(w[2]):NaN,o=w[3]?parseFloat(w[3]):NaN,n=(i=w[4]?parseFloat(w[4]):NaN)?(w=/(?:Chrome\/(\d+\.\d+))/.exec(e))&&w[1]?parseFloat(w[1]):NaN:NaN}else t=r=o=n=i=NaN;if(v){if(v[1]){var y=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);s=!y||parseFloat(y[1].replace("_","."))}else s=!1;l=!!v[2],c=!!v[3]}else s=l=c=!1}}var v={ie:function(){return w()||t},ieCompatibilityMode:function(){return w()||a>t},ie64:function(){return v.ie()&&d},firefox:function(){return w()||r},opera:function(){return w()||o},webkit:function(){return w()||i},safari:function(){return v.webkit()},chrome:function(){return w()||n},windows:function(){return w()||l},osx:function(){return w()||s},linux:function(){return w()||c},iphone:function(){return w()||u},mobile:function(){return w()||u||p||h||g},nativeApp:function(){return w()||f},android:function(){return w()||h},ipad:function(){return w()||p}};e.exports=v},"../node_modules/normalize-wheel/src/isEventSupported.js":function(e,t,r){"use strict";var o,i=r("../node_modules/normalize-wheel/src/ExecutionEnvironment.js");i.canUseDOM&&(o=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));e.exports=function(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,n=r in document;if(!n){var a=document.createElement("div");a.setAttribute(r,"return;"),n="function"==typeof a[r]}return!n&&o&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}},"../node_modules/normalize-wheel/src/normalizeWheel.js":function(e,t,r){"use strict";var o=r("../node_modules/normalize-wheel/src/UserAgent_DEPRECATED.js"),i=r("../node_modules/normalize-wheel/src/isEventSupported.js");function n(e){var t=0,r=0,o=0,i=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),o=10*t,i=10*r,"deltaY"in e&&(i=e.deltaY),"deltaX"in e&&(o=e.deltaX),(o||i)&&e.deltaMode&&(1==e.deltaMode?(o*=40,i*=40):(o*=800,i*=800)),o&&!t&&(t=o<1?-1:1),i&&!r&&(r=i<1?-1:1),{spinX:t,spinY:r,pixelX:o,pixelY:i}}n.getEventType=function(){return o.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},e.exports=n},"../node_modules/react-easy-crop/index.module.js":function(e,t,r){"use strict";r.d(t,{ZP:function(){return w}});var o=r("../node_modules/tslib/tslib.es6.mjs"),i=r("../node_modules/react/index.js"),n=r("../node_modules/normalize-wheel/index.js"),a=r.n(n);function s(e,t,r,o,i){void 0===i&&(i=0);var n=f(t.width,t.height,i),a=n.width,s=n.height;return{x:l(e.x,a,r.width,o),y:l(e.y,s,r.height,o)}}function l(e,t,r,o){var i=t*o/2-r/2;return g(e,-i,i)}function c(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function h(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function d(e,t){return Math.min(e,Math.max(0,t))}function u(e,t){return t}function p(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function f(e,t,r){var o=r*Math.PI/180;return{width:Math.abs(Math.cos(o)*e)+Math.abs(Math.sin(o)*t),height:Math.abs(Math.sin(o)*e)+Math.abs(Math.cos(o)*t)}}function g(e,t,r){return Math.min(Math.max(e,t),r)}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter(function(e){return"string"==typeof e&&!!(e.length>0)||!1}).join(" ").trim()}var w=function(e){function t(){var r=null!==e&&e.apply(this,arguments)||this;return r.imageRef=i.createRef(),r.videoRef=i.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc="undefined"!=typeof document?document:null,r.currentWindow="undefined"!=typeof window?window:null,r.resizeObserver=null,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(void 0!==window.ResizeObserver&&!!r.containerRef){var e=!0;r.resizeObserver=new window.ResizeObserver(function(t){if(e){e=!1;return}r.computeSizes()}),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(e){return e.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturemove",r.onGestureMove),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var e=r.computeSizes();e&&(r.emitCropData(),r.setInitialCrop(e)),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(e){if(r.props.initialCroppedAreaPercentages){var t,o,i,n,a,s,l,c,h=(t=r.props.initialCroppedAreaPercentages,o=r.mediaSize,i=r.props.rotation,n=e,a=r.props.minZoom,s=r.props.maxZoom,l=f(o.width,o.height,i),{crop:{x:(c=g(n.width/l.width*(100/t.width),a,s))*l.width/2-n.width/2-l.width*c*(t.x/100),y:c*l.height/2-n.height/2-l.height*c*(t.y/100)},zoom:c}),d=h.crop,u=h.zoom;r.props.onCropChange(d),r.props.onZoomChange&&r.props.onZoomChange(u)}else if(r.props.initialCroppedAreaPixels){var p,m,w,v,b,y,x,_,C,S,R,E,z,A,P=(p=r.props.initialCroppedAreaPixels,m=r.mediaSize,w=r.props.rotation,v=e,b=r.props.minZoom,y=r.props.maxZoom,void 0===w&&(w=0),x=f(m.naturalWidth,m.naturalHeight,w),z=g((_=p,C=m,S=v,E=(R=C).width>R.height?R.width/R.naturalWidth:R.height/R.naturalHeight,S.height>S.width?S.height/(_.height*E):S.width/(_.width*E)),b,y),A=v.height>v.width?v.height/p.height:v.width/p.width,{crop:{x:((x.width-p.width)/2-p.x)*A,y:((x.height-p.height)/2-p.y)*A},zoom:z}),d=P.crop,u=P.zoom;r.props.onCropChange(d),r.props.onZoomChange&&r.props.onZoomChange(u)}},r.computeSizes=function(){var e,t,i,n,a,s,l=r.imageRef.current||r.videoRef.current;if(l&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var c,h,d,u,p,g,m,w,v,b,y,x=r.containerRect.width/r.containerRect.height,_=(null===(e=r.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=r.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,C=(null===(i=r.imageRef.current)||void 0===i?void 0:i.naturalHeight)||(null===(n=r.videoRef.current)||void 0===n?void 0:n.videoHeight)||0,S=l.offsetWidth<_||l.offsetHeight<C,R=_/C,E=void 0;if(S)switch(r.state.mediaObjectFit){default:case"contain":E=x>R?{width:r.containerRect.height*R,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/R};break;case"horizontal-cover":E={width:r.containerRect.width,height:r.containerRect.width/R};break;case"vertical-cover":E={width:r.containerRect.height*R,height:r.containerRect.height}}else E={width:l.offsetWidth,height:l.offsetHeight};r.mediaSize=(0,o.pi)((0,o.pi)({},E),{naturalWidth:_,naturalHeight:C}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var z=r.props.cropSize?r.props.cropSize:(c=r.mediaSize.width,h=r.mediaSize.height,d=r.containerRect.width,u=r.containerRect.height,p=r.props.aspect,void 0===(g=r.props.rotation)&&(g=0),w=(m=f(c,h,g)).width,v=m.height,(b=Math.min(w,d))>(y=Math.min(v,u))*p?{width:y*p,height:y}:{width:b,height:b/p});return((null===(a=r.state.cropSize)||void 0===a?void 0:a.height)!==z.height||(null===(s=r.state.cropSize)||void 0===s?void 0:s.width)!==z.width)&&r.props.onCropSizeChange&&r.props.onCropSizeChange(z),r.setState({cropSize:z},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(z),z}},r.saveContainerPosition=function(){if(r.containerRef){var e=r.containerRef.getBoundingClientRect();r.containerPosition={x:e.left,y:e.top}}},r.onMouseDown=function(e){r.currentDoc&&(e.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(t.getMousePoint(e)))},r.onMouseMove=function(e){return r.onDrag(t.getMousePoint(e))},r.onScroll=function(e){r.currentDoc&&(e.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(e){if(r.currentDoc){if(r.isTouching=!0,!r.props.onTouchRequest||!!r.props.onTouchRequest(e))r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),2===e.touches.length?r.onPinchStart(e):1===e.touches.length&&r.onDragStart(t.getTouchPoint(e.touches[0]))}},r.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?r.onPinchMove(e):1===e.touches.length&&r.onDrag(t.getTouchPoint(e.touches[0]))},r.onGestureStart=function(e){r.currentDoc&&(e.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureMove),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureMove=function(e){if(e.preventDefault(),!r.isTouching){var o=t.getMousePoint(e),i=r.gestureZoomStart-1+e.scale;if(r.setNewZoom(i,o,{shouldUpdatePosition:!0}),r.props.onRotationChange){var n=r.gestureRotationStart+e.rotation;r.props.onRotationChange(n)}}},r.onGestureEnd=function(e){r.cleanEvents()},r.onDragStart=function(e){var t,i,n=e.x,a=e.y;r.dragStartPosition={x:n,y:a},r.dragStartCrop=(0,o.pi)({},r.props.crop),null===(i=(t=r.props).onInteractionStart)||void 0===i||i.call(t)},r.onDrag=function(e){var t=e.x,o=e.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame(function(){if(!!r.state.cropSize){if(void 0!==t&&void 0!==o){var e=t-r.dragStartPosition.x,i=o-r.dragStartPosition.y,n={x:r.dragStartCrop.x+e,y:r.dragStartCrop.y+i},a=r.props.restrictPosition?s(n,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):n;r.props.onCropChange(a)}}}))},r.onDragStopped=function(){var e,t;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),null===(t=(e=r.props).onInteractionEnd)||void 0===t||t.call(e)},r.onWheel=function(e){if(r.currentWindow){if(!r.props.onWheelRequest||!!r.props.onWheelRequest(e)){e.preventDefault();var o=t.getMousePoint(e),i=a()(e).pixelY,n=r.props.zoom-i*r.props.zoomSpeed/200;r.setNewZoom(n,o,{shouldUpdatePosition:!0}),!r.state.hasWheelJustStarted&&r.setState({hasWheelJustStarted:!0},function(){var e,t;return null===(t=(e=r.props).onInteractionStart)||void 0===t?void 0:t.call(e)}),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout(function(){return r.setState({hasWheelJustStarted:!1},function(){var e,t;return null===(t=(e=r.props).onInteractionEnd)||void 0===t?void 0:t.call(e)})},250)}}},r.getPointOnContainer=function(e,t){var o=e.x,i=e.y;if(!r.containerRect)throw Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(o-t.x),y:r.containerRect.height/2-(i-t.y)}},r.getPointOnMedia=function(e){var t=e.x,o=e.y,i=r.props,n=i.crop,a=i.zoom;return{x:(t+n.x)/a,y:(o+n.y)/a}},r.setNewZoom=function(e,t,o){var i=(void 0===o?{}:o).shouldUpdatePosition;if(r.state.cropSize&&r.props.onZoomChange){var n=g(e,r.props.minZoom,r.props.maxZoom);if(void 0===i||i){var a=r.getPointOnContainer(t,r.containerPosition),l=r.getPointOnMedia(a),c={x:l.x*n-a.x,y:l.y*n-a.y},h=r.props.restrictPosition?s(c,r.mediaSize,r.state.cropSize,n,r.props.rotation):c;r.props.onCropChange(h)}r.props.onZoomChange(n)}},r.getCropData=function(){var e,t,i,n,a,l,c,h,p,g,m,w,v,b,y;if(!r.state.cropSize)return null;return e=r.props.restrictPosition?s(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop,t=r.mediaSize,i=r.state.cropSize,n=r.getAspect(),a=r.props.zoom,l=r.props.rotation,c=r.props.restrictPosition,void 0===l&&(l=0),void 0===c&&(c=!0),h=c?d:u,p=f(t.width,t.height,l),g=f(t.naturalWidth,t.naturalHeight,l),m={x:h(100,((p.width-i.width/a)/2-e.x/a)/p.width*100),y:h(100,((p.height-i.height/a)/2-e.y/a)/p.height*100),width:h(100,i.width/p.width*100/a),height:h(100,i.height/p.height*100/a)},w=Math.round(h(g.width,m.width*g.width/100)),v=Math.round(h(g.height,m.height*g.height/100)),b=g.width>=g.height*n?{width:Math.round(v*n),height:v}:{width:w,height:Math.round(w/n)},y=(0,o.pi)((0,o.pi)({},b),{x:Math.round(h(g.width-b.width,m.x*g.width/100)),y:Math.round(h(g.height-b.height,m.y*g.height/100))}),{croppedAreaPercentages:m,croppedAreaPixels:y}},r.emitCropData=function(){var e=r.getCropData();if(e){var t=e.croppedAreaPercentages,o=e.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(t,o),r.props.onCropAreaChange&&r.props.onCropAreaChange(t,o)}},r.emitCropAreaChange=function(){var e=r.getCropData();if(e){var t=e.croppedAreaPercentages,o=e.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(t,o)}},r.recomputeCropPosition=function(){if(r.state.cropSize){var e=r.props.restrictPosition?s(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;r.props.onCropChange(e),r.emitCropData()}},r}return(0,o.ZT)(t,e),t.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),void 0===window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),!this.props.disableAutomaticStylesInjection&&(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},t.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&(void 0===window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null===(t=this.styleRef.parentNode)||void 0===t||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},t.prototype.componentDidUpdate=function(e){e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(r=this.props.cropSize)||void 0===r?void 0:r.height)||(null===(o=e.cropSize)||void 0===o?void 0:o.width)!==(null===(i=this.props.cropSize)||void 0===i?void 0:i.width)?this.computeSizes():((null===(n=e.crop)||void 0===n?void 0:n.x)!==(null===(a=this.props.crop)||void 0===a?void 0:a.x)||(null===(s=e.crop)||void 0===s?void 0:s.y)!==(null===(l=this.props.crop)||void 0===l?void 0:l.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(c=this.videoRef.current)||void 0===c||c.load());var t,r,o,i,n,a,s,l,c,h=this.getObjectFit();h!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:h},this.computeSizes)},t.prototype.getAspect=function(){var e=this.props,t=e.cropSize,r=e.aspect;return t?t.width/t.height:r},t.prototype.getObjectFit=function(){var e,t,r,o;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var i=this.containerRect.width/this.containerRect.height,n=(null===(e=this.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=this.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,a=(null===(r=this.imageRef.current)||void 0===r?void 0:r.naturalHeight)||(null===(o=this.videoRef.current)||void 0===o?void 0:o.videoHeight)||0;return n/a<i?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},t.prototype.onPinchStart=function(e){var r=t.getTouchPoint(e.touches[0]),o=t.getTouchPoint(e.touches[1]);this.lastPinchDistance=c(r,o),this.lastPinchRotation=h(r,o),this.onDragStart(p(r,o))},t.prototype.onPinchMove=function(e){var r=this;if(this.currentDoc&&this.currentWindow){var o=t.getTouchPoint(e.touches[0]),i=t.getTouchPoint(e.touches[1]),n=p(o,i);this.onDrag(n),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var e=c(o,i),t=r.props.zoom*(e/r.lastPinchDistance);r.setNewZoom(t,n,{shouldUpdatePosition:!1}),r.lastPinchDistance=e;var a=h(o,i),s=r.props.rotation+(a-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(s),r.lastPinchRotation=a})}},t.prototype.render=function(){var e,t=this,r=this.props,n=r.image,a=r.video,s=r.mediaProps,l=r.transform,c=r.crop,h=c.x,d=c.y,u=r.rotation,p=r.zoom,f=r.cropShape,g=r.showGrid,w=r.style,v=w.containerStyle,b=w.cropAreaStyle,y=w.mediaStyle,x=r.classes,_=x.containerClassName,C=x.cropAreaClassName,S=x.mediaClassName,R=null!==(e=this.state.mediaObjectFit)&&void 0!==e?e:this.getObjectFit();return i.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return t.containerRef=e},"data-testid":"container",style:v,className:m("reactEasyCrop_Container",_)},n?i.createElement("img",(0,o.pi)({alt:"",className:m("reactEasyCrop_Image","contain"===R&&"reactEasyCrop_Contain","horizontal-cover"===R&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===R&&"reactEasyCrop_Cover_Vertical",S)},s,{src:n,ref:this.imageRef,style:(0,o.pi)((0,o.pi)({},y),{transform:l||"translate(".concat(h,"px, ").concat(d,"px) rotate(").concat(u,"deg) scale(").concat(p,")")}),onLoad:this.onMediaLoad})):a&&i.createElement("video",(0,o.pi)({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:m("reactEasyCrop_Video","contain"===R&&"reactEasyCrop_Contain","horizontal-cover"===R&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===R&&"reactEasyCrop_Cover_Vertical",S)},s,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:(0,o.pi)((0,o.pi)({},y),{transform:l||"translate(".concat(h,"px, ").concat(d,"px) rotate(").concat(u,"deg) scale(").concat(p,")")}),controls:!1}),(Array.isArray(a)?a:[{src:a}]).map(function(e){return i.createElement("source",(0,o.pi)({key:e.src},e))})),this.state.cropSize&&i.createElement("div",{style:(0,o.pi)((0,o.pi)({},b),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:m("reactEasyCrop_CropArea","round"===f&&"reactEasyCrop_CropAreaRound",g&&"reactEasyCrop_CropAreaGrid",C)}))},t.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},t.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},t}(i.Component)},"../node_modules/@heroicons/react/20/solid/esm/ArrowPathRoundedSquareIcon.js":function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var o=r("../node_modules/react/index.js");let i=o.forwardRef(function({title:e,titleId:t,...r},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{fillRule:"evenodd",d:"M10 4.5c1.215 0 2.417.055 3.604.162a.68.68 0 0 1 .615.597c.124 1.038.208 2.088.25 3.15l-1.689-1.69a.75.75 0 0 0-1.06 1.061l2.999 3a.75.75 0 0 0 1.06 0l3.001-3a.75.75 0 1 0-1.06-1.06l-1.748 1.747a41.31 41.31 0 0 0-.264-3.386 2.18 2.18 0 0 0-1.97-1.913 41.512 41.512 0 0 0-7.477 0 2.18 2.18 0 0 0-1.969 1.913 41.16 41.16 0 0 0-.16 1.61.75.75 0 1 0 1.495.12c.041-.52.093-1.038.154-1.552a.68.68 0 0 1 .615-.597A40.012 40.012 0 0 1 10 4.5ZM5.281 9.22a.75.75 0 0 0-1.06 0l-3.001 3a.75.75 0 1 0 1.06 1.06l1.748-1.747c.042 1.141.13 2.27.264 3.386a2.18 2.18 0 0 0 1.97 1.913 41.533 41.533 0 0 0 7.477 0 2.18 2.18 0 0 0 1.969-1.913c.064-.534.117-1.071.16-1.61a.75.75 0 1 0-1.495-.12c-.041.52-.093 1.037-.154 1.552a.68.68 0 0 1-.615.597 40.013 40.013 0 0 1-7.208 0 .68.68 0 0 1-.615-.597 39.785 39.785 0 0 1-.25-3.15l1.689 1.69a.75.75 0 0 0 1.06-1.061l-2.999-3Z",clipRule:"evenodd"}))})},"../node_modules/@heroicons/react/20/solid/esm/ArrowsRightLeftIcon.js":function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var o=r("../node_modules/react/index.js");let i=o.forwardRef(function({title:e,titleId:t,...r},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{fillRule:"evenodd",d:"M13.2 2.24a.75.75 0 0 0 .04 1.06l2.1 1.95H6.75a.75.75 0 0 0 0 1.5h8.59l-2.1 1.95a.75.75 0 1 0 1.02 1.1l3.5-3.25a.75.75 0 0 0 0-1.1l-3.5-3.25a.75.75 0 0 0-1.06.04Zm-6.4 8a.75.75 0 0 0-1.06-.04l-3.5 3.25a.75.75 0 0 0 0 1.1l3.5 3.25a.75.75 0 1 0 1.02-1.1l-2.1-1.95h8.59a.75.75 0 0 0 0-1.5H4.66l2.1-1.95a.75.75 0 0 0 .04-1.06Z",clipRule:"evenodd"}))})},"../node_modules/@heroicons/react/20/solid/esm/ArrowsUpDownIcon.js":function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var o=r("../node_modules/react/index.js");let i=o.forwardRef(function({title:e,titleId:t,...r},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{fillRule:"evenodd",d:"M2.24 6.8a.75.75 0 0 0 1.06-.04l1.95-2.1v8.59a.75.75 0 0 0 1.5 0V4.66l1.95 2.1a.75.75 0 1 0 1.1-1.02l-3.25-3.5a.75.75 0 0 0-1.1 0L2.2 5.74a.75.75 0 0 0 .04 1.06Zm8 6.4a.75.75 0 0 0-.04 1.06l3.25 3.5a.75.75 0 0 0 1.1 0l3.25-3.5a.75.75 0 1 0-1.1-1.02l-1.95 2.1V6.75a.75.75 0 0 0-1.5 0v8.59l-1.95-2.1a.75.75 0 0 0-1.06-.04Z",clipRule:"evenodd"}))})},"../node_modules/modern-gif/dist/index.mjs":function(e,t,r){"use strict";r.d(t,{Yk:function(){return b},cv:function(){return F}});var o=Object.defineProperty,i=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,c=Math.pow,h=(e,t,r)=>t in e?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&h(e,r,t[r]);if(a)for(var r of a(t))l.call(t,r)&&h(e,r,t[r]);return e},u=(e,t)=>i(e,n(t)),p=(e,t,r)=>new Promise((o,i)=>{var n=e=>{try{s(r.next(e))}catch(e){i(e)}},a=e=>{try{s(r.throw(e))}catch(e){i(e)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,a);s((r=r.apply(e,t)).next())});let f=["87a","89a"];function g(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.byteLength,0));return e.reduce((e,r)=>(t.set(r,e),e+r.byteLength),0),t}function m(e,t,r){let o;if(ArrayBuffer.isView(e))o=e.buffer;else if(e instanceof ArrayBuffer)o=e;else{let t=document.createElement("canvas"),{width:i,height:n}=r||{},a=t.getContext("2d");if(!a)throw Error("Failed to create canvas context2d");t.width=null!=i?i:"number"==typeof e.width?e.width:e.width.baseVal.value,t.height=null!=n?n:"number"==typeof e.height?e.height:e.height.baseVal.value,a.drawImage(e,0,0,t.width,t.height),o=a.getImageData(0,0,t.width,t.height).data.buffer}switch(t){case"uint8Array":return new Uint8Array(o);case"uint8ClampedArray":return new Uint8ClampedArray(o);case"dataView":return new DataView(o);default:throw Error("Unsupported output format")}}class w{constructor(e){this.offset=0,this._view=m(e,"dataView")}readByte(){return this._view.getUint8(this.offset++)}readBytes(e){return Array.from({length:e}).map(()=>this.readByte())}readString(e){return String.fromCharCode(...this.readBytes(e))}readUnsigned(){return[this._view.getUint16(this.offset,!0),this.offset+=2][0]}readBits(){return this._view.getUint8(this.offset++).toString(2).padStart(8,"0").split("").map(Number)}readColorTable(e){return Array.from({length:e},()=>Array.from(this.readBytes(3)))}readSubBlock(){let e=[];for(;;){let t=this.readByte();if(0===t&&0!==this._view.getUint8(this.offset))break;e.push(t)}return e}}function v(e){let t,r,o=new Map,{workerUrl:i}=e,{workerNumber:n=1}=e,a=[...Array(i?n:0)].map(()=>{try{let e=new Worker(i);return e.onmessage=s,e}catch(e){return null}}).filter(Boolean);function s(e){var t;let{id:r,data:i}=e.data;null==(t=o.get(r))||t(i),o.delete(r)}n=a.length;let l=(t=0,e=>a[(null!=e?e:t++)%n]);return{call:(r=0,(e,t,i,n)=>new Promise(a=>{let s=l(n);if(!s)return a(void 0);o.set(r,a),s.postMessage({id:r++,type:e,data:t},{transfer:i})}))}}function b(e,t){let r=m(e,"uint8Array");if(null!=t&&t.workerUrl)return v({workerUrl:t.workerUrl}).call("frames:decode",r,[r.buffer]);let{gif:o=function(e){let t={},r=new w(e),o=()=>({index:0,delay:100,disposal:0}),i=r.readString(3),n=r.readString(3);if("GIF"!==i||!f.includes(n))throw Error("This is not a 87a/89a GIF data.");t.version=n,t.width=r.readUnsigned(),t.height=r.readUnsigned();let a=r.readBits();t.globalColorTable=!!a[0],t.colorResoluTion=parseInt(a.slice(1,4).join(""),2)+1,t.colorTableSorted=!!a[4];let s=parseInt(a.slice(5,8).join(""),2);t.colorTableSize=Math.pow(2,s+1),t.backgroundColorIndex=r.readByte(),t.pixelAspectRatio=r.readByte(),t.globalColorTable&&(t.colorTableSize?t.colorTable=r.readColorTable(t.colorTableSize):r.readSubBlock()),t.frames=[];let l=o(),c=[],h=[];for(;;){let e=r.readByte();if(c.push(e),44===e){l.left=r.readUnsigned(),l.top=r.readUnsigned(),l.width=r.readUnsigned(),l.height=r.readUnsigned();let e=r.readBits();l.localColorTable=!!e[0],l.interlaced=!!e[1],l.colorTableSorted=!!e[2],l.reserved=parseInt(e.slice(3,5).join(""),2);let i=parseInt(e.slice(5,8).join(""),2);for(l.colorTableSize=Math.pow(2,i+1),l.localColorTable&&(l.colorTable=r.readColorTable(l.colorTableSize)),l.lzwMinCodeSize=r.readByte(),l.dataPositions=[];;){let e=r.readByte();if(0===e)break;let t=r.offset;l.dataPositions.push([t,e]),r.offset=t+e}t.frames.push(l),(l=o()).index=t.frames.length;continue}if(33===e){let e=r.readByte();if(h.push(e),255===e){if(11!==r.readByte())continue;let e={identifier:r.readString(8),code:r.readString(3),data:[]};"NETSCAPE2.0"==`${e.identifier}${e.code}`&&3===r.readByte()&&(t.looped=!!r.readByte(),t.loopCount=r.readUnsigned()),e.data=r.readSubBlock(),l.application=e;continue}if(254===e){l.comment=r.readSubBlock().map(e=>String.fromCharCode(e)).join("");continue}if(249===e){if(4!==r.readByte())continue;let e=r.readBits(),t={reserved:parseInt(e.slice(0,3).join(""),2),disposal:parseInt(e.slice(3,6).join(""),2),userInput:!!e[6],transparent:!!e[7],delayTime:r.readUnsigned(),transparentIndex:r.readByte()};r.readSubBlock(),l.graphicControl=t,l.disposal=t.disposal,l.delay=10*(t.delayTime||10);continue}if(1===e){if(1!==r.readByte())continue;l.plainText={left:r.readUnsigned(),top:r.readUnsigned(),width:r.readUnsigned(),height:r.readUnsigned(),cellWidth:r.readByte(),cellHeight:r.readByte(),colorIndex:r.readByte(),backgroundColorIndex:r.readByte(),data:r.readSubBlock()};continue}console.warn(`Unknown extension block: 0x${e.toString(16)}`,c.slice(0,c.length-1).map(e=>`0x${e.toString(16)}`),h.slice(0,h.length-1).map(e=>`0x${e.toString(16)}`));continue}if(59===e)break;console.warn(`Unknown block: 0x${e.toString(16)}`,c.slice(0,c.length-1).map(e=>`0x${e.toString(16)}`),h.slice(0,h.length-1).map(e=>`0x${e.toString(16)}`))}return t}(e),range:i}=null!=t?t:{},{width:n,height:a,colorTable:s,frames:l}=o,c=i?l.slice(i[0],i[1]+1):l,h=c.some(e=>3===e.disposal),d=new Uint8ClampedArray(n*a*4),u,p=d.slice();return c.map(e=>{var t;let{left:o,top:i,width:l,height:c,interlaced:f,localColorTable:m,colorTable:w,lzwMinCodeSize:v,dataPositions:b,graphicControl:y,delay:x,disposal:_}=e,C=null==u?void 0:u.disposal,S=i+c,{transparent:R,transparentIndex:E}=null!=y?y:{},z=m?w:s,A=R?E:-1,P=function(e,t,r){let o,i,n,a,s,l,c,h,d,u,p,f,g;let m=Array(r),w=Array(4096),v=Array(4096),b=Array(4097),y=1<<e,x=y+1;for(o=y+2,s=-1,i=(1<<(n=e+1))-1,l=0;l<y;l++)w[l]=0,v[l]=l;for(h=d=u=p=f=g=0,c=0;c<r;){if(0===p){if(d<n){h+=t[g]<<d,d+=8,g++;continue}if(l=h&i,h>>=n,d-=n,l>o||l===x)break;if(l===y){i=(1<<(n=e+1))-1,o=y+2,s=-1;continue}if(-1===s){b[p++]=v[l],s=l,u=l;continue}for(a=l,l===o&&(b[p++]=u,l=s);l>y;)b[p++]=v[l],l=w[l];u=255&v[l],b[p++]=u,o<4096&&(w[o]=s,v[o]=u,!(++o&i)&&o<4096&&(n++,i+=o)),s=a}p--,m[f++]=b[p],c++}for(c=f;c<r;c++)m[c]=0;return m}(v,g(b.map(([e,t])=>r.subarray(e,e+t))),l*c);if(f&&(P=function(e,t){let r=Array(e.length),o=e.length/t,i=[0,4,2,1],n=[8,8,4,2],a=0;for(let s=0;s<4;s++)for(let l=i[s];l<o;l+=n[s])r.splice.apply(r,[l*t,t].concat(e.slice(a*t,(a+1)*t))),a++;return r}(P,l)),3===C)d=p.slice();else if(2===C){let{left:e,top:t,width:r,height:o}=u,i=t+o;for(let o=t;o<i;o++){let t=o*n+e;for(let e=0;e<r;e++){let r=(t+e)*4;d[r]=d[r+1]=d[r+2]=d[r+3]=0}}}for(let e=i;e<S;e++){let r=e*n+o,a=(e-i)*l;for(let e=0;e<l;e++){let o=P[a+e],i=(r+e)*4;if(o!==A){let[e,r,n]=null!=(t=null==z?void 0:z[o])?t:[0,0,0];d[i]=e,d[i+1]=r,d[i+2]=n,d[i+3]=255}else 2===C&&(d[i]=d[i+1]=d[i+2]=d[i+3]=0)}}return h&&1!==_&&3!==_&&(p=d.slice()),u=e,{width:n,height:a,delay:x,data:d.slice()}})}let y="u">typeof window,x=0xfffe0001,_=[0,20,40,60,80,99,119,139,159,179,199,219,241,264,288,313,340,367,396,427,458,491,526,562,599,637,677,718,761,805,851,898,947,997,1048,1101,1156,1212,1270,1330,1391,1453,1517,1583,1651,1720,1790,1863,1937,2013,2090,2170,2250,2333,2418,2504,2592,2681,2773,2866,2961,3058,3157,3258,3360,3464,3570,3678,3788,3900,4014,4129,4247,4366,4488,4611,4736,4864,4993,5124,5257,5392,5530,5669,5810,5953,6099,6246,6395,6547,6700,6856,7014,7174,7335,7500,7666,7834,8004,8177,8352,8528,8708,8889,9072,9258,9445,9635,9828,10022,10219,10417,10619,10822,11028,11235,11446,11658,11873,12090,12309,12530,12754,12980,13209,13440,13673,13909,14146,14387,14629,14874,15122,15371,15623,15878,16135,16394,16656,16920,17187,17456,17727,18001,18277,18556,18837,19121,19407,19696,19987,20281,20577,20876,21177,21481,21787,22096,22407,22721,23038,23357,23678,24002,24329,24658,24990,25325,25662,26001,26344,26688,27036,27386,27739,28094,28452,28813,29176,29542,29911,30282,30656,31033,31412,31794,32179,32567,32957,33350,33745,34143,34544,34948,35355,35764,36176,36591,37008,37429,37852,38278,38706,39138,39572,40009,40449,40891,41337,41785,42236,42690,43147,43606,44069,44534,45002,45473,45947,46423,46903,47385,47871,48359,48850,49344,49841,50341,50844,51349,51858,52369,52884,53401,53921,54445,54971,55500,56032,56567,57105,57646,58190,58737,59287,59840,60396,60955,61517,62082,62650,63221,63795,64372,64952,65535],C=[0,6,13,18,22,25,28,31,34,36,38,40,42,44,46,48,50,51,53,54,56,57,59,60,61,62,64,65,66,67,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,86,87,88,89,90,91,91,92,93,94,95,95,96,97,98,98,99,100,101,101,102,103,103,104,105,106,106,107,108,108,109,110,110,111,111,112,113,113,114,115,115,116,116,117,118,118,119,119,120,121,121,122,122,123,123,124,125,125,126,126,127,127,128,128,129,129,130,130,131,132,132,133,133,134,134,135,135,136,136,137,137,138,138,139,139,140,140,140,141,141,142,142,143,143,144,144,145,145,146,146,147,147,147,148,148,149,149,150,150,151,151,151,152,152,153,153,154,154,154,155,155,156,156,156,157,157,158,158,159,159,159,160,160,161,161,161,162,162,163,163,163,164,164,165,165,165,166,166,166,167,167,168,168,168,169,169,169,170,170,171,171,171,172,172,172,173,173,174,174,174,175,175,175,176,176,176,177,177,177,178,178,179,179,179,180,180,180,181,181,181,182,182,182,183,183,183,184,184,184,185,185,185,186,186,186,187,187,187,188,188,188,189,189,189,190,190,190,191,191,191,192,192,192,193,193,193,193,194,194,194,195,195,195,196,196,196,197,197,197,198,198,198,198,199,199,199,200,200,200,201,201,201,201,202,202,202,203,203,203,204,204,204,204,205,205,205,206,206,206,206,207,207,207,208,208,208,208,209,209,209,210,210,210,210,211,211,211,212,212,212,212,213,213,213,214,214,214,214,215,215,215,215,216,216,216,217,217,217,217,218,218,218,218,219,219,219,220,220,220,220,221,221,221,221,222,222,222,222,223,223,223,224,224,224,224,225,225,225,225,226,226,226,226,227,227,227,227,228,228,228,228,229,229,229,229,230,230,230,230,231,231,231,231,232,232,232,232,233,233,233,233,234,234,234,234,235,235,235,235,236,236,236,236,237,237,237,237,238,238,238,238,239,239,239,239,239,240,240,240,240,241,241,241,241,242,242,242,242,243,243,243,243,243,244,244,244,244,245,245,245,245,246,246,246,246,246,247,247,247,247,248,248,248,248,249,249,249,249,249,250,250,250,250,251,251,251,251,251,252,252,252,252,253,253,253,253,253,254,254,254,254,255,255,255];function S(e){let t;if(e<=0)return 0;if(e>=65535)return 65535;t=e*(e*(e+-144107)/65535+132114)/65535+14379;for(let r=0;r<2;r++){let r=t*t*t,o=e+(2*r+x/2)/x;t=(t*(2*e+(r+x/2)/x)+o/2)/o}return t}function R(e,t){return(e^t)<0?(e-t/2)/t:(e+t/2)/t}function E(e,t,r,o,i=!0,n=[255,255,255]){if(!i){let i=1-(o/=255);e=e*o+i*n[0]&255,t=t*o+i*n[1]&255,r=r*o+i*n[2]&255}return{r:e,g:t,b:r}}function z(e,t,r){return e<<16|t<<8|r}function A(e,t,r){e=_[e],t=_[t];let o=(27015*e+35149*t+3372*(r=_[r])+32767.5)/65535,i=(13887*e+44610*t+7038*r+32767.5)/65535,n=(5787*e+18462*t+41286*r+32767.5)/65535,a=S(o),s=S(i),l=S(n);return{l:R(13792*a+52010*s-267*l,65535),a:R(129628*a-159158*s+29530*l,65535),b:R(1698*a+51299*s-52997*l,65535)}}function P(e){if(e<=0)return 0;if(e>=65535)return 255;{let t=511*e,r=~~(t/65535),o=C[r];return(t%65535*(C[r+1]-o)+32767.5)/65535+o}}class D{constructor(){this.readable=new ReadableStream({start:e=>this._rsControler=e}),this.writable=new WritableStream({write:e=>p(this,null,function*(){var t,r,o,i,n;let a;if("string"==typeof e){;let t=yield(n=e,new Promise(e=>{let t=new Image;t.decoding="sync",t.loading="eager",t.crossOrigin="anonymous",t.onload=()=>e(t),t.onerror=()=>e(t),t.src=n})),r=D.ctx2d,o=r.canvas;r.clearRect(0,0,o.width,o.height),o.width=t.width,o.height=t.height,r.drawImage(t,0,0,o.width,o.height),a=r.getImageData(0,0,o.width,o.height).data}else{if(ArrayBuffer.isView(e))a=new Uint8ClampedArray(e.buffer);else if(e instanceof ArrayBuffer)a=new Uint8ClampedArray(e);else if(Array.isArray(e)){if(Array.isArray(e[0])){let n=[];for(let a=e.length,s=0;s<a;s++)n.push(null!=(t=e[s][0])?t:0,null!=(r=e[s][1])?r:0,null!=(o=e[s][2])?o:0,null!=(i=e[s][3])?i:255);a=new Uint8ClampedArray(n)}else a=new Uint8ClampedArray(e)}else{let t=D.ctx2d,r=t.canvas;t.clearRect(0,0,r.width,r.height),r.width="number"==typeof e.width?e.width:e.width.baseVal.value,r.height="number"==typeof e.height?e.height:e.height.baseVal.value,t.drawImage(e,0,0,r.width,r.height),a=t.getImageData(0,0,r.width,r.height).data}}this._rsControler.enqueue(a)}),close:()=>{this._rsControler.close()}})}static get ctx2d(){if(!this._ctx2d){if(!y)throw Error("Failed to get ImageToPixels.ctx2d, not in browser.");let e=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});if(!e)throw Error("Failed to get ImageToPixels.ctx2d, getContext('2d') return null.");this._ctx2d=e}return this._ctx2d}}class M{constructor(e){this.maxColors=e,this.readable=new ReadableStream({start:e=>this._rsControler=e}),this.writable=new WritableStream({write:e=>{this._rsControler.enqueue(this._boxesToQuantizedColors(this._colorsToBoxes(e)))},close:()=>{this._rsControler.close()}})}static createSorter(e){let t=e[0],r=e[1],o=e[2];return(e,i)=>e.lab[t]-i.lab[t]||e.lab[r]-i.lab[r]||e.lab[o]-i.lab[o]}_colorsToBoxes(e){let t={start:0,end:e.length-1,sorted:null,count:0,score:0,weight:0,sort:"lab",avg:{l:0,a:0,b:0}},r=[t],o=1,i=(e,t,r)=>e>=t?t>=r?"lab":e>=r?"lba":"bla":e>=r?"alb":t>=r?"abl":"bal",n=t=>{let{start:r,end:o}=t;t.count=o-r+1,t.weight=0;let n={l:0,a:0,b:0};for(let i=r;i<=o;i++){let r=e[i];n.l+=r.lab.l*r.count,n.a+=r.lab.a*r.count,n.b+=r.lab.b*r.count,t.weight+=r.count}t.avg.l=n.l/t.weight,t.avg.a=n.a/t.weight,t.avg.b=n.b/t.weight;let a={l:0,a:0,b:0};for(let i=r;i<=o;i++){let r=e[i];a.l+=c(r.lab.l-t.avg.l,2)*r.count,a.a+=c(r.lab.a-t.avg.a,2)*r.count,a.b+=c(r.lab.b-t.avg.b,2)*r.count}t.sort=i(a.l,a.a,a.b),t.score=Math.max(a.l,a.a,a.b)},a=(e,t)=>{let i={start:t+1,end:e.end,sorted:e.sorted,count:0,score:0,weight:0,sort:"lab",avg:{l:0,a:0,b:0}};n(i),e.end-=i.count,n(e),r.push(i),o++},s=()=>{let e=-1,t=-1;if(o===this.maxColors)return -1;for(let i=0;i<o;i++){let o=r[i];o.count>=2&&o.score>t&&(e=i,t=o.score)}return e};for(n(t);t&&t.count>1;){let{start:o,end:i,sort:n,sorted:l}=t;if(n!==l){let r=e.slice(o,i+1).sort(M.createSorter(n));for(let t=r.length,i=0;i<t;i++)e[o+i]=r[i];t.sorted=n}let c=t.weight+1>>1,h=o,d=0;for(;h<i-1&&!((d+=e[h].count)>c);h++);a(t,h);let u=s();t=u>=0?r[u]:null}return r}_boxesToQuantizedColors(e){let t=e.reduce((e,t)=>e+t.weight,0);return e.map(e=>{let{r:r,g:o,b:i}=function(e){let t=e.l+R(25974*e.a,65535)+R(14143*e.b,65535),r=e.l+R(-6918*e.a,65535)+R(-4185*e.b,65535),o=e.l+R(-5864*e.a,65535)+R(-84638*e.b,65535),i=c(t,3)/x,n=c(r,3)/x,a=c(o,3)/x,s=~~P((267169*i+-216771*n+15137*a+32767.5)/65535),l=~~P((-83127*i+171030*n+-22368*a+32767.5)/65535);return{r:s,g:l,b:~~P((-275*i+-46099*n+111909*a+32767.5)/65535)}}(e.avg);return{rgbInt:z(r,o,i),rgb:{r:r,g:o,b:i},hex:`#${r.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}`,lab:e.avg,count:e.weight,percentage:e.weight/t}}).sort((e,t)=>e.rgbInt-t.rgbInt)}}class k{constructor(e,t,r){this.statsMode=e,this.premultipliedAlpha=t,this.tint=r,this._colors=[],this._cache=new Map,this.readable=new ReadableStream({start:e=>this._rsControler=e}),this.writable=new WritableStream({write:e=>{for(let t=e.length,r=0;r<t;r+=4){let t=e[r],o=e[r+1],i=e[r+2],n=e[r+3];if("diff"===this.statsMode&&this._previousPixels&&t===this._previousPixels[r]&&o===this._previousPixels[r+1]&&i===this._previousPixels[r+2]&&n===this._previousPixels[r+3])continue;({r:t,g:o,b:i}=E(t,o,i,n,this.premultipliedAlpha,this.tint));let a=z(t,o,i),s={rgbInt:a,lab:A(t,o,i),count:1},l=a%32768,c=this._cache.get(l);c||this._cache.set(l,c=new Map);let h=c.get(a);if(void 0!==h){this._colors[h].count++;continue}h=this._colors.push(s)-1,c.set(a,h)}"diff"===this.statsMode&&(this._previousPixels=e)},close:()=>{this._rsControler.enqueue(this._colors.slice()),this._rsControler.close(),this._colors.length=0,this._cache.clear(),this._previousPixels=void 0}})}}class T{constructor(e=[],t=!1,r=[255,255,255]){this._premultipliedAlpha=t,this._tint=r,this._cache=new Map,this._colorMap=[],e.length&&this.setup(e)}setup(e){e=e.sort((e,t)=>e.rgbInt-t.rgbInt),this._cache.clear();let t=[],r=new Map;for(let t=-1,o=e.length,i=0;i<o;i++){let{rgbInt:o}=e[i];if(o===t){r.set(i,!0);continue}t=o}(function o(i){let{index:n,longest:a,longestIndex:s}=function(t){let o={min:[65535,65535,65535],max:[-65535,-65535,-65535]},i=[];for(let n=e.length,a=0;a<n;a++){let{lab:n}=e[a];r.has(a)||n.l<t.min[0]||n.a<t.min[1]||n.b<t.min[2]||n.l>t.max[0]||n.a>t.max[1]||n.b>t.max[2]||(n.l<o.min[0]&&(o.min[0]=n.l),n.a<o.min[1]&&(o.min[1]=n.a),n.b<o.min[2]&&(o.min[2]=n.b),n.l>o.max[0]&&(o.max[0]=n.l),n.a>o.max[1]&&(o.max[1]=n.a),n.b>o.max[2]&&(o.max[2]=n.b),i.push({lab:n,index:a}))}let n="l",a=0;if(!i.length)return{index:-1,longest:n,longestIndex:a};let s=o.max[0]-o.min[0],l=o.max[1]-o.min[1],c=o.max[2]-o.min[2];return c>=s&&c>=l&&(n="b",a=2),l>=s&&l>=c&&(n="a",a=1),s>=l&&s>=c&&(n="l",a=0),{index:i.sort((e,t)=>e.lab[n]-t.lab[n])[i.length>>1].index,longest:n,longestIndex:a}}(i);if(n<0)return -1;r.set(n,!0);let{lab:l}=e[n],c={left:0,right:0,longest:a,lab:l,index:n},h=t.push(c)-1,d={max:[...i.max],min:[...i.min]},u={max:[...i.max],min:[...i.min]};d.max[s]=l[a],u.min[s]=Math.min(l[a]+1,65535);let p=o(d),f=-1;return u.min[s]<=u.max[s]&&(f=o(u)),c.left=p,c.right=f,h})({min:[-65535,-65535,-65535],max:[65535,65535,65535]}),this._colorMap=t}_colormapNearestNode(e,t,r){let o,i;let{left:n,right:a,longest:s,lab:l,index:h}=this._colorMap[e],d=Math.min(c(t.l-l.l,2)+c(t.a-l.a,2)+c(t.b-l.b,2),0xfffffffe);if(d<r.dist&&(r.index=h,r.dist=d),-1!==n||-1!==a){let e=t[s]-l[s];e<=0?(o=n,i=a):(o=a,i=n),-1!==o&&this._colormapNearestNode(o,t,r),-1!==i&&c(e,2)<r.dist&&this._colormapNearestNode(i,t,r)}}findNearestIndex(e,t,r,o=255){({r:e,g:t,b:r}=E(e,t,r,o,this._premultipliedAlpha,this._tint));let i=z(e,t,r),n=i%32768,a=this._cache.get(n);a||this._cache.set(n,a=new Map);let s=a.get(i);if(void 0!==s)return s;let l={dist:Number.MAX_SAFE_INTEGER,index:-1};return this._colormapNearestNode(0,A(e,t,r),l),s=l.index,a.set(i,s),s}}class B{constructor(e={}){this.colors=[],this.config=this._resolveOptions(e),this._stream=this._createStream()}_resolveOptions(e){let{maxColors:t=256,statsMode:r="full",algorithm:o="median-cut",premultipliedAlpha:i=!1,tint:n=[255,255,255],samples:a=[]}=e;return{maxColors:t,statsMode:r,algorithm:o,premultipliedAlpha:i,tint:n,samples:a}}_createStream(){let e;this.config.algorithm;e=new M(this.config.maxColors);return new ReadableStream({start:e=>{this._streamControler=e,this.config.samples.forEach(t=>e.enqueue(t))}}).pipeThrough(new D).pipeThrough(new k(this.config.statsMode,this.config.premultipliedAlpha,this.config.tint)).pipeThrough(e)}addSample(e){this._streamControler.enqueue(e)}generate(){return new Promise(e=>{this._streamControler.close(),this._stream.pipeTo(new WritableStream({write:t=>{this.colors=t,this.finder=new T(t,this.config.premultipliedAlpha,this.config.tint),this._stream=this._createStream(),e(t)}}))})}match(e){var t;let r;if("number"==typeof e)r=[e>>24&255,e>>16&255,e>>8&255,255&e];else if("string"==typeof e){let t=e.replace(/^#/,"");r=[`${t[0]}${t[1]}`,`${t[2]}${t[3]}`,`${t[4]}${t[5]}`].map(e=>parseInt(e,16))}else if(Array.isArray(e))r=e;else throw TypeError("Unsupported color format");let o=null==(t=this.finder)?void 0:t.findNearestIndex(r[0],r[1],r[2],r[3]);if(void 0===o||o<0)return;let i=this.colors[o];if(i)return{color:i,index:o}}toColors(){return this.colors.slice()}toHexColors(){return this.colors.map(e=>e.hex)}toRgbColors(){return this.colors.map(e=>e.rgb)}toRgbIntColors(){return this.colors.map(e=>e.rgbInt)}toLabColors(){return this.colors.map(e=>e.lab)}toUint8Array(e=4*this.colors.length){var t,r;let o;let i=new Uint8ClampedArray(e);for(let n=0;n<e;n++){let e=4*n,a=null!=(t=null==(r=this.colors[n])?void 0:r.rgb)?t:o;a&&(i[e]=a.r,i[e+1]=a.g,i[e+2]=a.b,i[e+3]=255,o=a)}return i}clear(){this.colors.length=0,this._stream=this._createStream()}}let I=class{constructor(e=!0){this.isDebug=e}time(e){this.isDebug&&console.time(`${I.prefix} ${e}`)}timeEnd(e){this.isDebug&&console.timeEnd(`${I.prefix} ${e}`)}debug(...e){this.isDebug&&console.debug(I.prefix,...e)}warn(...e){this.isDebug&&console.warn(I.prefix,...e)}};I.prefix="[modern-gif]";class U{constructor(e){this._config=e,this._frames=[],this.readable=new ReadableStream({start:e=>this._rsControler=e}),this.writable=new WritableStream({write:e=>{this._frames.push(e)},close:()=>{let e;let t=this._config.backgroundColorIndex;this._frames.forEach((r,o)=>{var i,n;let{width:a=1,height:s=1,data:l}=r,c=r.transparent||null==(n=null==(i=this._frames[o+1])?void 0:i.transparent)||n,h=0,p=0,f=a-1,g=s-1,m;if(c){for(;p<g;){let e=!0;for(let r=0;r<a;r++)if(l[a*p+r]!==t){e=!1;break}if(!e)break;p++}for(;g>p;){let e=!0;for(let r=0;r<a;r++)if(l[a*g+r]!==t){e=!1;break}if(!e)break;g--}for(;h<f;){let e=!0;for(let r=p;r<g;r++)if(l[a*r+h]!==t){e=!1;break}if(!e)break;h++}for(;f>h;){let e=!0;for(let r=p;r<g;r++)if(l[a*r+f]!==t){e=!1;break}if(!e)break;f--}}else{if(e){for(;p<g;){let t=!0;for(let r=0;r<a;r++){let o=a*p+r;if(l[o]!==e[o]){t=!1;break}}if(!t)break;p++}for(;g>p;){let t=!0;for(let r=0;r<a;r++){let o=a*g+r;if(l[o]!==e[o]){t=!1;break}}if(!t)break;g--}if(p===g)h=f;else{for(;h<f;){let t=!0;for(let r=p;r<=g;r++){let o=r*a+h;if(l[o]!==e[o]){t=!1;break}}if(!t)break;h++}for(;f>h;){let t=!0;for(let r=p;r<=g;r++){let o=r*a+f;if(l[o]!==e[o]){t=!1;break}}if(!t)break;f--}}}m=e,e=l}let w=f+1-h,v=g+1-p,b=new Uint8ClampedArray(w*v);for(let e=0;e<v;e++)for(let r=0;r<w;r++){let o=e*w+r,i=(p+e)*a+(h+r);if(!c&&m&&l[i]===m[i]){b[o]=t;continue}b[o]=l[i]}this._rsControler.enqueue(u(d({},r),{left:h,top:p,width:w,height:v,disposal:c?2:1,data:b,graphicControl:u(d({},r.graphicControl),{transparent:!0,transparentIndex:t})}))}),this._rsControler.close()}})}}class W{constructor(e=4096){this._chunkByteLength=e,this._chunkIndex=0,this._chunkOffset=0,this._chunks=[this._createChunk()]}get cursor(){return[this._chunkIndex,this._chunkOffset]}_createChunk(){return new DataView(new ArrayBuffer(this._chunkByteLength))}writeByte(e,t){t?this._chunks[t[0]].setUint8(t[1],e):(this._chunkOffset>=this._chunkByteLength&&(this._chunks[++this._chunkIndex]=this._createChunk(),this._chunkOffset=0),this._chunks[this._chunkIndex].setUint8(this._chunkOffset++,e))}writeBytes(e){e.forEach(e=>this.writeByte(e))}writeString(e){e.split("").forEach(e=>{this.writeByte(e.charCodeAt(0))})}writeUnsigned(e){this.writeBytes([255&e,e>>8&255])}calculateDistance(e){return this._chunkIndex*this._chunkByteLength+this._chunkOffset-(e[0]*this._chunkByteLength+e[1])}toUint8Array(){this._chunks[this._chunkIndex]=new DataView(this._chunks[this._chunkIndex].buffer.slice(0,this._chunkOffset));let e=new Uint8Array(this._chunks.reduce((e,t)=>e+t.byteLength,0)),t=0;return this._chunks.forEach(r=>{e.set(new Uint8Array(r.buffer),t),t+=r.byteLength}),this._chunks=[this._createChunk()],this._chunkIndex=0,this._chunkOffset=0,e}}class O{constructor(e){this._config=e,this._frames=[],this.readable=new ReadableStream({start:e=>this._rsControler=e}),this.writable=new WritableStream({write:e=>{this._frames.push(e)},close:()=>{let e=this._encodeHeader(),t=g(this._frames),r=new Uint8Array(e.length+t.byteLength+1);r.set(e),r.set(t,e.byteLength),r[r.length-1]=59,this._rsControler.enqueue(r),this._rsControler.close(),this._frames.length=0}})}_encodeHeader(){var e,t,r;let o=d({version:"89a",looped:!0,loopCount:0,pixelAspectRatio:0},this._config);if(o.width<=0||o.width>65535)throw Error("Width invalid.");if(o.height<=0||o.height>65535)throw Error("Height invalid.");let i=0;if(null!=(e=o.colorTable)&&e.length){let e=o.colorTable.length;if(e<2||e>256||e&e-1)throw Error("Invalid color table length, must be power of 2 and 2 .. 256.");for(;e>>=1;)++i;if(e=1<<i,o.colorTableSize=--i,o.backgroundColorIndex>=e)throw Error("Background index out of range.");if(0===o.backgroundColorIndex)throw Error("Background index explicitly passed as 0.")}let n=new W;return n.writeString("GIF"),n.writeString(o.version),n.writeUnsigned(o.width),n.writeUnsigned(o.height),n.writeByte(parseInt(`${o.colorTableSize?1:0}1110${o.colorTableSize.toString(2).padStart(3,"0")}`,2)),n.writeByte(o.backgroundColorIndex),n.writeByte(o.pixelAspectRatio),n.writeBytes(null!=(r=null==(t=o.colorTable)?void 0:t.flat())?r:[]),o.looped&&(n.writeByte(33),n.writeByte(255),n.writeByte(11),n.writeString("NETSCAPE2.0"),n.writeByte(3),n.writeByte(1),n.writeUnsigned(o.loopCount),n.writeByte(0)),n.toUint8Array()}}class j{constructor(e,t){this._config=e,this.readable=new ReadableStream({start:e=>this._rsControler=e}),this.writable=new WritableStream({write:e=>{let t=this._config.backgroundColorIndex,r=e.data,o=!1,i=new Uint8ClampedArray(r.length/4);for(let e=r.length,n=0;n<e;n+=4)0===r[n+3]?(i[n/4]=t,o=!0):i[n/4]=this._finder.findNearestIndex(r[n],r[n+1],r[n+2],r[n+3]);this._rsControler.enqueue(u(d({},e),{data:i,transparent:o}))},close:()=>{this._rsControler.close()}}),this._finder=new T(t,e.premultipliedAlpha,e.tint)}}class L{constructor(e){this._config=e,this.readable=new ReadableStream({start:e=>this._rsControler=e}),this.writable=new WritableStream({write:e=>{var t,r,o;let i=new W,{left:n=0,top:a=0,width:s=0,height:l=0,delay:c=100,colorTable:h}=e,{disposal:d=0}=e,u=null==(t=e.graphicControl)?void 0:t.transparent,p=null!=(o=null==(r=e.graphicControl)?void 0:r.transparentIndex)?o:255;if(n<0||n>65535)throw Error("Left invalid.");if(a<0||a>65535)throw Error("Top invalid.");if(s<=0||s>65535)throw Error("Width invalid.");if(l<=0||l>65535)throw Error("Height invalid.");let f=8,g=h?h.length:0;if(g){if(g<2||g>256||g&g-1)throw Error("Invalid color table length, must be power of 2 and 2 .. 256.");for(;g>>=1;)++f}i.writeByte(33),i.writeByte(249),i.writeByte(4),u?d||(d=2):p=0,i.writeByte(parseInt(`000${Number(7&d).toString(2).padStart(3,"0")}0${u?1:0}`,2)),i.writeUnsigned(c/10),i.writeByte(p),i.writeByte(0),i.writeByte(44),i.writeUnsigned(n),i.writeUnsigned(a),i.writeUnsigned(s),i.writeUnsigned(l),null!=h&&h.length?(i.writeByte(parseInt(`10000${(f-1).toString(2).padStart(3,"0")}`,2)),i.writeBytes(h.flat())):i.writeByte(0),function(e,t,r){r.writeByte(e);let o=r.cursor;r.writeByte(0);let i=1<<e,n=i-1,a=i+1,s=a+1,l=e+1,c=0,h=0;function d(e){for(;c>=e;)r.writeByte(255&h),h>>=8,c-=8,256===r.calculateDistance(o)&&(r.writeByte(255,o),o=r.cursor,r.writeByte(0))}function u(e){h|=e<<c,c+=l,d(8)}let p=t[0]&n,f={},g,m,w;u(i);for(let d=t.length,v=1;v<d;++v)if(void 0===(m=f[g=p<<8|(w=t[v]&n)])){for(h|=p<<c,c+=l;c>=8;)r.writeByte(255&h),h>>=8,c-=8,256===r.calculateDistance(o)&&(r.writeByte(255,o),o=r.cursor,r.writeByte(0));4096===s?(u(i),s=a+1,l=e+1,f={}):(s>=1<<l&&++l,f[g]=s++),p=w}else p=m;u(p),u(a),d(1),1===r.calculateDistance(o)?r.writeByte(0,o):(r.writeByte(r.calculateDistance(o)-1,o),r.writeByte(0))}(f,e.data,i),this._rsControler.enqueue(i.toUint8Array())},close:()=>this._rsControler.close()})}}class N{constructor(e){var t;this._encodingFrames=[],this._encodeUUID=0,this._logger=new I(!!e.debug),this._config=this._resolveOptions(e),this._palette=new B({maxColors:this._config.maxColors,premultipliedAlpha:this._config.premultipliedAlpha,tint:this._config.tint}),this._config.workerUrl?(this._worker=v({workerUrl:this._config.workerUrl}),this._worker.call("encoder:init",e)):null==(t=this._config.frames)||t.forEach(e=>this.encode(e))}_resolveOptions(e){["width","height"].forEach(t=>{void 0!==e[t]&&Math.floor(e[t])!==e[t]&&(console.warn(`${t} cannot be a floating point number`),e[t]=Math.floor(e[t]))});let{colorTableSize:t=256,backgroundColorIndex:r=t-1,maxColors:o=t-1,premultipliedAlpha:i=!1,tint:n=[255,255,255]}=e;return u(d({},e),{colorTableSize:t,backgroundColorIndex:r,maxColors:o,premultipliedAlpha:i,tint:n})}encode(e){return p(this,null,function*(){if(this._worker){let t;return ArrayBuffer.isView(e.data)?t=[e.data.buffer]:e.data instanceof ArrayBuffer&&(t=[e.data]),this._worker.call("encoder:encode",e,t)}let t=this._encodeUUID;this._encodeUUID++;let{width:r=this._config.width,height:o=this._config.height}=e,{data:i}=e;try{var n;this._logger.time(`palette:sample-${t}`),i="string"==typeof i?yield(n=i,new Promise((e,t)=>{let r=function(e){let t=new Image;return t.decoding="sync",t.loading="eager",t.crossOrigin="anonymous",t.src=e,t}(n);r.onload=()=>e(r),r.onerror=t})):i,i=m(i,"uint8ClampedArray",{width:r,height:o}),this._encodingFrames.push(u(d({},e),{width:r,height:o,data:i})),this._palette.addSample(i)}finally{this._logger.timeEnd(`palette:sample-${t}`)}})}flush(e){return p(this,null,function*(){if(this._worker)return this._worker.call("encoder:flush",e);this._logger.time("palette:generate");let t=yield this._palette.generate();this._logger.timeEnd("palette:generate");let r=t.map(e=>[e.rgb.r,e.rgb.g,e.rgb.b]);for(;r.length<this._config.colorTableSize;)r.push([0,0,0]);this._logger.debug("palette:maxColors",this._config.maxColors),this._logger.isDebug&&console.debug(t.map(()=>"%c ").join(""),...t.map(e=>`margin: 1px; background: ${e.hex}`)),this._logger.time("encode");let o=yield new Promise(e=>{new ReadableStream({start:e=>{this._encodingFrames.forEach(t=>{e.enqueue(t)}),e.close()}}).pipeThrough(new j(this._config,t)).pipeThrough(new U(this._config)).pipeThrough(new L(this._config)).pipeThrough(new O(u(d({},this._config),{colorTable:r}))).pipeTo(new WritableStream({write:t=>e(t)}))});if(this._logger.timeEnd("encode"),this._encodingFrames=[],this._encodeUUID=0,e==="blob")return new Blob([o.buffer],{type:"image/gif"});return o.buffer})}}function F(e){return new N(e).flush(e.format)}}}]);