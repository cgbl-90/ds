"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["9713"],{"./src/client/reporting/nps/__mocks__/fetchRecentNPSFeedbackMock.ts":function(e,n,a){a.d(n,{By:function(){return i},Zz:function(){return s},c3:function(){return t}});let t="2023/01/20 12:00:00",i={nps:{pageInfo:{totalCount:12},edges:[{id:"1",createdDate:new Date(new Date(t).getTime()-864e5).toISOString(),feedback:"Demo: Overall, I had a good experience. However, there is room for minor improvements.",merchantCustomer:{userFullName:"Alex River",hasBeenPurged:!1},answer:5},{id:"2",createdDate:new Date(new Date(t).getTime()-1728e5).toISOString(),feedback:"Demo: The service was satisfactory but not exceptional. I've had better experiences elsewhere.",merchantCustomer:{userFullName:"Bailey Sanchez",hasBeenPurged:!1},answer:4},{id:"3",createdDate:new Date(new Date(t).getTime()-1728e5).toISOString(),feedback:"Demo: The service was above average. The staff was helpful and friendly.",merchantCustomer:{userFullName:"Devon Huang",hasBeenPurged:!1},answer:6},{id:"4",createdDate:new Date(new Date(t).getTime()-2592e5).toISOString(),feedback:"Demo: The service was quite good, but the long wait times negatively affected my overall experience.",merchantCustomer:{userFullName:"Natasha Lloyd",hasBeenPurged:!1},answer:6},{id:"5",createdDate:new Date(new Date(t).getTime()-2592e5).toISOString(),feedback:"Demo: I was disappointed with the level of customer service provided. Staff was not as responsive as I would have liked.",merchantCustomer:{userFullName:"Harper Nguyen",hasBeenPurged:!1},answer:3},{id:"6",createdDate:new Date(new Date(t).getTime()-3456e5).toISOString(),feedback:"Demo: I enjoyed the service, but the product quality could be better.",merchantCustomer:{userFullName:"Indigo Johnson",hasBeenPurged:!1},answer:5},{id:"7",createdDate:new Date(new Date(t).getTime()-432e6).toISOString(),feedback:"Demo: Unfortunately, I had a very poor experience. The customer service was not up to standard and the product did not meet my expectations.",merchantCustomer:{userFullName:"Jaylen Kowalski",hasBeenPurged:!1},answer:0},{id:"8",createdDate:new Date(new Date(t).getTime()-5184e5).toISOString(),feedback:"Demo: My experience was not pleasant. The product didn't live up to its promise and the service was slow.",merchantCustomer:{userFullName:"Alicia Dean",hasBeenPurged:!1},answer:1},{id:"9",createdDate:new Date(new Date(t).getTime()-6048e5).toISOString(),feedback:"Demo: The product was okay, but the customer service was lacking. I was expecting a more prompt response to my queries.",merchantCustomer:{userFullName:"Hannah Byrne",hasBeenPurged:!1},answer:3},{id:"10",createdDate:new Date(new Date(t).getTime()-6912e5).toISOString(),feedback:"Demo: Good service, and I liked the product. Just a few minor issues that need to be addressed for a perfect score.",merchantCustomer:{userFullName:"David Murphy",hasBeenPurged:!1},answer:6},{id:"11",createdDate:new Date(new Date(t).getTime()-9504e5).toISOString(),feedback:"Demo: I enjoyed the service and the product met my expectations. I would recommend it to my friends.",merchantCustomer:{userFullName:"Leslie Holden",hasBeenPurged:!1},answer:6},{id:"12",createdDate:new Date(new Date(t).getTime()-10368e5).toISOString(),feedback:"Demo: The product didn't meet my expectations and the customer service was lacking. I'm not sure if I'd recommend it.",merchantCustomer:{userFullName:"Stuart Connor",hasBeenPurged:!1},answer:2}]}};new Date(new Date(t).getTime()-864e5).toISOString(),new Date(new Date(t).getTime()-1728e5).toISOString(),new Date(new Date(t).getTime()-1728e5).toISOString(),new Date(new Date(t).getTime()-2592e5).toISOString();let s=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{nps:{pageInfo:{totalCount:n},edges:Array(n).fill({id:Math.random().toString(),createdDate:new Date(new Date(t).getTime()-(e?18144e5:864e5)).toISOString(),feedback:"Demo: I had a great experience. I really appreciated the fast and helpful customer service.",merchantCustomer:{userFullName:"name1",hasBeenPurged:!1},answer:7})}}}},"./src/client/reporting/nps/components/NPSSummaryVerbatim/NPSSummaryVerbatimSlider.tsx":function(e,n,a){a.d(n,{Z:()=>I});var t=a("../node_modules/react/jsx-runtime.js"),i=a("../node_modules/react/index.js"),s=a("../node_modules/react-i18next/dist/es/index.js"),r=a("./src/shared/components/index.ts"),o=a("./src/shared/hooks/usePostHog/index.ts"),d=a("./src/shared/hooks/useMedia/index.ts"),l=a("../node_modules/@apollo/client/react/hooks/useQuery.js"),m=a("./src/shared/hooks/index.ts"),u=a("./src/shared/hooks/useIsDemo.ts"),c=a("./src/client/reporting/hooks/ReportingContext.tsx"),p=a("./src/client/reporting/hooks/types.ts"),h=a("./src/client/reporting/nps/__mocks__/fetchRecentNPSFeedbackMock.ts"),g=a("./src/client/reporting/nps/graphql/fetchRecentNPSFeedback.generated.ts"),k=a("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),y=a("../node_modules/styled-components/dist/styled-components.browser.esm.js"),v=a("./src/shared/assets/icon-user.svg");let f=y.ZP.div.withConfig({displayName:"NPSSummaryBubble.styled__Container"})(["display:grid;grid-template-rows:min-content 1fr min-content;margin-right:",";white-space:normal;"],(0,k.W0)(2)),S=(0,y.ZP)(k.XS).withConfig({displayName:"NPSSummaryBubble.styled__CreatedDate"})(["justify-self:flex-end;margin-bottom:",";color:",";"],(0,k.W0)(.5),(0,k.Ys)("NavyBase")),b=(0,y.ZP)(k.M).withConfig({displayName:"NPSSummaryBubble.styled__Feedback"})(["height:190px;margin-bottom:",";padding:",";overflow:hidden auto;color:",";background-color:",";border-radius:12px 12px 12px 0;"],(0,k.W0)(.5),(0,k.W0)(2),(0,k.Ys)("Black"),(0,k.Ys)("Cornflower20")),x=y.ZP.div.withConfig({displayName:"NPSSummaryBubble.styled__User"})(["display:flex;margin-top:",";color:",";align-items:flex-start;"],(0,k.W0)(2),(0,k.Ys)("NavyBase")),N=y.ZP.div.withConfig({displayName:"NPSSummaryBubble.styled__NameAndScore"})(["display:flex;flex-direction:column;"]),w=(0,y.ZP)(k.M).withConfig({displayName:"NPSSummaryBubble.styled__Name"})(["font-weight:700;"]),P=(0,y.ZP)(k.XS).withConfig({displayName:"NPSSummaryBubble.styled__Score"})([""]),D=(0,y.ZP)(v.Z).withConfig({displayName:"NPSSummaryBubble.styled__ProfileImage"})(["width:24px;height:24px;border-radius:100%;margin-right:",";"],(0,k.W0)(1)),j=e=>{let{feedback:n,fullname:a="",date:i,answer:r}=e,{t:o}=(0,s.$G)("reporting"),d=n.length>190,l=d?`${n.substring(0,190).trim()}…`:n;return(0,t.jsxs)(f,{children:[(0,t.jsx)(S,{children:(0,k.p6)(i,{notation:"custom",format:"dd-MMMM-yy"})}),(0,t.jsx)(b,{children:d?(0,t.jsxs)(k.u,{colourTheme:"dark",tooltip:n,children:["”",l,"”"]}):(0,t.jsxs)("span",{children:["”",n,"”"]})}),(0,t.jsxs)(x,{children:[(0,t.jsx)(D,{}),(0,t.jsxs)(N,{children:[(0,t.jsx)(w,{children:a}),(0,t.jsx)(P,{children:void 0!==r&&(0,t.jsxs)(s.cC,{t:o,i18nKey:"nps.verbatim.score",children:["NPS Score ",(0,t.jsxs)("b",{children:[{answer:r},"/10"]})]})})]})]})]})};j.Skeleton=()=>(0,t.jsxs)(f,{children:[(0,t.jsx)(S,{children:(0,t.jsx)(k.Od,{width:100})}),(0,t.jsx)(b,{children:(0,t.jsx)(k.Od,{height:150})}),(0,t.jsxs)(x,{children:[(0,t.jsx)(D,{}),(0,t.jsxs)(N,{children:[(0,t.jsx)(w,{children:(0,t.jsx)(k.Od,{width:100})}),(0,t.jsx)(P,{children:(0,t.jsx)(k.Od,{width:60})})]})]})]});j.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"NPSSummaryBubble",props:{feedback:{required:!0,tsType:{name:"string"},description:""},fullname:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},date:{required:!1,tsType:{name:"string"},description:""},answer:{required:!1,tsType:{name:"number"},description:""}}};let _=(0,y.ZP)("div").withConfig((0,k.NZ)("itemsDisplayedPerPage")).withConfig({displayName:"NPSSummaryVerbatimSlide.styled__Content"})(["display:grid;grid-template-columns:1fr;height:100%;","{grid-template-columns:repeat(",",1fr);}"],(0,k.mq)("lgMin","min"),e=>{let{itemsDisplayedPerPage:n}=e;return n}),C=e=>{let{offset:n,itemsDisplayedPerPage:a,totalCount:r,isAdopt:o=!1}=e,{t:d}=(0,s.$G)("reporting",{keyPrefix:"nps.most-recent"}),{merchantId:k}=(0,m.rc)(),{campaignId:y}=(0,c.eh)(),{isDemo:v}=(0,u.Z)(),{data:f,loading:S}=(0,l.aM)(g.K,{variables:{merchantId:k,campaignId:y===p.TD.CampaignSelector?void 0:y,limit:a,offset:n},skip:v||o}),b=(0,i.useMemo)(()=>v||o?{nps:{...h.By.nps,edges:h.By.nps.edges.slice(n,n+a)}}:f,[f,v,o,n,a]);return(0,t.jsx)(_,{itemsDisplayedPerPage:a,children:Array.from(Array(a).keys()).map(e=>{var a,i,s;if(n+e>=r)return null;let o=null==b?void 0:null===(a=b.nps.edges)||void 0===a?void 0:a[e];if(S||!o)return(0,t.jsx)(j.Skeleton,{},e);let l=d("anonymous-customer","Anonymous customer"),m=d("purged-customer","Purged customer"),u=(null===(i=o.merchantCustomer)||void 0===i?void 0:i.hasBeenPurged)?m:(null===(s=o.merchantCustomer)||void 0===s?void 0:s.userFullName)||l;return(0,t.jsx)(j,{feedback:o.feedback,fullname:o.merchantCustomer?u:l,date:o.createdDate,answer:o.answer},o.id)})})};C.Skeleton=e=>{let{itemsDisplayedPerPage:n}=e;return(0,t.jsx)(_,{itemsDisplayedPerPage:n,children:Array.from(Array(n).keys()).map(e=>(0,t.jsx)(j.Skeleton,{},e))})};C.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[{name:'{ itemsDisplayedPerPage }: Pick<Props, "itemsDisplayedPerPage">',optional:!1,type:{name:"Pick",elements:[{name:"Props"},{name:"literal",value:'"itemsDisplayedPerPage"'}],raw:'Pick<Props, "itemsDisplayedPerPage">',alias:"Pick"}}],returns:null}],displayName:"NPSSummaryVerbatimSlide",props:{offset:{required:!0,tsType:{name:"number"},description:""},itemsDisplayedPerPage:{required:!0,tsType:{name:"number"},description:""},totalCount:{required:!0,tsType:{name:"number"},description:""},isAdopt:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};let T=e=>{let{totalCount:n,isAdopt:a=!1,itemsDisplayedPerPage:l=3}=e,{t:m}=(0,s.$G)("reporting",{keyPrefix:"nps.most-recent"}),{postHog:u}=(0,o.U)(),c=(0,d.Z)(["(min-width: 1201px)"],[!0],!1),p=(0,i.useMemo)(()=>{let e=[];if(!n)return e;for(let i=0;i<n;i+=l)e.push((0,t.jsx)(C,{offset:i,itemsDisplayedPerPage:l,totalCount:n,isAdopt:a}));return e},[n,a,l]),h=(0,i.useCallback)(e=>{null==u||u.capture("nps-verbatim-pagination",{page:e})},[u]);return(0,t.jsx)(r.iR,{shouldLazyLoad:!0,items:p,paginationAriaLabel:m("pagination","Most recent pagination"),onChange:h,isDragEnabled:!c})};T.Skeleton=e=>{let{itemsDisplayedPerPage:n=3}=e,{t:a}=(0,s.$G)("reporting"),i=Array.from([,,,,].keys()).map(e=>(0,t.jsx)(C.Skeleton,{itemsDisplayedPerPage:n},e));return(0,t.jsx)(r.iR,{items:i,paginationAriaLabel:a("pagination","Most recent pagination")})};let I=T;T.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[{name:'{\n    itemsDisplayedPerPage = ITEMS_DISPLAYED_PER_PAGE,\n}: Pick<Props, "itemsDisplayedPerPage">',optional:!1,type:{name:"Pick",elements:[{name:"Props"},{name:"literal",value:'"itemsDisplayedPerPage"'}],raw:'Pick<Props, "itemsDisplayedPerPage">',alias:"Pick"}}],returns:null}],displayName:"NPSSummaryVerbatimSlider",props:{totalCount:{required:!0,tsType:{name:"number"},description:""},itemsDisplayedPerPage:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"3",computed:!1}},isAdopt:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}}},"./src/client/reporting/nps/components/SentimentAnalysisInformationBox/NoRunningCampaignInformationBox.tsx":function(e,n,a){a.d(n,{Z:()=>c});var t=a("../node_modules/react/jsx-runtime.js"),i=a("../node_modules/react/index.js"),s=a("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),r=a("../node_modules/react-i18next/dist/es/index.js"),o=a("./src/shared/hooks/usePostHog/index.ts"),d=a("./src/shared/hooks/useProductUpsellRequest/index.ts");let l=()=>{let{sendProductUpsellRequest:e}=(0,d.Z)();return{sendEmail:(0,i.useCallback)(()=>{e("Sentiment Analysis Summary")},[e])}};var m=a("./src/client/reporting/nps/utlities/isMoreThanTwoWeeksAgo.ts");let u=e=>{let{lastNPSFeedbackDate:n}=e,{sendEmail:a}=l(),{t:d}=(0,r.$G)("reporting",{keyPrefix:"nps.no-running-campaign"}),{postHog:u}=(0,o.U)();return(0,i.useEffect)(()=>{!n||(0,m.s)(n)?null==u||u.capture("nps-old-data-more-than-2 weeks"):null==u||u.capture("nps-old-data-less-than-2 weeks")},[n,u]),(0,t.jsx)(t.Fragment,{children:!n||(0,m.s)(n)?(0,t.jsx)(s.eg,{size:"lg",variant:"warning",isFullWidth:!0,children:(0,t.jsxs)(s.eg.Body,{children:[(0,t.jsx)(s.H5,{children:d("more-than-2-weeks.title","This NPS survey is no longer running")}),(0,t.jsx)(s.M,{children:(0,t.jsxs)(r.cC,{t:d,i18nKey:"more-than-2-weeks.body",children:["The results shown below are historical, the last feedback was left on"," ",(0,t.jsx)("strong",{children:{date:(0,s.p6)(n,{notation:"custom",format:"dd-MMM-yy"})}}),"."," ",(0,t.jsx)(s.zx,{variant:"link",as:"a",colourTheme:"dark",onClick:()=>{a()},children:"Click to contact us and get it relaunched"})]})})]})}):(0,t.jsx)(s.eg,{variant:"info",isFullWidth:!0,children:(0,t.jsx)(s.eg.Body,{children:(0,t.jsx)(s.M,{"data-auto-class":"information-box-body",children:(0,t.jsxs)(r.cC,{t:d,i18nKey:"less-than-2-weeks.body",children:["Your NPS campaign isn't running - the last feedback was received on"," ",(0,t.jsx)("strong",{children:{date:(0,s.p6)(n,{notation:"custom",format:"dd-MMM-yy"})}}),". Get in touch now to maintain this insight."," ",(0,t.jsx)(s.zx,{variant:"link",as:"a",colourTheme:"dark",onClick:()=>{a()},children:"Click here to contact us"})]})})})})})},c=u;u.__docgenInfo={description:"",methods:[],displayName:"NoRunningCampaignInformationBox",props:{lastNPSFeedbackDate:{required:!1,tsType:{name:"string"},description:""}}}},"./src/client/reporting/nps/graphql/fetchRecentNPSFeedback.generated.ts":function(e,n,a){a.d(n,{K:function(){return t}});let t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchRecentNPSFeedback"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"merchantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"campaignId"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"12"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"0"}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"minimumWordCount"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"minimumLength"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nps"},arguments:[{kind:"Argument",name:{kind:"Name",value:"merchantId"},value:{kind:"Variable",name:{kind:"Name",value:"merchantId"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"requireFeedback"},value:{kind:"BooleanValue",value:!0}},{kind:"Argument",name:{kind:"Name",value:"campaignId"},value:{kind:"Variable",name:{kind:"Name",value:"campaignId"}}},{kind:"Argument",name:{kind:"Name",value:"minimumWordCount"},value:{kind:"Variable",name:{kind:"Name",value:"minimumWordCount"}}},{kind:"Argument",name:{kind:"Name",value:"minimumLength"},value:{kind:"Variable",name:{kind:"Name",value:"minimumLength"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pageInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}},{kind:"Field",name:{kind:"Name",value:"edges"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"createdDate"}},{kind:"Field",name:{kind:"Name",value:"feedback"}},{kind:"Field",name:{kind:"Name",value:"merchantCustomer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userFullName"}},{kind:"Field",name:{kind:"Name",value:"hasBeenPurged"}}]}},{kind:"Field",name:{kind:"Name",value:"answer"}}]}}]}}]}}]}},"./src/client/reporting/nps/hooks/useMerchantNpsState.ts":function(e,n,a){a.d(n,{Z:()=>m});var t=a("../node_modules/react/index.js"),i=a("../node_modules/@apollo/client/react/hooks/useQuery.js"),s=a("./src/shared/constants/filterStatuses.ts"),r=a("./src/shared/hooks/useIsDemo.ts"),o=a("./src/client/reporting/hooks/types.ts"),d=a("./src/client/reporting/hooks/useCampaigns.ts");let l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchCheckCampaignForNps"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"campaignId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"campaign"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"campaignId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"hasEverRunNPS"}}]}}]}}]},m=function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.TD.CampaignSelector,{isDemo:a}=(0,r.Z)(),{data:m,loading:u}=(0,i.aM)(l,{skip:!n||n===o.TD.CampaignSelector||"NONE"===n,variables:{campaignId:n}}),{loading:c,campaigns:p}=(0,d.Z)({campaignTypes:["NPS"],excludedCampaignStatuses:[s.Z.DRAFT]}),h=(0,t.useMemo)(()=>{var e;return!n||!!u||n===o.TD.CampaignSelector||"NONE"===n||(null==m?void 0:null===(e=m.campaign)||void 0===e?void 0:e.hasEverRunNPS)},[null==m?void 0:null===(e=m.campaign)||void 0===e?void 0:e.hasEverRunNPS,n,u]),g=(0,t.useMemo)(()=>p.filter(e=>{let{status:n,hasRunningNPSExperiments:a}=e;return a&&n===s.Z.CURRENTLY_LIVE}),[p]),k=(0,t.useMemo)(()=>0===p.length?null:[...p].sort((e,n)=>e.dateLastLiveWithNPS&&n.dateLastLiveWithNPS?new Date(n.dateLastLiveWithNPS).getTime()-new Date(e.dateLastLiveWithNPS).getTime():0)[0],[p]),y=!u&&!c&&h&&(null==g?void 0:g.length)===0,v=!c&&0===p.length;return{isDemo:a,isCurrentCampaignSuitableForNps:h,isLoading:u||c,shouldUseMockData:u||c||a||!h||v,hasNoRunningCampaigns:y,hasNoCampaigns:v,lastRunningCampaign:k}}},"./src/client/reporting/nps/utlities/isMoreThanTwoWeeksAgo.ts":function(e,n,a){a.d(n,{s:function(){return t}});let t=e=>new Date().getTime()-12096e5-new Date(e).getTime()>0},"./src/client/reporting/sentiment-analysis/components/SentimentAnalysisSummary.tsx":function(e,n,a){a.d(n,{Z:()=>I});var t=a("../node_modules/react/jsx-runtime.js"),i=a("../node_modules/react/index.js"),s=a("../node_modules/@apollo/client/react/hooks/useQuery.js"),r=a("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),o=a("../node_modules/react-i18next/dist/es/index.js"),d=a("../node_modules/react-router-dom/esm/react-router-dom.js"),l=a("./src/shared/hooks/index.ts"),m=a("./src/shared/hooks/useIsDemo.ts"),u=a("./src/shared/hooks/useLocalStorage/index.ts"),c=a("./src/shared/utilities/index.ts"),p=a("./src/client/reporting/hooks/ReportingContext.tsx"),h=a("./src/client/reporting/hooks/types.ts"),g=a("./src/client/reporting/nps/__mocks__/fetchRecentNPSFeedbackMock.ts"),k=a("./src/client/reporting/nps/components/NPSSummaryVerbatim/NPSSummaryVerbatimSlider.tsx"),y=a("./src/client/reporting/nps/components/SentimentAnalysisInformationBox/NoRunningCampaignInformationBox.tsx"),v=a("./src/client/reporting/nps/graphql/fetchRecentNPSFeedback.generated.ts"),f=a("./src/client/reporting/nps/hooks/useMerchantNpsState.ts"),S=a("./src/client/reporting/nps/utlities/isMoreThanTwoWeeksAgo.ts"),b=a("./src/client/reporting/share-messages/components/ShareMessagesAnalysisInformationBoxes/OldDataInformationBox.tsx"),x=a("./src/client/reporting/share-messages/components/ShareMessagesSlider.tsx"),N=a("./src/client/reporting/share-messages/hooks/useShareMessageAnalytics.ts"),w=a("../node_modules/styled-components/dist/styled-components.browser.esm.js");let P=w.ZP.div.withConfig({displayName:"SentimentAnalysisSummary.styled__Section"})(["margin-bottom:",";"],(0,r.W0)(1)),D=(0,w.ZP)(r.H3).withConfig({displayName:"SentimentAnalysisSummary.styled__SectionHeader"})(["margin-bottom:",";"],(0,r.W0)(2));(0,r.W0)(1),(0,r.W0)(2),(0,r.mq)("lgMin","min");let j=(0,w.ZP)(r.S).withConfig({displayName:"SentimentAnalysisSummary.styled__Subtitle"})(["margin-bottom:",";"],(0,r.W0)(1)),_=w.ZP.div.withConfig({displayName:"SentimentAnalysisSummary.styled__InformationBox"})(["margin-bottom:",";&:empty{display:none;}"],(0,r.W0)(2)),C=w.ZP.div.withConfig({displayName:"SentimentAnalysisSummary.styled__SliderWrapper"})(["margin-top:",";margin-bottom:",";"],(0,r.W0)(3),(0,r.W0)(2)),T=()=>{var e;let{merchantId:n}=(0,l.rc)(),{campaignId:a}=(0,p.eh)(),{isDemo:w}=(0,m.Z)(),{data:I,loading:M}=(0,s.aM)(v.K,{variables:{merchantId:n,campaignId:a===h.TD.CampaignSelector?void 0:a,limit:1},skip:w}),{isLoading:B,isCurrentCampaignSuitableForNps:F,hasNoCampaigns:Z,hasNoRunningCampaigns:A}=(0,f.Z)(a),V=(0,i.useMemo)(()=>w?g.By:I,[I,w]),{loading:O,shareMessageAnalytics:W}=(0,N.Z)(),{t:q}=(0,o.$G)("reporting"),L=(0,i.useMemo)(()=>{var e;return w||(null==W?void 0:W.isNativeShareMessageCaptureEnabled)||(null==W?void 0:null===(e=W.lastShareMessage)||void 0===e?void 0:e.shareDate)&&!(0,S.s)(W.lastShareMessage.shareDate)},[w,W]),R=(null==V?void 0:null===(e=V.nps.pageInfo)||void 0===e?void 0:e.totalCount)||0,E=(0,i.useMemo)(()=>w||!Z&&F&&R&&(null==V?void 0:V.nps.edges[0].createdDate)&&(!A||!(0,S.s)(V.nps.edges[0].createdDate)),[w,Z,F,R,V,A]),H=(0,i.useMemo)(()=>[...L?[{label:q("sentiment-analysis.overview-dashboard.options.share-message","Share message"),value:"share-message"}]:[],...E?[{label:q("sentiment-analysis.overview-dashboard.options.nps","NPS feedback"),value:"nps"}]:[]],[q,L,E]),[G,K]=(0,u.Z)(`${n}_default-sentiment-analysis-category`,"share-message");if((0,i.useEffect)(()=>{if(!M){if(!L){K("nps");return}!E&&K("share-message")}},[M,K,L,E]),M||O||B)return(0,t.jsx)(T.Skeleton,{});let Y=e=>{K(e)};return(0,t.jsxs)(P,{children:[(0,t.jsx)(D,{children:q("sentiment-analysis.overview-dashboard.header","Driving revenue growth through customer advocacy")}),(0,t.jsxs)(r.Zb,{children:[(0,t.jsx)(r.Zb.Title,{children:q("sentiment-analysis.summary.title","What customers are saying about your brand")}),H.length>1&&(0,t.jsx)(r.Zb.Info,{children:(0,t.jsx)(r.sY,{options:H,state:{value:G,onChange:e=>{Y(e)}}})}),(0,t.jsx)(r.Zb.Body,{children:"nps"===G?(0,t.jsxs)(t.Fragment,{children:[!!E&&A&&!!R&&(0,t.jsx)(_,{children:(0,t.jsx)(y.Z,{lastNPSFeedbackDate:null==V?void 0:V.nps.edges[0].createdDate})}),(0,t.jsx)(o.cC,{t:q,i18nKey:"sentiment-analysis.overview-dashboard.nps-feedback.subtitle",children:(0,t.jsx)(j,{children:"This is what your customers have said about your brand after leaving an NPS score. We ask your customers for NPS feedback immediately post purchase. This gives you an insight into how passives and detractors think."})}),(0,t.jsx)(k.Z,{totalCount:R,itemsDisplayedPerPage:4})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_,{children:(0,t.jsx)(b.Z,{})}),(0,t.jsx)(o.cC,{t:q,i18nKey:"sentiment-analysis.overview-dashboard.share-message.subtitle",children:(0,t.jsx)(j,{children:"This is what your customers have written about your brand when sharing a referral link to their friends. View our sentiment analysis of these sharing messages to see key themes and insights. In turn, use these insights to tailor your comms and discover what your advocates see as your key value propositions"})}),(0,t.jsx)(C,{children:(0,t.jsx)(x.Z,{})})]})}),(0,t.jsx)(r.Zb.Buttons,{children:(0,t.jsx)(r.BY,{as:d.OL,to:(0,c.nu)("fe_sentiment_analysis",{merchantId:n}),children:q("sentiment-analysis.overview-dashboard.cta","View Sentiment analysis")})})]})]})};T.Skeleton=()=>(0,t.jsxs)(r.Zb,{children:[(0,t.jsx)(r.Zb.Title,{children:(0,t.jsx)(r.Od,{height:"22",width:"100"})}),(0,t.jsx)(r.Zb.Body,{children:(0,t.jsx)(x.Z.Skeleton,{})}),(0,t.jsx)(r.Zb.Buttons,{children:(0,t.jsx)(r.Od,{height:"20",width:"60"})})]});let I=T;T.__docgenInfo={description:"This component goes on the advocacy overview dashboard",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"SentimentAnalysisSummary"}}}]);