/*! For license information please see client-customer-approvals-components-BulkApprovalModal-BulkActionApprovableModal-stories.90a890c7.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["4728"],{"./src/shared/components/Chart/ChartInternal.module.less?712b":function(e,a,n){"use strict";n.d(a,{Z:function(){return t}});let t={loading:"loading-i429gv",header:"header-INChVS",titles:"titles-herhqc",chartWrapper:"chartWrapper-v_5RGH",chartWrapperLegendLeft:"chartWrapperLegendLeft-gyUVNB",chartWrapperLegendRight:"chartWrapperLegendRight-N6VGBw",chartWrapperLegendTop:"chartWrapperLegendTop-JPzW2f",chartWrapperLegendBottom:"chartWrapperLegendBottom-ZyJR9E",chart:"chart-_XQz0c",customChartLegendHidden:"customChartLegendHidden-QDlMox"}},"./src/client/customer/approvals/components/BulkApprovalModal/BulkActionApprovableModal.stories.tsx":function(e,a,n){"use strict";n.r(a),n.d(a,{Decline:()=>q,Approve:()=>C,default:()=>N});var t=n("../node_modules/react/jsx-runtime.js"),r=n("../node_modules/msw/lib/core/graphql.mjs"),o=n("../node_modules/msw/lib/core/HttpResponse.mjs"),i=n("./src/shared/@types/graphql.ts"),s=n("../node_modules/react/index.js"),l=n("../node_modules/@apollo/client/react/hooks/useMutation.js"),d=n("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),p=n("../node_modules/react-i18next/dist/es/index.js"),c=n("./src/shared/components/index.ts"),u=n("./src/shared/context/NotificationContext.tsx"),m=n("./src/shared/hooks/index.ts"),h=n("./src/shared/utilities/validation/index.ts");let y=e=>{let{approvableAction:a,countedApprovables:n}=e,{t:r}=(0,p.$G)("customer");return a===i.B$.Approve?(0,t.jsxs)(p.cC,{t:r,i18nKey:"approval.bulk.modal.approve.count",children:["This will approve ",(0,t.jsx)("strong",{children:{countedApprovables:n}})," people."]}):(0,t.jsxs)(p.cC,{t:r,i18nKey:"approval.bulk.modal.decline.count",children:["This will decline ",(0,t.jsx)("strong",{children:{countedApprovables:n}})," people."]})};y.__docgenInfo={description:"",methods:[],displayName:"AffectedPeople",props:{approvableAction:{required:!0,tsType:{name:"ApprovableActionEnum"},description:""},countedApprovables:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""}}};let v=n("../node_modules/styled-components/dist/styled-components.browser.esm.js").ZP.div.withConfig({displayName:"VelocityControls.styled__VelocityControlsContainer"})(["margin-top:",";> div{margin:"," 0;}"],(0,d.W0)(2),(0,d.W0)(1)),g=e=>{let{willBypassVelocityChecks:a,approvalAction:n,setWillBypassVelocityChecks:r}=e,{t:o}=(0,p.$G)("customer",{keyPrefix:"approval.bulk.modal.velocityChecks"});return n!==i.B$.Approve?null:(0,t.jsxs)(v,{children:[(0,t.jsx)("hr",{}),(0,t.jsx)("div",{children:(0,t.jsxs)(d.S,{children:[(0,t.jsx)(p.cC,{t:o,i18nKey:"label",children:"What should we do with customers who might trigger velocity controls?"})," ",(0,t.jsx)(c.WW,{message:o("help","Velocity controls prevent someone from being rewarded too many times. For example, consider a customer who has earned 5 rewards in a 12 month period. Velocity controls could be used to prevent them earning a 6th reward. They are calculated at the point the reward is given and so cannot be calculated yet.")})]})}),(0,t.jsx)("div",{children:(0,t.jsx)(d.sY,{state:{value:a?"true":"false",onChange:e=>r("true"===e),name:"bypass-velocity-checks"},options:[{value:"false",label:o("bypass.false","Do not approve them")},{value:"true",label:o("bypass.true","Approve and give reward")}]})}),(0,t.jsx)("div",{children:a?(0,t.jsx)(d.eg,{variant:"warning",size:"sm",children:(0,t.jsx)(d.eg.Body,{children:(0,t.jsx)(d.S,{children:o("warning","Be careful. This could lead to someone earning a lot of rewards. A safer alternative is to not bypass this check here and manually review them later.")})})}):(0,t.jsx)(d.eg,{variant:"info",size:"sm",children:(0,t.jsx)(d.eg.Body,{children:(0,t.jsx)(d.S,{children:o("info","Customers who do trigger velocity controls will not be approved or given rewards. They will remain in the gaming queue for you to review manually later.")})})})})]})};g.__docgenInfo={description:"",methods:[],displayName:"VelocityControls",props:{willBypassVelocityChecks:{required:!0,tsType:{name:"boolean"},description:""},approvalAction:{required:!0,tsType:{name:"ApprovableActionEnum"},description:""},setWillBypassVelocityChecks:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<boolean>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<boolean>",elements:[{name:"boolean"}]}]},description:""}}};let b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"bulkActionByGamingScore"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"merchantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ApprovableObjectEnum"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"approvalAction"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ApprovableActionEnum"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"comparisonType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"FilterEnum"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"score"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"dryRun"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"bypassVelocityChecks"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"bulkActionByGamingScore_Approvable"},arguments:[{kind:"Argument",name:{kind:"Name",value:"merchantId"},value:{kind:"Variable",name:{kind:"Name",value:"merchantId"}}},{kind:"Argument",name:{kind:"Name",value:"objectType"},value:{kind:"Variable",name:{kind:"Name",value:"objectType"}}},{kind:"Argument",name:{kind:"Name",value:"actionType"},value:{kind:"Variable",name:{kind:"Name",value:"approvalAction"}}},{kind:"Argument",name:{kind:"Name",value:"comparisonType"},value:{kind:"Variable",name:{kind:"Name",value:"comparisonType"}}},{kind:"Argument",name:{kind:"Name",value:"score"},value:{kind:"Variable",name:{kind:"Name",value:"score"}}},{kind:"Argument",name:{kind:"Name",value:"dryRun"},value:{kind:"Variable",name:{kind:"Name",value:"dryRun"}}},{kind:"Argument",name:{kind:"Name",value:"bypassVelocityChecks"},value:{kind:"Variable",name:{kind:"Name",value:"bypassVelocityChecks"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"}}]}}]}}]},f="capitalize-DM2v61",k="input-vemH6b",w="textInput-ng5VCX",j=[i.Nc.GreaterThan,i.Nc.LessThanEquals],x=e=>{let{isOpen:a,onClose:n,approvalAction:r}=e,{t:o}=(0,p.$G)("customer"),{addSuccessNotification:v}=(0,u.kE)(),{merchantId:x,objectType:N}=(0,m.rc)(),[T,C]=(0,s.useState)(r===i.B$.Decline?i.Nc.GreaterThan:i.Nc.LessThanEquals),[q,A]=(0,s.useState)(null),[_,R]=(0,s.useState)("50"),[S,B]=(0,s.useState)(50),[V,$]=(0,s.useState)(!1),[L,{loading:E}]=(0,l.D)(b,{onCompleted:(e,a)=>{var t;A(e.bulkActionByGamingScore_Approvable.count),!(null==a?void 0:null===(t=a.variables)||void 0===t?void 0:t.dryRun)&&(v(o("approval.bulk.modal.success.heading","Success"),o("approval.bulk.modal.success.body","{{count}} people have been actioned. This may take a couple of hours to complete.",{count:e.bulkActionByGamingScore_Approvable.count})),n())}});return(0,s.useEffect)(()=>{null!==S&&(0,h.kE)(S)&&a&&L({variables:{merchantId:x,approvalAction:r,objectType:N,comparisonType:T,score:S,dryRun:!0,bypassVelocityChecks:!1}})},[L,a,x,r,N,T,S]),(0,t.jsx)(d.u_,{isOpen:a,onClose:n,children:(0,t.jsxs)(d.u_.Content,{children:[(0,t.jsxs)(d.u_.Header,{children:[(0,t.jsx)(d.H5,{children:o("approval.bulk.modal.header","Bulk Actions")}),(0,t.jsx)(d.u_.CloseButton,{})]}),(0,t.jsx)(d.u_.Body,{children:(0,t.jsxs)(d.al,{children:[(0,t.jsx)(d.M,{children:o("approval.bulk.modal.intro","This will allow you to automatically {{action}} all customers with a gaming score above or below a threshold.",{action:r})}),(0,t.jsx)("span",{children:(0,t.jsxs)(d.M,{children:[(0,t.jsxs)(p.cC,{t:o,i18nkey:"approval.bulk.modal.action",children:[(0,t.jsx)("strong",{className:f,children:{approvalAction:r}})," all users with a gaming score"," "]}),(0,t.jsx)("span",{className:k,children:(0,t.jsx)(c.lq,{variant:"link",options:Object.values(j).map(e=>({key:o(`approval.bulk.modal.comparison_types.${e}`),value:e})),value:T,onChange:C})})," ",(0,t.jsx)("span",{className:`${k} ${w}`,children:(0,t.jsx)(c.oi,{value:_,type:"number",step:"1",onChange:e=>{let{value:a}=e.target;R(a),(0,h.kE)(a)?B(parseInt(a,10)):B(null)}})})]})}),E||null===S?(0,t.jsx)(d.Od,{}):(0,t.jsx)(d.M,{children:(0,t.jsx)(y,{approvableAction:r,countedApprovables:q})}),(0,t.jsx)(g,{willBypassVelocityChecks:V,approvalAction:r,setWillBypassVelocityChecks:$})]})}),(0,t.jsxs)(d.u_.Footer,{children:[(0,t.jsx)(d.zx,{variant:r===i.B$.Approve?"primary":"criticalSecondary",disabled:E||null==S,onClick:()=>{null!==S&&L({variables:{merchantId:x,approvalAction:r,objectType:N,comparisonType:T,score:S,dryRun:!1,bypassVelocityChecks:V}})},children:r===i.B$.Approve?o("approval.bulk.modal.button.approve","Approve"):o("approval.bulk.modal.button.decline","Decline")}),(0,t.jsx)(d.zx,{variant:"outline",onClick:n,children:o("approval.bulk.modal.button.cancel","Cancel")})]})]})})};x.__docgenInfo={description:"",methods:[],displayName:"BulkActionApprovableModal",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},approvalAction:{required:!0,tsType:{name:"ApprovableActionEnum"},description:""}}};let N={component:x,title:"Portal / Customer Profile / Approvals / Bulk Action Approvable Modal",parameters:{layout:"padded",msw:{handlers:[r.B.mutation("bulkActionByGamingScore",()=>o.Z.json({data:{__typename:"Mutation",bulkActionByGamingScore_Approvable:{__typename:"BulkApprovableResult",count:10}}}))]}},argTypes:{},args:{isOpen:!0,closeModal:()=>{console.log("closing")}}},T=e=>{let{approvalAction:a,onClose:n,isOpen:r}=e;return(0,t.jsx)(x,{approvalAction:a,onClose:n,isOpen:r})},C=T.bind({});C.args={approvalAction:i.B$.Approve};let q=T.bind({});q.args={approvalAction:i.B$.Decline},C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:"({\n  approvalAction,\n  onClose,\n  isOpen\n}) => {\n  return <BulkActionApprovableModal approvalAction={approvalAction} onClose={onClose} isOpen={isOpen} />;\n}",...C.parameters?.docs?.source}}},q.parameters={...q.parameters,docs:{...q.parameters?.docs,source:{originalSource:"({\n  approvalAction,\n  onClose,\n  isOpen\n}) => {\n  return <BulkActionApprovableModal approvalAction={approvalAction} onClose={onClose} isOpen={isOpen} />;\n}",...q.parameters?.docs?.source}}}},"./src/shared/components/Chart/Chart.tsx":function(e,a,n){"use strict";n.d(a,{Z:()=>y});var t=n("../node_modules/react/jsx-runtime.js"),r=n("../node_modules/react/index.js"),o=n("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),i=n("../node_modules/styled-components/dist/styled-components.browser.esm.js"),s=n("./src/shared/components/Chart/ChartInternal.module.less?712b");let l=(0,r.lazy)(()=>Promise.all([n.e("2084"),n.e("7773"),n.e("6168"),n.e("3268"),n.e("7186"),n.e("2392"),n.e("6064"),n.e("1586"),n.e("6292"),n.e("4878"),n.e("1379"),n.e("3363"),n.e("4699"),n.e("247"),n.e("7847"),n.e("897"),n.e("4175"),n.e("7256"),n.e("1141"),n.e("4684"),n.e("4712"),n.e("9432"),n.e("4537")]).then(n.bind(n,"./src/shared/components/Chart/ChartInternal.tsx"))),d=(0,r.forwardRef)((e,a)=>{let{chartHeight:n,fallback:o,isLoading:i,...d}=e,p=o?(0,t.jsx)("div",{style:{height:n},children:o}):(0,t.jsx)("div",{className:s.Z.loading,style:{height:n}});return(0,t.jsx)(r.Suspense,{fallback:p,children:i?p:(0,t.jsx)(l,{ref:a,chartHeight:n,...d})})});d.__docgenInfo={description:"",methods:[],displayName:"LazyChart"};let p=i.ZP.div.withConfig({displayName:"ChartModal.styled__FallbackContainer"})(["height:80vh;.fallback{height:70vh;}"]),c=i.ZP.div.withConfig({displayName:"ChartModal.styled__Fallback"})(["height:70vh;"]),u=(0,i.ZP)(d).withConfig({displayName:"ChartModal.styled__Chart"})(["h3{font-weight:300;opacity:1;font-size:24px;padding-bottom:11px;}"]),m=e=>{let{config:a,data:n,annotations:r,amChartType:i,className:s,title:l,isOpen:d,isLoading:m,fallback:h,closeModal:y,openModal:v,shouldShowDownloadImage:g,...b}=e;return(0,t.jsx)(o.u_,{isOpen:d,onClose:y,modalVariant:"expanded",children:(0,t.jsxs)(o.u_.Content,{children:[(0,t.jsxs)(o.u_.Header,{children:[(0,t.jsx)(o.H5,{children:l}),(0,t.jsx)(o.u_.CloseButton,{})]}),(0,t.jsx)(o.u_.Body,{children:(0,t.jsx)(u,{isExpandMode:!0,className:s,config:a,data:n,annotations:r,amChartType:i,chartHeight:"75vh",openModal:v,isLoading:m,shouldShowDownloadImage:g,fallback:(0,t.jsx)(p,{children:(0,t.jsx)(c,{children:h})}),...b})})]})})};m.__docgenInfo={description:"",methods:[],displayName:"ChartModal",props:{config:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},description:""},data:{required:!1,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},annotations:{required:!1,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},amChartType:{required:!1,tsType:{name:"string"},description:""},chartHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},title:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""},subTitle:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""},isExpandMode:{required:!1,tsType:{name:"boolean"},description:""},openModal:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},shouldShowDownloadImage:{required:!1,tsType:{name:"boolean"},description:""},hasTogglableLegend:{required:!1,tsType:{name:"boolean"},description:""},isAnimated:{required:!1,tsType:{name:"boolean"},description:""},shouldShowHeader:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},fallback:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},closeModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}},composes:["Omit"]};let h=(0,r.forwardRef)((e,a)=>{let{config:n,data:o,annotations:i,amChartType:s,className:l,chartHeight:p,title:c,subTitle:u,fallback:h,isLoading:y,shouldShowDownloadImage:v=!0,...g}=e,[b,f]=(0,r.useState)(!1),k=()=>f(!0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d,{className:l,config:n,data:o,annotations:i,amChartType:s,chartHeight:p,title:c,subTitle:u,openModal:k,fallback:h,isLoading:y,ref:a,shouldShowDownloadImage:v,...g}),(0,t.jsx)(m,{className:l,config:n,data:o,annotations:i,amChartType:s,title:c,isOpen:b,fallback:h,closeModal:()=>f(!1),openModal:k,isLoading:y,shouldShowDownloadImage:v,...g})]})}),y=h;h.__docgenInfo={description:"",methods:[],displayName:"Chart",props:{shouldShowDownloadImage:{defaultValue:{value:"true",computed:!1},required:!1}}}},"../node_modules/classnames/index.js":function(e){!function(){"use strict";var a={}.hasOwnProperty;function n(){for(var e="",r=0;r<arguments.length;r++){var o=arguments[r];o&&(e=t(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var r="";for(var o in e)a.call(e,o)&&e[o]&&(r=t(r,o));return r}(o)))}return e}function t(e,a){return a?e?e+" "+a:e+a:e}e.exports?(n.default=n,e.exports=n):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return n}):window.classNames=n}()},"../node_modules/msw/lib/core/graphql.mjs":function(e,a,n){"use strict";n.d(a,{B:()=>j});var t=n("../node_modules/msw/lib/core/handlers/RequestHandler.mjs"),r=n("../node_modules/msw/lib/core/utils/logging/getTimestamp.mjs"),o=n("../node_modules/msw/lib/core/utils/logging/getStatusCodeColor.mjs"),i=n("../node_modules/msw/lib/core/utils/logging/serializeRequest.mjs"),s=n("../node_modules/msw/lib/core/utils/logging/serializeResponse.mjs"),l=n("../node_modules/msw/lib/core/utils/matching/matchRequestUrl.mjs"),d=n("../node_modules/msw/lib/core/utils/request/toPublicUrl.mjs"),p=n("../node_modules/msw/lib/core/utils/internal/devUtils.mjs");function c(e){try{return JSON.parse(e)}catch{return}}var u=n("../node_modules/headers-polyfill/lib/index.mjs");function m(e){let a=e.definitions.find(e=>"OperationDefinition"===e.kind);return{operationType:a?.operation,operationName:a?.name?.value}}async function h(e){let{parse:a}=await n.e("8055").then(n.bind(n,"../node_modules/msw/node_modules/graphql/index.mjs")).catch(e=>{throw console.error('[MSW] Failed to parse a GraphQL query: cannot import the "graphql" module. Please make sure you install it if you wish to intercept GraphQL requests. See the original import error below.'),e});try{let n=a(e);return m(n)}catch(e){return e}}async function y(e){switch(e.method){case"GET":{let a=new URL(e.url),n=a.searchParams.get("query");return{query:n,variables:c(a.searchParams.get("variables")||"")}}case"POST":{let a=e.clone();if(e.headers.get("content-type")?.includes("multipart/form-data")){let n=function(e,a){let n=a?.get("content-type");if(!n)return;let[,...t]=n.split(/; */),r=t.filter(e=>e.startsWith("boundary=")).map(e=>e.replace(/^boundary=/,""))[0];if(!r)return;let o=RegExp(`--+${r}`),i=e.split(o).filter(e=>e.startsWith("\r\n")&&e.endsWith("\r\n")).map(e=>e.trimStart().replace(/\r\n$/,""));if(!i.length)return;let s={};try{for(let e of i){let[a,...n]=e.split("\r\n\r\n"),t=n.join("\r\n\r\n"),{contentType:r,filename:o,name:i}=function(e){let a=(0,u.$M)(e),n=a.get("content-type")||"text/plain",t=a.get("content-disposition");if(!t)throw Error('"Content-Disposition" header is required.');let r=t.split(";").reduce((e,a)=>{let[n,...t]=a.trim().split("=");return e[n]=t.join("="),e},{}),o=r.name?.slice(1,-1);return{name:o,filename:r.filename?.slice(1,-1),contentType:n}}(a),l=void 0===o?t:new File([t],o,{type:r}),d=s[i];void 0===d?s[i]=l:Array.isArray(d)?s[i]=[...d,l]:s[i]=[d,l]}return s}catch{return}}(await a.text(),e.headers);if(!n)return null;let{operations:t,map:r,...o}=n,i=c(t)||{};if(!i.query)return null;let s=c(r||"")||{},l=i.variables?function(e,a,n){let t={variables:e};for(let[e,r]of Object.entries(a)){if(!(e in n))throw Error(`Given files do not have a key '${e}' .`);for(let a of r){let[r,...o]=a.split(".").reverse(),i=o.reverse(),s=t;for(let e of i){if(!(e in s))throw Error(`Property '${i}' is not in operations.`);s=s[e]}s[r]=n[e]}}return t.variables}(i.variables,s,o):{};return{query:i.query,variables:l}}let n=await a.json().catch(()=>null);if(n?.query){let{query:e,variables:a}=n;return{query:e,variables:a}}}default:return null}}async function v(e){let a=await y(e);if(!a||!a.query)return;let{query:n,variables:t}=a,r=await h(n);if(r instanceof Error){let a=(0,d.F)(e.url);throw Error(p.e.formatMessage('Failed to intercept a GraphQL request to "%s %s": cannot parse query. See the error message from the parser below.\n\n%s',e.method,a,r.message))}return{query:a.query,operationType:r.operationType,operationName:r.operationName,variables:t}}var g=n("../node_modules/msw/lib/core/utils/request/getRequestCookies.mjs");class b extends t.Z{endpoint;static parsedRequestCache=new WeakMap;constructor(e,a,n,t,r){var o;let i=a;if(null!=(o=a)&&"object"==typeof o&&"kind"in o&&"definitions"in o){let n=m(a);if(n.operationType!==e)throw Error(`Failed to create a GraphQL handler: provided a DocumentNode with a mismatched operation type (expected "${e}", but got "${n.operationType}").`);if(!n.operationName)throw Error("Failed to create a GraphQL handler: provided a DocumentNode with no operation name.");i=n.operationName}super({info:{header:"all"===e?`${e} (origin: ${n.toString()})`:`${e} ${i} (origin: ${n.toString()})`,operationType:e,operationName:i},resolver:t,options:r}),this.endpoint=n}async parseGraphQLRequestOrGetFromCache(e){return!b.parsedRequestCache.has(e)&&b.parsedRequestCache.set(e,await v(e).catch(e=>{console.error(e)})),b.parsedRequestCache.get(e)}async parse(e){let a=(0,l.R)(new URL(e.request.url),this.endpoint),n=(0,g.B)(e.request);if(!a.matches)return{match:a,cookies:n};let t=await this.parseGraphQLRequestOrGetFromCache(e.request);return void 0===t?{match:a,cookies:n}:{match:a,cookies:n,query:t.query,operationType:t.operationType,operationName:t.operationName,variables:t.variables}}predicate(e){if(void 0===e.parsedResult.operationType)return!1;if(!e.parsedResult.operationName&&"all"!==this.info.operationType){let a=(0,d.F)(e.request.url);return p.e.warn(`Failed to intercept a GraphQL request at "${e.request.method} ${a}": anonymous GraphQL operations are not supported.

Consider naming this operation or using "graphql.operation()" request handler to intercept GraphQL requests regardless of their operation name/type. Read more: https://mswjs.io/docs/api/graphql/#graphqloperationresolver`),!1}let a="all"===this.info.operationType||e.parsedResult.operationType===this.info.operationType,n=this.info.operationName instanceof RegExp?this.info.operationName.test(e.parsedResult.operationName||""):e.parsedResult.operationName===this.info.operationName;return e.parsedResult.match.matches&&a&&n}extendResolverArgs(e){return{query:e.parsedResult.query||"",operationName:e.parsedResult.operationName||"",variables:e.parsedResult.variables||{},cookies:e.parsedResult.cookies}}async log(e){let a=await (0,i.Y)(e.request),n=await (0,s.X)(e.response),t=(0,o.m)(n.status),l=e.parsedResult.operationName?`${e.parsedResult.operationType} ${e.parsedResult.operationName}`:`anonymous ${e.parsedResult.operationType}`;console.groupCollapsed(p.e.formatMessage(`${(0,r.u)()} ${l} (%c${n.status} ${n.statusText}%c)`),`color:${t}`,"color:inherit"),console.log("Request:",a),console.log("Handler:",this),console.log("Response:",n),console.groupEnd()}}function f(e,a){return(n,t,r={})=>new b(e,n,a,t,r)}function k(e){return a=>new b("all",RegExp(".*"),e,a)}let w={query:f("query","*"),mutation:f("mutation","*"),operation:k("*")},j={...w,link:function(e){return{operation:k(e),query:f("query",e),mutation:f("mutation",e)}}}}}]);
//# sourceMappingURL=client-customer-approvals-components-BulkApprovalModal-BulkActionApprovableModal-stories.90a890c7.iframe.bundle.js.map