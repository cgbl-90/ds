"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["2772"],{"./src/shared/components/Chart/ChartInternal.module.less?712b":function(e,t,n){n.d(t,{Z:function(){return a}});let a={loading:"loading-i429gv",header:"header-INChVS",titles:"titles-herhqc",chartWrapper:"chartWrapper-v_5RGH",chartWrapperLegendLeft:"chartWrapperLegendLeft-gyUVNB",chartWrapperLegendRight:"chartWrapperLegendRight-N6VGBw",chartWrapperLegendTop:"chartWrapperLegendTop-JPzW2f",chartWrapperLegendBottom:"chartWrapperLegendBottom-ZyJR9E",chart:"chart-_XQz0c",customChartLegendHidden:"customChartLegendHidden-QDlMox"}},"./src/shared/components/Chart/Chart.tsx":function(e,t,n){n.d(t,{Z:()=>g});var a=n("../node_modules/react/jsx-runtime.js"),s=n("../node_modules/react/index.js"),r=n("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),o=n("../node_modules/styled-components/dist/styled-components.browser.esm.js"),d=n("./src/shared/components/Chart/ChartInternal.module.less?712b");let i=(0,s.lazy)(()=>Promise.all([n.e("2084"),n.e("7773"),n.e("6168"),n.e("3268"),n.e("7186"),n.e("2392"),n.e("6064"),n.e("1586"),n.e("6292"),n.e("4878"),n.e("1379"),n.e("3363"),n.e("4699"),n.e("247"),n.e("7847"),n.e("897"),n.e("4175"),n.e("7256"),n.e("1141"),n.e("4684"),n.e("4712"),n.e("9432"),n.e("4537")]).then(n.bind(n,"./src/shared/components/Chart/ChartInternal.tsx"))),l=(0,s.forwardRef)((e,t)=>{let{chartHeight:n,fallback:r,isLoading:o,...l}=e,c=r?(0,a.jsx)("div",{style:{height:n},children:r}):(0,a.jsx)("div",{className:d.Z.loading,style:{height:n}});return(0,a.jsx)(s.Suspense,{fallback:c,children:o?c:(0,a.jsx)(i,{ref:t,chartHeight:n,...l})})});l.__docgenInfo={description:"",methods:[],displayName:"LazyChart"};let c=o.ZP.div.withConfig({displayName:"ChartModal.styled__FallbackContainer"})(["height:80vh;.fallback{height:70vh;}"]),h=o.ZP.div.withConfig({displayName:"ChartModal.styled__Fallback"})(["height:70vh;"]),m=(0,o.ZP)(l).withConfig({displayName:"ChartModal.styled__Chart"})(["h3{font-weight:300;opacity:1;font-size:24px;padding-bottom:11px;}"]),p=e=>{let{config:t,data:n,annotations:s,amChartType:o,className:d,title:i,isOpen:l,isLoading:p,fallback:u,closeModal:g,openModal:y,shouldShowDownloadImage:x,...w}=e;return(0,a.jsx)(r.u_,{isOpen:l,onClose:g,modalVariant:"expanded",children:(0,a.jsxs)(r.u_.Content,{children:[(0,a.jsxs)(r.u_.Header,{children:[(0,a.jsx)(r.H5,{children:i}),(0,a.jsx)(r.u_.CloseButton,{})]}),(0,a.jsx)(r.u_.Body,{children:(0,a.jsx)(m,{isExpandMode:!0,className:d,config:t,data:n,annotations:s,amChartType:o,chartHeight:"75vh",openModal:y,isLoading:p,shouldShowDownloadImage:x,fallback:(0,a.jsx)(c,{children:(0,a.jsx)(h,{children:u})}),...w})})]})})};p.__docgenInfo={description:"",methods:[],displayName:"ChartModal",props:{config:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},description:""},data:{required:!1,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},annotations:{required:!1,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},amChartType:{required:!1,tsType:{name:"string"},description:""},chartHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},title:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""},subTitle:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""},isExpandMode:{required:!1,tsType:{name:"boolean"},description:""},openModal:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},shouldShowDownloadImage:{required:!1,tsType:{name:"boolean"},description:""},hasTogglableLegend:{required:!1,tsType:{name:"boolean"},description:""},isAnimated:{required:!1,tsType:{name:"boolean"},description:""},shouldShowHeader:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},fallback:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},closeModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}},composes:["Omit"]};let u=(0,s.forwardRef)((e,t)=>{let{config:n,data:r,annotations:o,amChartType:d,className:i,chartHeight:c,title:h,subTitle:m,fallback:u,isLoading:g,shouldShowDownloadImage:y=!0,...x}=e,[w,j]=(0,s.useState)(!1),f=()=>j(!0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l,{className:i,config:n,data:r,annotations:o,amChartType:d,chartHeight:c,title:h,subTitle:m,openModal:f,fallback:u,isLoading:g,ref:t,shouldShowDownloadImage:y,...x}),(0,a.jsx)(p,{className:i,config:n,data:r,annotations:o,amChartType:d,title:h,isOpen:w,fallback:u,closeModal:()=>j(!1),openModal:f,isLoading:g,shouldShowDownloadImage:y,...x})]})}),g=u;u.__docgenInfo={description:"",methods:[],displayName:"Chart",props:{shouldShowDownloadImage:{defaultValue:{value:"true",computed:!1},required:!1}}}},"./src/shared/components/Charts/ChartHeader/ChartHeader.tsx":function(e,t,n){n.d(t,{Z:()=>x});var a=n("../node_modules/react/jsx-runtime.js"),s=n("../node_modules/@heroicons/react/24/solid/esm/ArrowDownTrayIcon.js"),r=n("../node_modules/@heroicons/react/24/solid/esm/ArrowsPointingOutIcon.js"),o=n("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),d=n("../node_modules/react-i18next/dist/es/index.js"),i=n("./src/shared/components/Chart/AnnotationsModal.tsx"),l=n("./src/shared/hooks/useMerchantParams/useMerchantParams.ts"),c=n("./src/shared/hooks/usePostHog/index.ts"),h=n("./src/shared/hooks/useUserCustomPreference/index.ts"),m=n("./src/shared/utilities/index.ts"),p=n("../node_modules/styled-components/dist/styled-components.browser.esm.js");let u=p.ZP.div.withConfig({displayName:"ChartHeader.styled__Header"})(["display:flex;justify-content:space-between;margin-bottom:",";"],(0,o.W0)(2)),g=p.ZP.div.withConfig({displayName:"ChartHeader.styled__ButtonContainer"})(["display:flex;gap:",";"],(0,o.W0)(1)),y=e=>{let{openExpandedModal:t,download:n,title:p}=e,{t:y}=(0,d.$G)("reporting",{keyPrefix:"charts"}),[x,w]=(0,o.OT)(),{merchantId:j}=(0,l.Z)(),{postHog:f}=(0,c.U)(),[C,_]=(0,h.Z)("global-chart-annotations",!0);return(0,a.jsxs)(u,{children:[(0,a.jsx)("span",{children:p}),(0,a.jsxs)(g,{children:[(0,a.jsx)(i.Z,{isOpen:x,closeModal:w.close,merchantId:j}),(0,a.jsxs)(o.Lt,{variant:"outline",label:y("annotations-dropdown.label","Annotations"),children:[(0,a.jsxs)(o.Lt.Button,{onClick:e=>e.stopPropagation(),children:[y("show-annotations.label","Show annotations"),(0,a.jsx)(o.Zh,{switchSize:"small",checked:C,onChange:e=>{e.target.checked?null==f||f.capture("annotations-enable"):null==f||f.capture("annotations-disable"),_(e.target.checked)}})]}),(0,a.jsx)(o.Lt.Button,{onClick:w.open,children:y("add-annotations.label","Add new annotation")}),(0,a.jsx)(o.Lt.Link,{href:(0,m.nu)("fe_merchant_chart_annotations",{merchantId:j}),children:y("manage-annotations.label","Manage annotations")})]}),(0,a.jsx)(o.zx,{onClick:e=>{e.preventDefault(),n()},title:y("download-image","Download as image"),variant:"secondary",children:(0,a.jsx)(s.Z,{})}),(0,a.jsx)(o.zx,{onClick:e=>{e.preventDefault(),t()},title:y("expand","Expand chart"),variant:"secondary",children:(0,a.jsx)(r.Z,{})})]})]})};y.Skeleton=()=>(0,a.jsxs)(u,{children:[(0,a.jsx)("span",{children:(0,a.jsx)(o.Od,{width:120,height:30})}),(0,a.jsxs)(g,{children:[(0,a.jsx)(o.zx,{disabled:!0,variant:"secondary",children:(0,a.jsx)(o.Od,{width:70})}),(0,a.jsx)(o.zx,{disabled:!0,variant:"secondary",children:(0,a.jsx)(o.Od,{width:70})}),(0,a.jsx)(o.zx,{disabled:!0,variant:"secondary",children:(0,a.jsx)(o.Od,{width:70})})]})]});let x=y;y.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"ChartHeader",props:{openExpandedModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},download:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},title:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}}},"./src/shared/components/Charts/ChartWrapper/ChartWrapper.tsx":function(e,t,n){n.d(t,{Z:()=>x});var a=n("../node_modules/react/jsx-runtime.js"),s=n("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),r=n("../node_modules/react-i18next/dist/es/index.js"),o=n("../node_modules/react/index.js"),d=n("../node_modules/html2canvas/dist/html2canvas.js"),i=n.n(d),l=n("../node_modules/jspdf/dist/jspdf.es.min.js");let c=()=>(0,s.p6)(new Date,{notation:"custom",format:"yyyy-MM-dd"}),h=function(){let{fileName:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{t}=(0,r.$G)("shared"),n=(0,o.useRef)(null),a=e||t("page-download.default-file-name","Mention-Me-summary"),s=e=>{let t=window.document.createElement("a");t.setAttribute("style","display:none;"),t.setAttribute("download",`${a}-${c()}`),t.setAttribute("href",e),document.body.appendChild(t),t.click(),document.body.removeChild(t),t.remove()},d=async()=>{if(null===n.current)return;let e=document.getElementsByTagName("html")[0],t=document.getElementsByTagName("body")[0],a=e.clientWidth,s=t.clientWidth,r=n.current.scrollWidth-n.current.clientWidth;r>n.current.clientWidth&&(a+=r,s+=r),e.style.width=`${a}px`,t.style.width=`${s}px`;let o=(await i()(n.current,{useCORS:!0})).toDataURL("image/jpeg",.9);return e.style.width="",t.style.width="",o},h=async()=>{let e=await d();if(e&&n.current){let t=new l.kH("p","mm"),n=t.getImageProperties(e),s=210*n.height/n.width,r=s,o=10;for(t.addImage(e,"JPEG",0,o,210,s),r-=295;r>=0;)o+=r-s,t.addPage(),t.addImage(e,"JPEG",0,o,210,s),r-=295;t.save(`${a}-${c()}.pdf`)}};return{downloadRef:n,download:{asImage:async()=>{let e=await d();e&&s(e)},asPdf:h}}};var m=n("./src/shared/components/Charts/ChartHeader/ChartHeader.tsx"),p=n("../node_modules/styled-components/dist/styled-components.browser.esm.js");let u=(0,p.ZP)("div").withConfig((0,s.NZ)("isModal")).withConfig({displayName:"ChartWrapper.styled__Parent"})(["position:relative;width:100%;",""],e=>{let{isModal:t}=e;return t&&(0,p.iv)(["height:100% !important;width:100% !important;& &{height:100% !important;width:100% !important;}"])}),g=(0,p.ZP)("div").withConfig((0,s.NZ)("shouldShowHeader")).withConfig({displayName:"ChartWrapper.styled__Child"})(["position:absolute;width:100%;height:",";"],e=>{let{shouldShowHeader:t}=e;return t?"calc(100% - 60px)":"100%"}),y=e=>{let{children:t,shouldShowHeader:n,title:o,isLoading:d,...i}=e,{t:l}=(0,r.$G)("reporting",{keyPrefix:"charts"}),{download:c,downloadRef:p}=h(),[y,{open:x,close:w}]=(0,s.OT)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u,{...i,children:[n&&(d?(0,a.jsx)(m.Z.Skeleton,{}):(0,a.jsx)(m.Z,{openExpandedModal:x,download:c.asImage,title:o})),(0,a.jsx)(g,{ref:p,shouldShowHeader:n,children:t})]}),(0,a.jsx)(s.u_,{isOpen:y,onClose:w,modalVariant:"expanded",children:(0,a.jsxs)(s.u_.Content,{children:[(0,a.jsxs)(s.u_.Header,{children:[(0,a.jsx)(s.H5,{children:o||l("modal-title","Chart")}),(0,a.jsx)(s.u_.CloseButton,{})]}),(0,a.jsx)(s.u_.Body,{children:(0,a.jsx)(u,{...i,isModal:!0,children:(0,a.jsx)(g,{children:t})})})]})})]})},x=y;y.__docgenInfo={description:"",methods:[],displayName:"ChartWrapper",props:{shouldShowHeader:{required:!1,tsType:{name:"boolean"},description:""},title:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""}}}}}]);