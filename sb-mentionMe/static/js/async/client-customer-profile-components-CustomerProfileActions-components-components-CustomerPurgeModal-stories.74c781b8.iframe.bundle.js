/*! For license information please see client-customer-profile-components-CustomerProfileActions-components-components-CustomerPurgeModal-stories.74c781b8.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["961"],{"./src/shared/components/Chart/ChartInternal.module.less?712b":function(e,n,a){"use strict";a.d(n,{Z:function(){return r}});let r={loading:"loading-i429gv",header:"header-INChVS",titles:"titles-herhqc",chartWrapper:"chartWrapper-v_5RGH",chartWrapperLegendLeft:"chartWrapperLegendLeft-gyUVNB",chartWrapperLegendRight:"chartWrapperLegendRight-N6VGBw",chartWrapperLegendTop:"chartWrapperLegendTop-JPzW2f",chartWrapperLegendBottom:"chartWrapperLegendBottom-ZyJR9E",chart:"chart-_XQz0c",customChartLegendHidden:"customChartLegendHidden-QDlMox"}},"./src/client/customer/profile/components/CustomerProfileActions/components/components/CustomerPurgeModal.stories.tsx":function(e,n,a){"use strict";a.r(n),a.d(n,{default:()=>p,Default:()=>g});var r=a("../node_modules/react/jsx-runtime.js"),t=a("../node_modules/@apollo/client/react/hooks/useMutation.js"),i=a("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),s=a("../node_modules/react-i18next/dist/es/index.js"),o=a("../node_modules/react-router/esm/react-router.js"),l=a("./src/shared/context/NotificationContext.tsx"),d=a("./src/shared/hooks/index.ts"),u=a("./src/shared/utilities/index.ts");let m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"purgeMerchantCustomer"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"merchantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"purge_MerchantCustomer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"merchantId"},value:{kind:"Variable",name:{kind:"Name",value:"merchantId"}}},{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"firstname"}},{kind:"Field",name:{kind:"Name",value:"surname"}},{kind:"Field",name:{kind:"Name",value:"userFullName"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"email"}}]}}]}}]}}]},c=e=>{var n,a;let{isOpen:c,onClose:p,merchantCustomer:g}=e,{t:h}=(0,s.$G)("customer"),y=(0,o.k6)(),{merchantId:f,userId:k}=(0,d.rc)(),{addSuccessNotification:v,addErrorNotification:b}=(0,l.kE)(),[_]=(0,t.D)(m,{onCompleted:()=>{v(h("purge.modal.success.heading","Success"),h("purge.modal.success.body","This customer's details have been purged")),y.push((0,u.nu)("fe_merchant_customers_home",{merchantId:f}))},onError:()=>{b(h("shared:oops","Oops!"),h("purge.modal.error.body","There was an error purging this customer."))}}),C=(null==g?void 0:g.userFullName)?`${g.userFullName} - ${null==g?void 0:null===(n=g.user)||void 0===n?void 0:n.email}`:`${null==g?void 0:null===(a=g.user)||void 0===a?void 0:a.email}`;return(0,r.jsx)(i.aR,{isOpen:c,onCancel:p,title:h("purge.modal.header","Anonymise customer records permanently"),cancelButtonCopy:h("purge.modal.button.cancel","Cancel"),confirmButtonCopy:h("purge.modal.button.purge","Confirm permanent delete"),onConfirmation:async()=>{await _({variables:{merchantId:f,userId:k}})},children:(0,r.jsxs)(i.al,{children:[(0,r.jsx)(i.M,{children:h("purge.modal.intro","You can use this functionality to remove this customers data.")}),(0,r.jsx)(i.M,{children:(0,r.jsx)("strong",{children:h("purge.modal.warning","This action is permanent. It cannot be reversed.")})}),(0,r.jsx)(i.M,{children:h("purge.modal.outro","Their data will be anonymised. The record of any shares, referrals or rewards earned will be retained but any personal data will be scrambled.")}),(0,r.jsx)(i.M,{children:h("purge.modal.who","You are deleting the records of {{identifier}}.",{identifier:C})})]})})};c.__docgenInfo={description:"",methods:[],displayName:"CustomerPurgeModal",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},onClose:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},merchantCustomer:{required:!0,tsType:{name:"signature",type:"object",raw:"{ __typename: 'MerchantCustomer', id: string, createdDate: string, userFullName?: string | null, customerUsername?: string | null, customerId?: string | null, hashKey?: string | null, lastPurchaseDate?: string | null, isSuspicious: boolean, isReceivingEmails: boolean, isPayingCustomer: boolean, user: { __typename: 'User', id?: string | null, email: string, locked: boolean }, refereesForConfirmPurchase?: Array<{ __typename: 'Referee', id: string }> | null, latestNps?: { __typename: 'NPS', id: string, answer: number, feedback?: string | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'MerchantCustomer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"createdDate",value:{name:"string",required:!0}},{key:"userFullName",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"customerUsername",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"customerId",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"hashKey",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"lastPurchaseDate",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"isSuspicious",value:{name:"boolean",required:!0}},{key:"isReceivingEmails",value:{name:"boolean",required:!0}},{key:"isPayingCustomer",value:{name:"boolean",required:!0}},{key:"user",value:{name:"signature",type:"object",raw:"{ __typename: 'User', id?: string | null, email: string, locked: boolean }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'User'",required:!0}},{key:"id",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"email",value:{name:"string",required:!0}},{key:"locked",value:{name:"boolean",required:!0}}]},required:!0}},{key:"refereesForConfirmPurchase",value:{name:"union",raw:"Array<{ __typename: 'Referee', id: string }> | null",elements:[{name:"Array",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Referee', id: string }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Referee'",required:!0}},{key:"id",value:{name:"string",required:!0}}]}}],raw:"Array<{ __typename: 'Referee', id: string }>"},{name:"null"}],required:!1}},{key:"latestNps",value:{name:"union",raw:"{ __typename: 'NPS', id: string, answer: number, feedback?: string | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'NPS', id: string, answer: number, feedback?: string | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'NPS'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"answer",value:{name:"number",required:!0}},{key:"feedback",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},description:""}}};let p={component:c,title:"Portal / Customer Profile / Purge / Modal",parameters:{layout:"padded"},argTypes:{},args:{isOpen:!0,onClose:()=>{console.log("closeModal")},merchantCustomer:{__typename:"MerchantCustomer",id:"123",userFullName:"Guy Fawkes",createdDate:new Date().toISOString(),user:{__typename:"User",id:"511",email:"guy@anarchy.com",locked:!1},isPayingCustomer:!1,isSuspicious:!1,isReceivingEmails:!1}}},g=(e=>{let{onClose:n,isOpen:a,merchantCustomer:t}=e;return(0,r.jsx)(c,{isOpen:a,onClose:n,merchantCustomer:t})}).bind({});g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:"({\n  onClose,\n  isOpen,\n  merchantCustomer\n}) => {\n  return <CustomerPurgeModal isOpen={isOpen} onClose={onClose} merchantCustomer={merchantCustomer} />;\n}",...g.parameters?.docs?.source}}}},"./src/shared/components/Chart/Chart.tsx":function(e,n,a){"use strict";a.d(n,{Z:()=>h});var r=a("../node_modules/react/jsx-runtime.js"),t=a("../node_modules/react/index.js"),i=a("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),s=a("../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=a("./src/shared/components/Chart/ChartInternal.module.less?712b");let l=(0,t.lazy)(()=>Promise.all([a.e("2084"),a.e("7773"),a.e("6168"),a.e("3268"),a.e("7186"),a.e("2392"),a.e("6064"),a.e("1586"),a.e("6292"),a.e("4878"),a.e("1379"),a.e("3363"),a.e("4699"),a.e("247"),a.e("7847"),a.e("897"),a.e("4175"),a.e("7256"),a.e("1141"),a.e("4684"),a.e("4712"),a.e("9432"),a.e("4537")]).then(a.bind(a,"./src/shared/components/Chart/ChartInternal.tsx"))),d=(0,t.forwardRef)((e,n)=>{let{chartHeight:a,fallback:i,isLoading:s,...d}=e,u=i?(0,r.jsx)("div",{style:{height:a},children:i}):(0,r.jsx)("div",{className:o.Z.loading,style:{height:a}});return(0,r.jsx)(t.Suspense,{fallback:u,children:s?u:(0,r.jsx)(l,{ref:n,chartHeight:a,...d})})});d.__docgenInfo={description:"",methods:[],displayName:"LazyChart"};let u=s.ZP.div.withConfig({displayName:"ChartModal.styled__FallbackContainer"})(["height:80vh;.fallback{height:70vh;}"]),m=s.ZP.div.withConfig({displayName:"ChartModal.styled__Fallback"})(["height:70vh;"]),c=(0,s.ZP)(d).withConfig({displayName:"ChartModal.styled__Chart"})(["h3{font-weight:300;opacity:1;font-size:24px;padding-bottom:11px;}"]),p=e=>{let{config:n,data:a,annotations:t,amChartType:s,className:o,title:l,isOpen:d,isLoading:p,fallback:g,closeModal:h,openModal:y,shouldShowDownloadImage:f,...k}=e;return(0,r.jsx)(i.u_,{isOpen:d,onClose:h,modalVariant:"expanded",children:(0,r.jsxs)(i.u_.Content,{children:[(0,r.jsxs)(i.u_.Header,{children:[(0,r.jsx)(i.H5,{children:l}),(0,r.jsx)(i.u_.CloseButton,{})]}),(0,r.jsx)(i.u_.Body,{children:(0,r.jsx)(c,{isExpandMode:!0,className:o,config:n,data:a,annotations:t,amChartType:s,chartHeight:"75vh",openModal:y,isLoading:p,shouldShowDownloadImage:f,fallback:(0,r.jsx)(u,{children:(0,r.jsx)(m,{children:g})}),...k})})]})})};p.__docgenInfo={description:"",methods:[],displayName:"ChartModal",props:{config:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},description:""},data:{required:!1,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},annotations:{required:!1,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},amChartType:{required:!1,tsType:{name:"string"},description:""},chartHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},title:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""},subTitle:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""},isExpandMode:{required:!1,tsType:{name:"boolean"},description:""},openModal:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},shouldShowDownloadImage:{required:!1,tsType:{name:"boolean"},description:""},hasTogglableLegend:{required:!1,tsType:{name:"boolean"},description:""},isAnimated:{required:!1,tsType:{name:"boolean"},description:""},shouldShowHeader:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},fallback:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},closeModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}},composes:["Omit"]};let g=(0,t.forwardRef)((e,n)=>{let{config:a,data:i,annotations:s,amChartType:o,className:l,chartHeight:u,title:m,subTitle:c,fallback:g,isLoading:h,shouldShowDownloadImage:y=!0,...f}=e,[k,v]=(0,t.useState)(!1),b=()=>v(!0);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d,{className:l,config:a,data:i,annotations:s,amChartType:o,chartHeight:u,title:m,subTitle:c,openModal:b,fallback:g,isLoading:h,ref:n,shouldShowDownloadImage:y,...f}),(0,r.jsx)(p,{className:l,config:a,data:i,annotations:s,amChartType:o,title:m,isOpen:k,fallback:g,closeModal:()=>v(!1),openModal:b,isLoading:h,shouldShowDownloadImage:y,...f})]})}),h=g;g.__docgenInfo={description:"",methods:[],displayName:"Chart",props:{shouldShowDownloadImage:{defaultValue:{value:"true",computed:!1},required:!1}}}},"../node_modules/classnames/index.js":function(e){!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=r(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var i in e)n.call(e,i)&&e[i]&&(t=r(t,i));return t}(i)))}return e}function r(e,n){return n?e?e+" "+n:e+n:e}e.exports?(a.default=a,e.exports=a):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return a}):window.classNames=a}()}}]);