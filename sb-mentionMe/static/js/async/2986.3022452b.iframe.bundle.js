"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["2986"],{"./src/client/reporting/utilities/getType.ts":function(e,t,r){r.d(t,{Z:function(){return o}});var n=r("./src/shared/@types/graphql.ts");let o=(e,t)=>{switch(!0){case t:return n.mV.Currency;case e:return n.mV.Percentage;default:return n.mV.Number}}},"./src/shared/components/Charts/SunburstChart/SunburstChart.tsx":function(e,t,r){r.d(t,{Z:()=>q});var n=r("../node_modules/react/jsx-runtime.js"),o=r("../node_modules/@nivo/sunburst/dist/nivo-sunburst.es.js"),s=r("../node_modules/hex-to-rgba/build/index.js"),i=r.n(s),a=r("../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=r("./src/shared/components/Charts/ChartWrapper/index.ts"),d=r("./src/shared/components/Charts/SunburstChart/context/SunburstChartContext.tsx"),u=r("../node_modules/@mention-me/flamingo-ui/build/index.es.js");let c=(0,a.ZP)(u.Od).withConfig({displayName:"SunburstChartChart.styled__SunburstSkeleton"})(['height:0;padding-bottom:100%;border-radius:100%;&::before{position:absolute;z-index:1;display:block;border-radius:100%;background:white;content:"";inset:50px;}']),p=e=>{let{centerX:t,centerY:r,centerValue:o}=e,{colors:s}=(0,a.Fg)();return o?(0,n.jsx)("text",{x:t,y:r,textAnchor:"middle",dominantBaseline:"central",style:{fontSize:"38px",fontWeight:400,color:s.NavyBase},children:o}):null},m=e=>{let{data:t,isLoading:r,centerValue:s,borderWidth:a=2,tooltip:u=()=>null,ariaLabel:c,activeLegendID:h}=e,{activeLegendID:b,setActiveLegendItem:g}=(0,d.t)(),S=[e=>(0,n.jsx)(p,{...e,centerValue:s})],C=h||b;return r?(0,n.jsx)(m.Skeleton,{"data-auto-class":"sunburst-chart-skeleton"}):(0,n.jsx)(l.Z,{"aria-label":c,style:{paddingBottom:"100%"},children:(0,n.jsx)(o.hq,{data:t,colors:e=>i()(e.data.color,C&&e.id!==C?.3:1),borderWidth:a,layers:["arcs",...S],inheritColorFromParent:!1,motionConfig:"default",tooltip:u,onMouseEnter:e=>g({id:String(e.id),isLegendItem:!1}),onMouseLeave:()=>g({id:null})})})};m.Skeleton=()=>(0,n.jsx)(c,{});m.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"SunburstChartChart",props:{data:{required:!0,tsType:{name:"T"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},centerValue:{required:!1,tsType:{name:"string"},description:""},tooltip:{required:!1,tsType:{name:'ReactComponentProps["tooltip"]',raw:'React.ComponentProps<typeof ResponsiveSunburst<T>>["tooltip"]'},description:"",defaultValue:{value:"() => null",computed:!1}},ariaLabel:{required:!1,tsType:{name:"string"},description:""},activeLegendID:{required:!1,tsType:{name:"string"},description:""},borderWidth:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}}}};var h=r("../node_modules/react-i18next/dist/es/index.js"),b=r("./src/shared/@types/reporting.ts"),g=r("./src/shared/hooks/index.ts"),S=r("./src/shared/hooks/useTimePeriodTranslation/index.ts");let C=e=>{switch(e){case b.Iq.LAST_60_DAYS:case b.Iq.LAST_3_MONTHS:case b.Iq.LAST_8_WEEKS:case b.Iq.LAST_12_WEEKS:case b.Iq.LAST_MONTH:case b.Iq.SPECIFIC_3_MONTHS:return b.Cc.WEEK;case b.Iq.LAST_26_WEEKS:case b.Iq.LAST_6_MONTHS:case b.Iq.LAST_12_MONTHS:case b.Iq.LAST_12_WHOLE_MONTHS:case b.Iq.SPECIFIC_6_MONTHS:case b.Iq.SPECIFIC_12_MONTHS:case b.Iq.SPECIFIC_13_MONTHS:case b.Iq.SPECIFIC_24_MONTHS:return b.Cc.MONTH;default:return b.Cc.DAY}};var _=r("./src/client/reporting/utilities/getType.ts"),x=r("./src/shared/@types/graphql.ts");let T=(e,t,r,n)=>{switch(t){case x.mV.Currency:return(0,u.xG)(e,{currencySymbol:r});case x.mV.Percentage:return(0,u.rl)(e,{fixedFractionDigits:n??1});case x.mV.Number:default:return(0,u.uf)(e,{fixedFractionDigits:0})}},y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.Iq.LAST_ALL_TIME,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,{t:o}=(0,h.$G)("reporting"),{merchantId:s}=(0,g.rc)(),i=(0,S.Z)(t,!0),{scalarValueShortenedForDisplay:a=0,comparison:l,isPercentage:d,isCurrency:u,currencySymbol:c,scalarValue:p=0,reportUrlData:m}=e??{},x=d?`${(100*p).toFixed(100*p>1?0:1)}%`:a,y=C(t),[f,v]=m||[],L=T(p,(0,_.Z)(d,u),c),P=r!==b.MW.NONE?o("reporting:metric-tile.description",{context:r,ratio:null==l?void 0:l.ratioForDisplay,timePeriod:i}):o("reporting:metric-tile.description-no-comparison",{value:L,metric:null==n?void 0:n.toLowerCase(),timePeriod:i});return{scalarValue:p,displayValue:x,description:t===b.Iq.LAST_ALL_TIME?o("metric-tile.all-time"):P,comparisonScalarValue:null==l?void 0:l.scalarValue,comparisonRatio:null==l?void 0:l.ratioForDisplay,isComparisonPositive:null==l?void 0:l.growthPositive,reportRoute:f,reportRouteParams:{...v,merchantId:s,groupby:y}}};var f=r("./src/shared/utilities/index.ts");let v=(0,a.ZP)(u.__).withConfig((0,u.NZ)("bgColour")).withConfig({displayName:"SunburstChartLabel.styled__Label"})(["border-width:1;border-style:solid;background-color:",";border-color:",";color:",";"],e=>{let{bgColour:t}=e;return t},e=>{let{bgColour:t}=e;return t},e=>{let{bgColour:t,theme:r}=e;return(0,u.Ys)((0,f.M1)(t)?"NavyBase":"White")({theme:r})}),L=a.ZP.div.withConfig({displayName:"SunburstChartLabel.styled__Container"})(["display:flex;flex-wrap:nowrap;padding:",";gap:",";cursor:pointer;width:fit-content;align-items:center;"],(0,u.W0)(.5),(0,u.W0)(1)),P=e=>{let{metric:{id:t,data:r,isLoading:o,metadata:s,color:i},timePeriod:a,compareTo:l}=e,{t:c}=(0,h.$G)("reporting"),{setActiveLegendItem:p}=(0,d.t)(),{displayValue:m}=y(r,a,l);return o?(0,n.jsx)(P.Skeleton,{}):(0,n.jsxs)(L,{onMouseEnter:()=>p({id:t}),onFocus:()=>p({id:t}),onBlur:()=>p({id:null}),onMouseLeave:()=>p({id:null}),"data-auto-class":`sunburst-chart-label-${null==s?void 0:s.name.replace(/\s+/g,"-").toLowerCase()}`,children:[(0,n.jsx)(v,{variant:"classification",bgColour:i,children:c("nps.sunburst-chart.name",{context:null==s?void 0:s.name.replace(/\s+/g,"-").toLowerCase()})}),(0,n.jsx)(u.S,{children:c("nps.sunburst-chart.score",{context:null==s?void 0:s.name.replace(/\s+/g,"-").toLowerCase()})}),(0,n.jsx)(u.M,{children:m})]})};P.Skeleton=()=>(0,n.jsxs)(L,{children:[(0,n.jsx)(u.Od,{width:77,height:25}),(0,n.jsx)(u.Od,{width:94,height:18}),(0,n.jsx)(u.Od,{width:30,height:18})]});P.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"SunburstChartLabel",props:{metric:{required:!0,tsType:{name:"DataMetric"},description:""},timePeriod:{required:!0,tsType:{name:"ReportTimePeriod"},description:""},compareTo:{required:!1,tsType:{name:"ReportCompareTo"},description:""}},composes:["Partial"]};var I=r("./src/shared/components/DataTile/DataTile.tsx"),N=r("./src/shared/components/Label/UpliftLabel.styled.tsx");let j=e=>{let{metric:{data:t,id:r,isLoading:o,metadata:s,color:i},timePeriod:a,compareTo:l=b.MW.NONE,...u}=e,{setActiveLegendItem:c,activeLegendID:p,isHoveringLegendItem:m}=(0,d.t)(),h=!!p&&p!==r&&!m,{scalarValue:g,displayValue:S,description:C,comparisonRatio:_,isComparisonPositive:x,reportRoute:T,reportRouteParams:v}=y(t,a,l);return o?(0,n.jsx)(j.Skeleton,{}):(0,n.jsx)(I.Z,{name:null==s?void 0:s.name,tooltip:s.description,value:S,description:C,href:(0,f.nu)(T,v),isEmpty:!g,isHighlighted:p===r,accentColor:i,onMouseEnter:()=>c({id:r}),onFocus:()=>c({id:r}),onBlur:()=>c({id:null}),onMouseLeave:()=>c({id:null}),style:{opacity:h?.2:1},upliftLabel:l!==b.MW.NONE&&_?(0,n.jsx)(N.Z,{variant:x?"green":"orange",children:_}):void 0,...u})};j.Skeleton=()=>{let{colors:e}=(0,a.Fg)();return(0,n.jsx)(I.Z.Skeleton,{accentColor:e.Skeleton})};j.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"SunburstChartTile",props:{metric:{required:!0,tsType:{name:"DataMetric"},description:""},timePeriod:{required:!0,tsType:{name:"ReportTimePeriod"},description:""},compareTo:{required:!1,tsType:{name:"ReportCompareTo"},description:"",defaultValue:{value:"ReportCompareTo.NONE",computed:!0}}},composes:["Partial"]};let k=e=>{let{initialState:t,children:r}=e;return(0,n.jsx)(d.E,{initialState:t,children:r})};k.Chart=m,k.Tile=j,k.Label=P;let q=k;k.__docgenInfo={description:"",methods:[{name:"Chart",docblock:null,modifiers:["static"],params:[{name:"{\n    data,\n    isLoading,\n    centerValue,\n    borderWidth = 2,\n    // @ts-expect-error - Chart component doesn't like `null` but it is\n    // completely valid React code\n    tooltip = () => null,\n    ariaLabel,\n    activeLegendID: activeLegendIDProp,\n}: SunburstChartSunburstProps<T>",optional:!1,type:{name:"SunburstChartSunburstProps",elements:[{name:"T"}],raw:"SunburstChartSunburstProps<T>",alias:"SunburstChartSunburstProps"}}],returns:null},{name:"Tile",docblock:null,modifiers:["static"],params:[{name:"{\n    metric: { data, id, isLoading, metadata, color },\n    timePeriod,\n    compareTo = ReportCompareTo.NONE,\n    ...props\n}: Props",optional:!1,type:{name:"Props",alias:"Props"}}],returns:null},{name:"Label",docblock:null,modifiers:["static"],params:[{name:"{ metric: { id, data, isLoading, metadata, color }, timePeriod, compareTo }: Props",optional:!1,type:{name:"Props",alias:"Props"}}],returns:null}],displayName:"SunburstChart"}},"./src/shared/components/Charts/SunburstChart/context/SunburstChartContext.tsx":function(e,t,r){r.d(t,{E:function(){return a},t:function(){return i}});var n=r("../node_modules/react/jsx-runtime.js"),o=r("../node_modules/react/index.js");let[s,i]=(0,r("../node_modules/@mention-me/flamingo-ui/build/index.es.js").kr)({hookName:"useSunburstChartState",providerName:"SunburstChartProvider"}),a=e=>{let{children:t,initialState:r}=e,[i,a]=(0,o.useState)(null),[l,d]=(0,o.useState)(!0),u=(0,o.useCallback)(e=>{let{id:t,isLegendItem:r=!0}=e;a(()=>t),d(()=>r)},[a]),c=(0,o.useMemo)(()=>({...r,activeLegendID:i,isHoveringLegendItem:l,setActiveLegendItem:u}),[r,i,u,l]);return(0,n.jsx)(s,{value:c,children:t})};a.__docgenInfo={description:"",methods:[],displayName:"SunburstChartProvider"}},"./src/shared/components/Label/UpliftLabel.styled.tsx":function(e,t,r){r.d(t,{Z:function(){return s}});var n=r("../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=r("./src/shared/components/Label/Label.tsx");let s=(0,n.ZP)(o.Z).withConfig({displayName:"UpliftLabel.styled__UpliftLabel"})(["display:inline-flex;align-items:center;width:fit-content;height:20px !important;font-size:14px !important;line-height:15px !important;vertical-align:super !important;"])},"./src/shared/hooks/useTimePeriodTranslation/index.ts":function(e,t,r){r.d(t,{Z:()=>o});var n=r("../node_modules/react-i18next/dist/es/index.js");let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{t:r}=(0,n.$G)("reporting"),o=`${e.toLowerCase()}${t?"-short":""}`;return r(`periods.${o}`)}}}]);