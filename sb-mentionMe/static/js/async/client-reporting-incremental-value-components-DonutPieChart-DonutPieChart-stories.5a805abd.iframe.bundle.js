"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["3176"],{"../node_modules/@nivo/pie/dist/nivo-pie.es.js":function(e,t,n){n.d(t,{Y2:function(){return y}});var r=n("../node_modules/react/index.js"),a=n("../node_modules/@nivo/core/dist/nivo-core.es.js"),i=n("../node_modules/@nivo/arcs/dist/nivo-arcs.es.js"),o=n("../node_modules/@nivo/legends/dist/nivo-legends.es.js"),s=n("../node_modules/react/jsx-runtime.js"),l=n("../node_modules/d3-shape/src/pie.js"),d=n("../node_modules/@nivo/colors/dist/nivo-colors.es.js"),c=n("../node_modules/@nivo/tooltip/dist/nivo-tooltip.es.js");function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var v,g=function(e){var t=e.width,n=e.height,r=e.legends,a=e.data,i=e.toggleSerie;return(0,s.jsx)(s.Fragment,{children:r.map(function(e,r){var l;return(0,s.jsx)(o.$6,u({},e,{containerWidth:t,containerHeight:n,data:null!=(l=e.data)?l:a,toggleSerie:e.toggleSerie?i:void 0}),r)})})},h={id:"id",value:"value",sortByValue:!1,innerRadius:0,padAngle:0,cornerRadius:0,layers:["arcs","arcLinkLabels","arcLabels","legends"],startAngle:0,endAngle:360,fit:!0,activeInnerRadiusOffset:0,activeOuterRadiusOffset:0,borderWidth:0,borderColor:{from:"color",modifiers:[["darker",1]]},enableArcLabels:!0,arcLabel:"formattedValue",arcLabelsSkipAngle:0,arcLabelsRadiusOffset:.5,arcLabelsTextColor:{theme:"labels.text.fill"},enableArcLinkLabels:!0,arcLinkLabel:"id",arcLinkLabelsSkipAngle:0,arcLinkLabelsOffset:0,arcLinkLabelsDiagonalLength:16,arcLinkLabelsStraightLength:24,arcLinkLabelsThickness:1,arcLinkLabelsTextOffset:6,arcLinkLabelsTextColor:{theme:"labels.text.fill"},arcLinkLabelsColor:{theme:"axis.ticks.line.stroke"},colors:{scheme:"nivo"},defs:[],fill:[],isInteractive:!0,animate:!0,motionConfig:"gentle",transitionMode:"innerRadius",tooltip:function(e){var t=e.datum;return(0,s.jsx)(c._5,{id:t.id,value:t.formattedValue,enableChip:!0,color:t.color})},legends:[],role:"img",pixelRatio:"undefined"!=typeof window&&null!=(v=window.devicePixelRatio)?v:1},p=["points"],m=function(e){var t=e.data,n=e.id,i=void 0===n?h.id:n,o=e.value,s=void 0===o?h.value:o,l=e.valueFormat,c=e.colors,f=void 0===c?h.colors:c,v=(0,a.LR)(i),g=(0,a.LR)(s),p=(0,a.O_)(l),m=(0,d.U)(f,"id");return(0,r.useMemo)(function(){return t.map(function(e){var t,n=v(e),r=g(e),a={id:n,label:null!=(t=e.label)?t:n,hidden:!1,value:r,formattedValue:p(r),data:e};return u({},a,{color:m(a)})})},[t,v,g,p,m])},L=function(e){var t=e.data,n=e.startAngle,i=e.endAngle,o=e.innerRadius,s=e.outerRadius,d=e.padAngle,c=e.sortByValue,f=e.activeId,v=e.activeInnerRadiusOffset,g=e.activeOuterRadiusOffset,h=e.hiddenIds,p=e.forwardLegendData,m=(0,r.useMemo)(function(){var e=(0,l.Z)().value(function(e){return e.value}).startAngle((0,a.Ht)(n)).endAngle((0,a.Ht)(i)).padAngle((0,a.Ht)(d));return c||e.sortValues(null),e},[n,i,d,c]),L=(0,r.useMemo)(function(){return{dataWithArc:m(t.filter(function(e){return!h.includes(e.id)})).map(function(e){var t=Math.abs(e.endAngle-e.startAngle);return u({},e.data,{arc:{index:e.index,startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:f===e.data.id?o-v:o,outerRadius:f===e.data.id?s+g:s,thickness:s-o,padAngle:e.padAngle,angle:t,angleDeg:(0,a.vi)(t)}})}),legendData:t.map(function(e){return{id:e.id,label:e.label,color:e.color,hidden:h.includes(e.id),data:e}})}},[m,t,h,f,o,v,s,g]),b=L.legendData,A=(0,r.useRef)(p);return(0,r.useEffect)(function(){"function"==typeof A.current&&A.current(b)},[A,b]),L},b=function(e){var t=e.activeId,n=e.onActiveIdChange,a=e.defaultActiveId,i=void 0!==t,o=(0,r.useState)(i?null:void 0===a?null:a),s=o[0],l=o[1];return{activeId:i?t:s,setActiveId:(0,r.useCallback)(function(e){n&&n(e),i||l(e)},[i,n,l])}},A=function(e){var t=e.data,n=e.width,o=e.height,s=e.innerRadius,l=void 0===s?h.innerRadius:s,d=e.startAngle,c=void 0===d?h.startAngle:d,v=e.endAngle,g=void 0===v?h.endAngle:v,m=e.padAngle,A=void 0===m?h.padAngle:m,x=e.sortByValue,k=void 0===x?h.sortByValue:x,C=e.cornerRadius,R=void 0===C?h.cornerRadius:C,j=e.fit,y=void 0===j?h.fit:j,I=e.activeInnerRadiusOffset,O=void 0===I?h.activeInnerRadiusOffset:I,M=e.activeOuterRadiusOffset,w=void 0===M?h.activeOuterRadiusOffset:M,_=e.activeId,D=e.onActiveIdChange,S=e.defaultActiveId,B=e.forwardLegendData,W=b({activeId:_,onActiveIdChange:D,defaultActiveId:S}),T=W.activeId,P=W.setActiveId,Z=(0,r.useState)([]),G=Z[0],V=Z[1],E=(0,r.useMemo)(function(){var e,t=Math.min(n,o)/2,r=t*Math.min(l,1),a=n/2,s=o/2;if(y){var d=(0,i.CU)(a,s,t,c-90,g-90),u=d.points,v=f(d,p),h=Math.min(n/v.width,o/v.height),m={width:v.width*h,height:v.height*h};m.x=(n-m.width)/2,m.y=(o-m.height)/2,a=(a-v.x)/v.width*v.width*h+m.x,s=(s-v.y)/v.height*v.height*h+m.y,e={box:v,ratio:h,points:u},t*=h,r*=h}return{centerX:a,centerY:s,radius:t,innerRadius:r,debug:e}},[n,o,l,c,g,y]),H=L({data:t,startAngle:c,endAngle:g,innerRadius:E.innerRadius,outerRadius:E.radius,padAngle:A,sortByValue:k,activeId:T,activeInnerRadiusOffset:O,activeOuterRadiusOffset:w,hiddenIds:G,forwardLegendData:B}),Y=(0,r.useCallback)(function(e){V(function(t){return t.indexOf(e)>-1?t.filter(function(t){return t!==e}):[].concat(t,[e])})},[]);return u({arcGenerator:(0,i.aG)({cornerRadius:R,padAngle:(0,a.Ht)(A)}),activeId:T,setActiveId:P,toggleSerie:Y},H,E)},x=function(e){var t=e.dataWithArc,n=e.arcGenerator,a=e.centerX,i=e.centerY,o=e.radius,s=e.innerRadius;return(0,r.useMemo)(function(){return{dataWithArc:t,arcGenerator:n,centerX:a,centerY:i,radius:o,innerRadius:s}},[t,n,a,i,o,s])},k=function(e){var t=e.center,n=e.data,a=e.arcGenerator,o=e.borderWidth,l=e.borderColor,d=e.isInteractive,u=e.onClick,f=e.onMouseEnter,v=e.onMouseMove,g=e.onMouseLeave,h=e.setActiveId,p=e.tooltip,m=e.transitionMode,L=(0,c.lL)(),b=L.showTooltipFromEvent,A=L.hideTooltip,x=(0,r.useMemo)(function(){if(d)return function(e,t){null==u||u(e,t)}},[d,u]),k=(0,r.useMemo)(function(){if(d)return function(e,t){b((0,r.createElement)(p,{datum:e}),t),h(e.id),null==f||f(e,t)}},[d,b,h,f,p]),C=(0,r.useMemo)(function(){if(d)return function(e,t){b((0,r.createElement)(p,{datum:e}),t),null==v||v(e,t)}},[d,b,v,p]),R=(0,r.useMemo)(function(){if(d)return function(e,t){A(),h(null),null==g||g(e,t)}},[d,A,h,g]);return(0,s.jsx)(i.Bs,{center:t,data:n,arcGenerator:a,borderWidth:o,borderColor:l,transitionMode:m,onClick:x,onMouseEnter:k,onMouseMove:C,onMouseLeave:R})},C=["isInteractive","animate","motionConfig","theme","renderWrapper"],R=function(e){var t=e.data,n=e.id,o=void 0===n?h.id:n,l=e.value,d=void 0===l?h.value:l,c=e.valueFormat,u=e.sortByValue,f=void 0===u?h.sortByValue:u,v=e.layers,p=void 0===v?h.layers:v,L=e.startAngle,b=void 0===L?h.startAngle:L,C=e.endAngle,R=void 0===C?h.endAngle:C,j=e.padAngle,y=void 0===j?h.padAngle:j,I=e.fit,O=void 0===I?h.fit:I,M=e.innerRadius,w=void 0===M?h.innerRadius:M,_=e.cornerRadius,D=void 0===_?h.cornerRadius:_,S=e.activeInnerRadiusOffset,B=void 0===S?h.activeInnerRadiusOffset:S,W=e.activeOuterRadiusOffset,T=void 0===W?h.activeOuterRadiusOffset:W,P=e.width,Z=e.height,G=e.margin,V=e.colors,E=void 0===V?h.colors:V,H=e.borderWidth,Y=void 0===H?h.borderWidth:H,F=e.borderColor,X=void 0===F?h.borderColor:F,q=e.enableArcLabels,N=void 0===q?h.enableArcLabels:q,U=e.arcLabel,$=void 0===U?h.arcLabel:U,z=e.arcLabelsSkipAngle,J=void 0===z?h.arcLabelsSkipAngle:z,K=e.arcLabelsTextColor,Q=void 0===K?h.arcLabelsTextColor:K,ee=e.arcLabelsRadiusOffset,et=void 0===ee?h.arcLabelsRadiusOffset:ee,en=e.arcLabelsComponent,er=e.enableArcLinkLabels,ea=void 0===er?h.enableArcLinkLabels:er,ei=e.arcLinkLabel,eo=void 0===ei?h.arcLinkLabel:ei,es=e.arcLinkLabelsSkipAngle,el=void 0===es?h.arcLinkLabelsSkipAngle:es,ed=e.arcLinkLabelsOffset,ec=void 0===ed?h.arcLinkLabelsOffset:ed,eu=e.arcLinkLabelsDiagonalLength,ef=void 0===eu?h.arcLinkLabelsDiagonalLength:eu,ev=e.arcLinkLabelsStraightLength,eg=void 0===ev?h.arcLinkLabelsStraightLength:ev,eh=e.arcLinkLabelsThickness,ep=void 0===eh?h.arcLinkLabelsThickness:eh,em=e.arcLinkLabelsTextOffset,eL=void 0===em?h.arcLinkLabelsTextOffset:em,eb=e.arcLinkLabelsTextColor,eA=void 0===eb?h.arcLinkLabelsTextColor:eb,ex=e.arcLinkLabelsColor,ek=void 0===ex?h.arcLinkLabelsColor:ex,eC=e.arcLinkLabelComponent,eR=e.defs,ej=void 0===eR?h.defs:eR,ey=e.fill,eI=void 0===ey?h.fill:ey,eO=e.isInteractive,eM=void 0===eO?h.isInteractive:eO,ew=e.onClick,e_=e.onMouseEnter,eD=e.onMouseMove,eS=e.onMouseLeave,eB=e.tooltip,eW=void 0===eB?h.tooltip:eB,eT=e.activeId,eP=e.onActiveIdChange,eZ=e.defaultActiveId,eG=e.transitionMode,eV=void 0===eG?h.transitionMode:eG,eE=e.legends,eH=void 0===eE?h.legends:eE,eY=e.forwardLegendData,eF=e.role,eX=void 0===eF?h.role:eF,eq=(0,a.Bs)(P,Z,G),eN=eq.outerWidth,eU=eq.outerHeight,e$=eq.margin,ez=eq.innerWidth,eJ=eq.innerHeight,eK=A({data:m({data:t,id:o,value:d,valueFormat:c,colors:E}),width:ez,height:eJ,fit:O,innerRadius:w,startAngle:b,endAngle:R,padAngle:y,sortByValue:f,cornerRadius:D,activeInnerRadiusOffset:B,activeOuterRadiusOffset:T,activeId:eT,onActiveIdChange:eP,defaultActiveId:eZ,forwardLegendData:eY}),eQ=eK.dataWithArc,e0=eK.legendData,e1=eK.arcGenerator,e2=eK.centerX,e3=eK.centerY,e4=eK.radius,e6=eK.innerRadius,e8=eK.setActiveId,e5=eK.toggleSerie,e9=(0,a.yU)(ej,eQ,eI),e7={arcs:null,arcLinkLabels:null,arcLabels:null,legends:null};p.includes("arcs")&&(e7.arcs=(0,s.jsx)(k,{center:[e2,e3],data:eQ,arcGenerator:e1,borderWidth:Y,borderColor:X,isInteractive:eM,onClick:ew,onMouseEnter:e_,onMouseMove:eD,onMouseLeave:eS,setActiveId:e8,tooltip:eW,transitionMode:eV},"arcs")),ea&&p.includes("arcLinkLabels")&&(e7.arcLinkLabels=(0,s.jsx)(i._D,{center:[e2,e3],data:eQ,label:eo,skipAngle:el,offset:ec,diagonalLength:ef,straightLength:eg,strokeWidth:ep,textOffset:eL,textColor:eA,linkColor:ek,component:eC},"arcLinkLabels")),N&&p.includes("arcLabels")&&(e7.arcLabels=(0,s.jsx)(i.Xr,{center:[e2,e3],data:eQ,label:$,radiusOffset:et,skipAngle:J,textColor:Q,transitionMode:eV,component:en},"arcLabels")),eH.length>0&&p.includes("legends")&&(e7.legends=(0,s.jsx)(g,{width:ez,height:eJ,data:e0,legends:eH,toggleSerie:e5},"legends"));var te=x({dataWithArc:eQ,arcGenerator:e1,centerX:e2,centerY:e3,radius:e4,innerRadius:e6});return(0,s.jsx)(a.tM,{width:eN,height:eU,margin:e$,defs:e9,role:eX,children:p.map(function(e,t){return void 0!==e7[e]?e7[e]:"function"==typeof e?(0,s.jsx)(r.Fragment,{children:(0,r.createElement)(e,te)},t):null})})},j=function(e){var t=e.isInteractive,n=void 0===t?h.isInteractive:t,r=e.animate,i=void 0===r?h.animate:r,o=e.motionConfig,l=void 0===o?h.motionConfig:o,d=e.theme,c=e.renderWrapper,v=f(e,C);return(0,s.jsx)(a.W2,{animate:i,isInteractive:n,motionConfig:l,renderWrapper:c,theme:d,children:(0,s.jsx)(R,u({isInteractive:n},v))})},y=function(e){return(0,s.jsx)(a.d,{children:function(t){var n=t.width,r=t.height;return(0,s.jsx)(j,u({width:n,height:r},e))}})}},"./src/client/reporting/incremental-value/components/DonutPieChart/DonutPieChart.stories.tsx":function(e,t,n){n.r(t),n.d(t,{Default:function(){return o},Skeleton:function(){return s},default:function(){return i}});var r=n("../node_modules/react/jsx-runtime.js"),a=n("./src/client/reporting/incremental-value/components/DonutPieChart/DonutPieChart.tsx");let i={component:a.Z,title:"Charts / DonutPieChart",decorators:[e=>(0,r.jsx)("div",{style:{width:"100px",height:"100px"},children:e()})]},o=e=>(0,r.jsx)(a.Z,{...e});o.args={data:{high:.68,low:.25,control:.07}};let s=()=>(0,r.jsx)(a.Z.Skeleton,{});o.parameters={...o.parameters,docs:{...o.parameters?.docs,source:{originalSource:"args => <DonutPieChart {...args} />",...o.parameters?.docs?.source}}},s.parameters={...s.parameters,docs:{...s.parameters?.docs,source:{originalSource:"() => <DonutPieChart.Skeleton />",...s.parameters?.docs?.source}}}},"./src/client/reporting/incremental-value/components/DonutPieChart/DonutPieChart.tsx":function(e,t,n){n.d(t,{Z:()=>g});var r=n("../node_modules/react/jsx-runtime.js"),a=n("../node_modules/@nivo/pie/dist/nivo-pie.es.js"),i=n("../node_modules/react-i18next/dist/es/index.js"),o=n("../node_modules/styled-components/dist/styled-components.browser.esm.js"),s=n("./src/shared/components/Charts/index.ts"),l=n("../node_modules/@react-spring/web/dist/react-spring_web.modern.mjs"),d=n("./src/shared/utilities/index.ts"),c=n("./src/shared/@types/graphql.ts");let u=e=>{let{label:t,style:n}=e;return(0,r.jsx)(l.q.g,{transform:n.transform,style:{pointerEvents:"none"},children:(0,r.jsx)("text",{textAnchor:"middle",dominantBaseline:"central",fill:n.textColor,style:{fontSize:12,fontWeight:800},children:(0,d.qp)(t,{type:c.mV.Percentage})})})};u.__docgenInfo={description:"",methods:[],displayName:"CustomArcLabelsComponent"};let f=[{id:"Low Propensity Group",value:20,colour:"#EBEBEB"},{id:"High Propensity Group",value:80,colour:"#D9D9D9"}],v=e=>{let{data:t}=e,{t:n}=(0,i.$G)("reporting",{keyPrefix:"incremental-value.segment-explainer-modal"}),{colors:l}=(0,o.Fg)();if(!t)return(0,r.jsx)(v.Skeleton,{});let d=[{id:n("chart-card.label.high-title","High Propensity Group"),value:t.high||0,colour:l.MidnightBlueBase},{id:n("chart-card.label.low-title","Low Propensity Group"),value:t.low||0,colour:l.CyanBase},...t.control?[{id:n("chart-card.label.control-title","Control"),value:t.control||0,colour:l.MidnightBlue40Light}]:[]];return(0,r.jsx)(s.hC,{style:{height:"200px",width:"200px"},children:(0,r.jsx)(a.Y2,{data:d,innerRadius:.7,colors:e=>e.data.colour,cornerRadius:5,margin:{top:30,right:40,bottom:20,left:30},enableArcLinkLabels:!1,arcLabelsRadiusOffset:1.8,arcLabelsTextColor:e=>e.data.colour,padAngle:1.4,arcLabelsComponent:e=>{let{datum:t,label:n,style:a}=e;return(0,r.jsx)(u,{datum:t,label:n,style:a})}})})};v.Skeleton=()=>(0,r.jsx)(s.hC,{style:{height:"200px",width:"200px"},children:(0,r.jsx)(a.Y2,{data:f,innerRadius:.7,colors:e=>e.data.colour,cornerRadius:5,margin:{top:30,right:40,bottom:20,left:30},enableArcLinkLabels:!1,arcLabelsRadiusOffset:1.8,arcLabelsTextColor:e=>e.data.colour,padAngle:1.4,enableArcLabels:!1})});let g=v;v.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"DonutPieChart",props:{data:{required:!1,tsType:{name:"Data"},description:""}}}},"../node_modules/d3-shape/src/pie.js":function(e,t,n){n.d(t,{Z:()=>l});var r=n("../node_modules/d3-shape/src/array.js"),a=n("../node_modules/d3-shape/src/constant.js");function i(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function o(e){return e}var s=n("../node_modules/d3-shape/src/math.js");function l(){var e=o,t=i,n=null,l=(0,a.Z)(0),d=(0,a.Z)(s.BZ),c=(0,a.Z)(0);function u(a){var i,o,u,f,v,g=(a=(0,r.Z)(a)).length,h=0,p=Array(g),m=Array(g),L=+l.apply(this,arguments),b=Math.min(s.BZ,Math.max(-s.BZ,d.apply(this,arguments)-L)),A=Math.min(Math.abs(b)/g,c.apply(this,arguments)),x=A*(b<0?-1:1);for(i=0;i<g;++i)(v=m[p[i]=i]=+e(a[i],i,a))>0&&(h+=v);for(null!=t?p.sort(function(e,n){return t(m[e],m[n])}):null!=n&&p.sort(function(e,t){return n(a[e],a[t])}),i=0,u=h?(b-g*x)/h:0;i<g;++i,L=f)f=L+((v=m[o=p[i]])>0?v*u:0)+x,m[o]={data:a[o],index:i,value:v,startAngle:L,endAngle:f,padAngle:A};return m}return u.value=function(t){return arguments.length?(e="function"==typeof t?t:(0,a.Z)(+t),u):e},u.sortValues=function(e){return arguments.length?(t=e,n=null,u):t},u.sort=function(e){return arguments.length?(n=e,t=null,u):n},u.startAngle=function(e){return arguments.length?(l="function"==typeof e?e:(0,a.Z)(+e),u):l},u.endAngle=function(e){return arguments.length?(d="function"==typeof e?e:(0,a.Z)(+e),u):d},u.padAngle=function(e){return arguments.length?(c="function"==typeof e?e:(0,a.Z)(+e),u):c},u}}}]);