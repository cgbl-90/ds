"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["9"],{"./src/consumer/journey/CornerPeel.stories.tsx":function(e,t,r){r.r(t),r.d(t,{default:()=>O,Default:()=>v});var n=r("../node_modules/react/jsx-runtime.js"),o=r("./src/shared/constants/filterOfferTypes.ts"),s=r("../node_modules/react/index.js"),i=r("./src/shared/hooks/useIntersectionObserver/index.ts"),a=r("./src/consumer/journey/components/CloseButton.tsx"),c=r("./src/consumer/journey/components/ContentItem.tsx"),l=r("./src/consumer/journey/types.ts"),d=r("./src/consumer/journey/utilities/events.ts"),u=r("./src/shared/utilities/error.ts");let m=(e,t)=>(e.style.fontSize="",e.style.visibility="hidden","inline"===t.display)?(e.style.display="inline-block",{isInline:!0,fontSize:parseFloat(t.fontSize)}):{isInline:!1,fontSize:parseFloat(t.fontSize)},E=(e,t)=>{t&&(e.style.display="inline"),e.style.visibility="visible"},p=e=>{let t=e.getPropertyValue("--min-font-size"),r=Math.max(parseInt(t,10),1),n=t.split(/\d+/)[1]||"px",o=Math.max(parseInt(e.getPropertyValue("--max-lines"),10),1),s=Math.max(parseInt(e.getPropertyValue("--step"),10),1)||1;if("px"!==n)throw Error(`Unexpected font size unit: "${n}". Expected px`);return{minFontSize:r,fontSizeUnit:n,maxLines:o,step:s}},f=e=>{let t="normal"===e.lineHeight?parseFloat(e.fontSize):parseFloat(e.lineHeight),r=parseFloat(e.height);if(!t)throw Error(`Unexpected line height: ${e.lineHeight}`);if(!r)throw Error(`Unexpected height: ${e.height}`);return Math.ceil(r/t)},_=e=>{try{let t=getComputedStyle(e),{minFontSize:r,fontSizeUnit:n,maxLines:o,step:s}=p(t);if(r&&n&&o){let i=m(e,t),{isInline:a}=i,{fontSize:c}=i;for(;c>r&&f(t)>o;)c=Math.max(c-s,r),e.style.fontSize=`${c}${n}`;E(e,a)}}catch(e){(0,u.eK)("resizeText",e)}},R=e=>{let t=getComputedStyle(e).getPropertyValue("--elements-to-resize-selector");t&&Array.from(document.querySelectorAll(t)).filter(e=>!!e.offsetHeight).forEach(e=>_(e))},h=e=>{if(e===o.Z.CHOICE_OF_OFFER)return l.zi;throw Error(`Unknown offer type for corner peel: ${e}`)},y=e=>{let{situation:t,offer:r}=e,o=(0,s.useRef)(null),l=(0,s.useCallback)(e=>{let[t]=e;t.isIntersecting&&R(document.querySelector(".mm-body"))},[]);(0,i.Z)({threshold:0,callback:l,ref:o});let u=h(r.type);return(0,n.jsxs)("div",{ref:o,className:`mm-frame mm-frame-overlay mm-frame-overlay-react mm-referrer-situation-${t}`,children:[(0,n.jsx)(a.Z,{className:"mm-frame-overlay-close-vector",onClick:d.tc}),(0,n.jsxs)("div",{className:"mm-overlay-creative mm-overlay-creative-middle",children:[(0,n.jsx)("div",{className:"mm-explainer-wrapper",children:(0,n.jsxs)("div",{className:"mm-explainer",children:[(0,n.jsx)("h1",{children:(0,n.jsx)(c.Z,{tag:u.CORNERPEEL_HEADER,hasNoWrapper:!0})}),(0,n.jsx)("p",{children:(0,n.jsx)(c.Z,{tag:u.CORNERPEEL_DESCRIPTION,hasNoWrapper:!0})})]})}),(0,n.jsx)("div",{className:"mm-call-to-action",children:(0,n.jsx)("button",{type:"button",className:"btn btn-custom",onClick:d.h7,children:(0,n.jsx)(c.Z,{tag:u.CORNERPEEL_CTA,hasNoWrapper:!0})})})]})]})};y.__docgenInfo={description:"",methods:[],displayName:"CornerPeel",props:{offer:{required:!0,tsType:{name:"Pick",elements:[{name:'intersection["offer"]',raw:'JourneyData["offer"]'},{name:"literal",value:'"type"'}],raw:'Pick<JourneyData["offer"], "type">'},description:""}}};var C=r("./src/consumer/journey/mockData.tsx");r("./src/consumer/journey/App.stories.less?d569");let O={component:y,title:"Customer Journey / Corner Peel"},v=(e=>{let t=(0,C.LT)(y);return(0,n.jsx)("div",{className:"mm-overlay-fixed mm-body",children:(0,n.jsx)("div",{id:"mmRoot",children:(0,n.jsx)(t,{...e})})})}).bind({});v.args={situation:"postpurchase",offer:{type:o.Z.CHOICE_OF_OFFER}},v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:'(args: Props) => {\n  const WrappedCornerPeel = withMock(CornerPeel);\n  return <div className="mm-overlay-fixed mm-body">\n            <div id="mmRoot">\n                <WrappedCornerPeel {...args} />\n            </div>\n        </div>;\n}',...v.parameters?.docs?.source}}}},"./src/consumer/journey/components/CloseButton.tsx":function(e,t,r){r.d(t,{Z:()=>l});var n=r("../node_modules/react/jsx-runtime.js"),o=r("../node_modules/classnames/index.js"),s=r.n(o);r("../node_modules/react/index.js");let i=e=>(0,n.jsxs)("svg",{id:"close_svg__x",width:21,height:21,viewBox:"0 0 21 21",...e,children:[(0,n.jsx)("defs",{children:(0,n.jsx)("style",{children:".close_svg__cls-1{fill:#fff;fill-rule:evenodd}"})}),(0,n.jsx)("path",{id:"close_svg__Rectangle_4_copy_2",d:"m939.626 177.009 20.365 20.365-.617.617-20.365-20.365z",transform:"translate(-939 -177)"}),(0,n.jsx)("path",{id:"close_svg__Rectangle_4_copy_3",d:"m959.374 177.009.617.617-20.365 20.365-.617-.617z",transform:"translate(-939 -177)"})]});var a=r("./src/consumer/journey/utilities/events.ts");let c=e=>{let{className:t,onClick:r=a.Mr}=e;return(0,n.jsx)("button",{type:"button","aria-label":"Close",className:s()("mm-close-icon",t),onClick:r,children:(0,n.jsx)(i,{})})},l=c;c.__docgenInfo={description:"",methods:[],displayName:"CloseButton",props:{className:{required:!1,tsType:{name:"string"},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:"",defaultValue:{value:'() => {\n    emitEvent({\n        choice: "clickAction",\n        clickType: "closeClick",\n    });\n}',computed:!1}}}}},"./src/consumer/journey/mockData.tsx":function(e,t,r){r.d(t,{LT:function(){return l},Tn:function(){return a}});var n=r("./src/shared/constants/filterOfferTypes.ts"),o=r("./src/shared/constants/preview.ts"),s=r("./src/consumer/journey/hooks/JourneyContext.tsx"),i=r("./src/consumer/journey/types.ts");let a=[{id:"subOffer-1",isReferral:!0,contentItems:{[i.jy.CHOICE_OF_OFFER_HEADER]:{id:"1",content:"Referrer header"},[i.jy.CHOICE_OF_OFFER_CTA]:{id:"2",content:"Referrer button"}},url:"/referral"},{id:"subOffer-2",isIfa:!0,contentItems:{[i.mu.CHOICE_OF_OFFER_HEADER]:{id:"3",content:"IFA header"},[i.mu.CHOICE_OF_OFFER_CTA]:{id:"4",content:"IFA button"}},url:"/ifa"},{id:"subOffer-3",isNps:!0,contentItems:{[i.qo.CHOICE_OF_OFFER_HEADER]:{id:"5",content:"NPS header"},[i.qo.CHOICE_OF_OFFER_CTA]:{id:"6",content:"NPS button"}},url:"/nps"}],c={offer:{contentItems:{[i.zi.HEADLINE]:{id:"7",content:"Headline"},[i.zi.ORDER_COMPLETE]:{id:"8",content:"Order Complete!"},[i.zi.RESEGMENTATION_COMPLETE]:{id:"6",content:"Resegmented!"},[i.zi.ORDER_COMPLETE_ANONYMOUS]:{id:"9",content:"Order Complete!"},[i.zi.INFORMATION_NOTICE]:{id:"10",content:'Notice <a href="https://example.com/information_notice">click here</a>'},[i.zi.OFFER_HEADLINE]:{id:"11",content:"Link Headline"},[i.I.TERMS_AND_CONDITIONS]:{id:"12",content:"Terms and conditions"},[i.I.FULLFRAME_TERMS]:{id:"13",content:"Fullframe terms"},[i.I.POWERED_BY]:{id:"14",content:"Powered by Mention Me"},[i.zi.HEADLINE_REGISTER]:{id:"17",content:"Headline Register"},[i.zi.SUBHEADER_REGISTER]:{id:"18",content:"Subheader Register"},[i.zi.FIRSTNAME_PLACEHOLDER]:{id:"19",content:"Firstname placeholder"},[i.zi.SURNAME_PLACEHOLDER]:{id:"20",content:"Surname placeholder"},[i.zi.EMAIL_PLACEHOLDER]:{id:"21",content:"Email Placeholder"},[i.zi.FIRSTNAME_LABEL]:{id:"22",content:"Firstname Label*"},[i.zi.SURNAME_LABEL]:{id:"23",content:"Surname Label*"},[i.zi.EMAIL_LABEL]:{id:"24",content:"Email Label"},[i.zi.FIRSTNAME_ERROR]:{id:"25",content:"Firstname Error"},[i.zi.SURNAME_ERROR]:{id:"26",content:"Surname Error"},[i.zi.EMAIL_ERROR]:{id:"27",content:"Email Error"},[i.zi.REGISTER_CTA]:{id:"28",content:"Register Button"},[i.zi.REQUIRED_FIELD]:{id:"29",content:"* Required field"},[i.zi.CANCEL_REGISTER]:{id:"30",content:"Go back"},[i.zi.CORNERPEEL_HEADER]:{id:"31",content:"Header"},[i.zi.CORNERPEEL_DESCRIPTION]:{id:"32",content:"Description"},[i.zi.CORNERPEEL_CTA]:{id:"33",content:"CTA"}},subOffers:a,quickLinkCode:"",id:"123",type:n.Z.CHOICE_OF_OFFER},layout:"modal",situation:"postpurchase",showOrderComplete:!0,includePrivacyNotices:!0,includeMentionMeLogoInFlow:!0,preview:{mode:o.i4.VIEW},flowId:"",user:{email:"a@a.com",firstname:"test",surname:"test",saved:!0}},l=e=>(window.MentionMe={JourneyData:c},(0,s.o2)(e))},"./src/shared/hooks/useIntersectionObserver/index.ts":function(e,t,r){r.d(t,{Z:()=>o});var n=r("../node_modules/react/index.js");let o=e=>{let{root:t=null,rootMargin:r="0px",threshold:o=0,callback:s,isActive:i=!0,ref:a}=e,c=(0,n.useRef)();return(0,n.useEffect)(()=>{if(!!window.IntersectionObserver)return c.current=new window.IntersectionObserver(s,{root:t,rootMargin:r,threshold:o}),()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.disconnect()}},[c,t,r,o,s]),(0,n.useEffect)(()=>{var e,t;if(!window.IntersectionObserver)return;i&&a.current?null===(e=c.current)||void 0===e||e.observe(a.current):null===(t=c.current)||void 0===t||t.unobserve(a.current);let{current:r}=a;return()=>{var e;null===(e=c.current)||void 0===e||e.unobserve(r)}},[i,a]),[c]}}}]);