"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["6564"],{"./src/client/reporting/utilities/inferGroupByFromTimePeriod.ts":function(e,i,a){a.d(i,{Z:()=>s});var n=a("./src/shared/@types/reporting.ts"),t=a("../node_modules/moment/moment.js"),r=a.n(t);let d=(e,i)=>{let a=r()(e,"X",!0),t=r()(i,"X",!0);if(!a.isValid()||!t.isValid())return n.Cc.DAY;let d=t.diff(a,"day");switch(!0){case d>182:return n.Cc.MONTH;case d>62:return n.Cc.WEEK;default:return n.Cc.DAY}},s=(e,i,a)=>{if(e===n.Iq.CUSTOM&&i&&a)return d(i,a);switch(e){case n.Iq.LAST_ALL_TIME:case n.Iq.LAST_12_MONTHS:case n.Iq.LAST_6_MONTHS:case n.Iq.LAST_3_MONTHS:case n.Iq.LAST_12_WHOLE_MONTHS:case n.Iq.LAST_6_WHOLE_MONTHS:case n.Iq.LAST_3_WHOLE_MONTHS:return n.Cc.MONTH;case n.Iq.LAST_60_DAYS:return n.Cc.WEEK;case n.Iq.LAST_30_DAYS:case n.Iq.LAST_7_DAYS:default:return n.Cc.DAY}}},"./src/shared/components/Charts/LineChart/index.ts":function(e,i,a){a.d(i,{Z:function(){return n.Z}});var n=a("./src/shared/components/Charts/LineChart/LineChart.tsx");a("./src/shared/components/Charts/LineChart/hooks/useLineChartConfig/useLineChartConfig.tsx")},"./src/shared/components/PerformanceTileCard/PerformanceTileCard.tsx":function(e,i,a){a.d(i,{Z:()=>P});var n=a("../node_modules/react/jsx-runtime.js"),t=a("../node_modules/react/index.js"),r=a("../node_modules/@heroicons/react/24/solid/esm/InformationCircleIcon.js"),d=a("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),s=a("../node_modules/react-i18next/dist/es/index.js"),l=a("./src/client/reporting/utilities/inferGroupByFromTimePeriod.ts"),o=a("./src/shared/assets/icon-academic-cap.svg"),m=a("./src/shared/components/Charts/LineChart/index.ts"),c=a("./src/shared/hooks/useMetricValuesOverTime/useMetricValuesOverTime.ts"),u=a("./src/shared/@types/reporting.ts"),p=a("./src/shared/components/UpliftLabel/index.ts"),h=a("./src/shared/hooks/useTimePeriodTranslation/index.ts"),k=a("../node_modules/@apollo/client/react/hooks/useQuery.js"),v=a("./src/shared/hooks/index.ts"),N=a("./src/shared/utilities/index.ts");let y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchMetricAverageValues"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"merchantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"metrics"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MetricEnum"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reportParameters"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportParametersInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"report_averageValues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"merchantId"},value:{kind:"Variable",name:{kind:"Name",value:"merchantId"}}},{kind:"Argument",name:{kind:"Name",value:"metrics"},value:{kind:"Variable",name:{kind:"Name",value:"metrics"}}},{kind:"Argument",name:{kind:"Name",value:"reportParameters"},value:{kind:"Variable",name:{kind:"Name",value:"reportParameters"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"comparisonValue"}},{kind:"Field",name:{kind:"Name",value:"metadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"metric"}},{kind:"Field",name:{kind:"Name",value:"drillDownUrl"}},{kind:"Field",name:{kind:"Name",value:"currencySymbol"}}]}}]}}]}}]},T=function(e,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{merchantId:r}=(0,v.rc)(),{loading:d,data:s,error:l}=(0,k.aM)(y,{variables:{merchantId:r,metrics:e,reportParameters:i},skip:n});return(0,t.useMemo)(()=>({isLoading:d,isError:!!l,metrics:((null==s?void 0:s.report_averageValues)||[]).map((e,i)=>(0,N.cH)(e,a[i]))||[]}),[null==s?void 0:s.report_averageValues,l,d,a])};var f=a("./src/shared/hooks/useMetricValues/useMetricValues.ts"),g=a("../node_modules/styled-components/dist/styled-components.browser.esm.js");let _=g.ZP.div.withConfig({displayName:"PerformanceTileValue.styled__Value"})(["margin-top:",";"],(0,d.W0)(2)),S=(0,g.ZP)(d.XS).withConfig({displayName:"PerformanceTileValue.styled__TimePeriod"})(["color:",";margin-bottom:",";"],(0,d.Ys)("Navy40"),(0,d.W0)(1)),x=(0,g.ZP)(d.L).withConfig({displayName:"PerformanceTileValue.styled__ValueText"})(["font-size:48px;font-weight:500;line-height:64px;"]),b=(0,g.ZP)(d.H5).withConfig({displayName:"PerformanceTileValue.styled__ValueTitle"})(["min-height:",";"],(0,d.W0)(2)),C=u.MW.LAST_PERIOD,L=e=>{let{metrics:i,timePeriod:a,seriesNames:r,isAverageValue:d}=e,{t:l}=(0,s.$G)("shared",{keyPrefix:"performance-tile"}),{isLoading:o,isError:m,metrics:c}=(0,f.Z)(i,{timePeriod:a,compareTo:C},r,!!d),{isLoading:k,isError:v,metrics:N}=T(i,{timePeriod:a,compareTo:u.MW.LAST_PERIOD,groupBy:u.Cc.MONTH},r,!d),y=(0,h.Z)(a),g=i.length>1,j=a===u.Iq.LAST_ALL_TIME,w=a===u.Iq.CALENDAR_MONTH,I=(0,t.useMemo)(()=>d?N:c,[N,c,d]),M=()=>{if(w)return l("last-month","For the most recent month");if(d)return j?l("time-period-average-all-time","Monthly average {{timePeriod}}",{timePeriod:y.toLowerCase()}):l("time-period-average","Monthly average over the {{timePeriod}}",{timePeriod:y.toLowerCase()});return j?y:l("time-period","Over the {{timePeriod}}",{timePeriod:y.toLowerCase()})};return o||k||m||v?(0,n.jsx)(L.Skeleton,{}):(0,n.jsx)(n.Fragment,{children:I.map(e=>{let{id:i,displayValue:t,name:r,comparisonRatio:d,displayComparisonValue:s}=e;return(0,n.jsxs)(_,{children:[g&&(0,n.jsx)(b,{children:r}),(0,n.jsx)(x,{"data-auto-class":"graph-tile-card-value",children:t}),a&&(0,n.jsx)(S,{children:M()}),!j&&!g&&void 0!==d&&(0,n.jsx)(p.Z,{comparisonRatio:d,previousValue:s,timePeriod:a,compareTo:C})]},i)})})};L.Skeleton=()=>(0,n.jsxs)(_,{children:[(0,n.jsx)(x,{children:(0,n.jsx)(d.Od,{width:115})}),(0,n.jsx)(d.Od,{width:140,height:20}),(0,n.jsx)("br",{}),(0,n.jsx)(d.Od,{width:200,height:16})]});L.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"PerformanceTileValue"};let j=g.ZP.div.withConfig({displayName:"PerformanceTileCard.styled__Container"})(["display:grid;grid-template-columns:1fr 2fr;gap:",";> div{position:relative;}"],(0,d.W0)(4)),w=(0,g.ZP)(d.S).withConfig({displayName:"PerformanceTileCard.styled__Values"})(["margin-top:",";"],(0,d.W0)(4)),I=(0,g.ZP)(d.H4).withConfig({displayName:"PerformanceTileCard.styled__Title"})(["display:grid;gap:",";grid-template-columns:1fr 20px;"],(0,d.W0)(1)),M=g.ZP.div.withConfig({displayName:"PerformanceTileCard.styled__Explainer"})(["position:absolute;bottom:0;padding:",";background:linear-gradient( 97deg,"," 0%,"," 67%,"," 100% );width:100%;display:flex;flex-direction:column;gap:",";border:1px solid ",";border-radius:4px;"],(0,d.W0)(1),(0,d.Ys)("Cornflower10"),(0,d.Ys)("White"),(0,d.Ys)("Cornflower10"),(0,d.W0)(1),(0,d.Ys)("Cornflower20")),V=(0,g.ZP)(d.S).withConfig({displayName:"PerformanceTileCard.styled__ExplainerTitle"})(["display:flex;justify-content:space-between;font-weight:700;cursor:pointer;width:100%;"]),O=e=>{var i,a;let{title:p,description:h,metrics:k,detailMetrics:v,timePeriod:N,tooltip:y,variant:T,seriesNames:f,compareTo:g,lineChartConfig:_,isAverageValue:S,isYearOnYear:x,...b}=e,{t:C}=(0,s.$G)("shared",{keyPrefix:"performance-tile"}),[P,A]=(0,t.useState)(!1),{isLoading:q,isError:E,series:F}=(0,c.Z)(v||k,{timePeriod:N,groupBy:(0,l.Z)(N),compareTo:g,yearOnYear:x},f),D=k,Z=f;return((null==_?void 0:null===(i=_.yScale)||void 0===i?void 0:i.type)==="linear"&&(null==_?void 0:null===(a=_.yScale)||void 0===a?void 0:a.stacked)&&(D=k.toReversed(),Z=null==f?void 0:f.toReversed()),q||E)?(0,n.jsx)(O.Skeleton,{}):(0,n.jsx)(d.Zb,{variant:"shadow",...b,children:(0,n.jsxs)(j,{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(I,{"data-auto-class":"performance-tile-card-name",children:[(0,n.jsx)("span",{children:p}),y&&(0,n.jsx)(d.u,{tooltip:y,children:(0,n.jsx)(r.Z,{width:20})})]}),"chart-only"!==T&&(0,n.jsxs)(w,{as:"div",children:[(0,n.jsx)(L,{metrics:D,timePeriod:N,seriesNames:Z,isAverageValue:S}),"last-month"===T&&(0,n.jsx)(L,{metrics:k,timePeriod:u.Iq.CALENDAR_MONTH,seriesNames:f,isAverageValue:S})]}),(0,n.jsxs)(M,{children:[(0,n.jsxs)(V,{role:"button",onClick:()=>A(e=>!e),children:[(0,n.jsx)("span",{children:C("explainer-title","What does this tell me?")}),(0,n.jsx)(o.Z,{width:18,height:18})]}),P&&(0,n.jsx)(d.XS,{children:h})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(m.Z,{wrapperStyles:{height:500},series:F,isLoading:q,..._})})]})})};O.Skeleton=()=>(0,n.jsx)(d.Zb,{variant:"shadow",children:(0,n.jsxs)(j,{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)(d.H4,{children:[(0,n.jsx)(d.Od,{width:400,height:20}),(0,n.jsx)("br",{}),(0,n.jsx)(d.Od,{width:200,height:20})]}),(0,n.jsx)(L.Skeleton,{})]}),(0,n.jsx)("div",{children:(0,n.jsx)(m.Z.Skeleton,{wrapperStyles:{height:500}})})]})});let P=O;O.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"PerformanceTileCard",props:{title:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The name of the metric the graph tile is presenting"},description:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The description to show on the What does this tell me tooltip."},metrics:{required:!0,tsType:{name:"Array",elements:[{name:"MetricEnum"}],raw:"MetricEnum[]"},description:"The metrics to show on the card."},timePeriod:{required:!0,tsType:{name:"ReportTimePeriod"},description:"The time period for the card."},compareTo:{required:!1,tsType:{name:"ReportCompareTo"},description:"(Optional) compareTo parameter to send to the backend, if you want to compare the same metric."},variant:{required:!1,tsType:{name:"union",raw:'"default" | "chart-only" | "last-month"',elements:[{name:"literal",value:'"default"'},{name:"literal",value:'"chart-only"'},{name:"literal",value:'"last-month"'}]},description:"The card variant:\n- default has a single value on the left showing uplift if one single metric, without uplift and with titles for\nmultiple metrics\n- chart-only has no values on the left\n- last-month shows comparison for the last month as well as the values on the left.\n@default default"},tooltip:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"The (optional) tooltip for the title."},seriesNames:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"(Optional) names to use for the series overriding the backend"},lineChartConfig:{required:!1,tsType:{name:"Partial",elements:[{name:"LineChartProps"}],raw:"Partial<LineChartProps>"},description:"(Optional) config to send to the LineChart"},isAverageValue:{required:!1,tsType:{name:"boolean"},description:"(Optional) whether to show the average value for the time period."},isYearOnYear:{required:!1,tsType:{name:"boolean"},description:"(Optional) whether this is a year on year metric."},detailMetrics:{required:!1,tsType:{name:"Array",elements:[{name:"MetricEnum"}],raw:"MetricEnum[]"},description:"(Optional) The metrics to display in the detailed, over time graph. Defaults to showing the same metric\n\n@default metrics"}}}},"./src/shared/components/UpliftLabel/UpliftLabel.tsx":function(e,i,a){a.d(i,{Z:()=>c});var n=a("../node_modules/react/jsx-runtime.js"),t=a("../node_modules/@heroicons/react/20/solid/esm/ArrowUpIcon.js"),r=a("../node_modules/@heroicons/react/20/solid/esm/ArrowDownIcon.js"),d=a("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),s=a("../node_modules/react-i18next/dist/es/index.js"),l=a("./src/shared/@types/reporting.ts");let o=a("../node_modules/styled-components/dist/styled-components.browser.esm.js").ZP.div.withConfig({displayName:"UpliftLabel.styled__Container"})(["background-color:",";padding:",";border-radius:4px;display:flex;align-items:center;gap:4px;width:fit-content;"],(0,d.Ys)("Grey60"),(0,d.W0)(1)),m=e=>{let{comparisonRatio:i,timePeriod:a,compareTo:m,previousValue:c}=e,{t:u}=(0,s.$G)("shared"),p=i>=0;return m===l.MW.NONE||a===l.Iq.LAST_ALL_TIME?null:(0,n.jsxs)(o,{children:[(0,n.jsxs)(d.__,{variant:"numerical-context",rating:p?"good":"bad",children:[p?(0,n.jsx)(t.Z,{width:14}):(0,n.jsx)(r.Z,{width:14}),(0,d.rl)(Math.abs(i),{mode:"compact"})]}),(0,n.jsxs)(d.XS,{children:[u(`uplift-label.${m.toLowerCase()}`,{timePeriod:u(`reporting:periods.${a.toLowerCase()}-short`),context:p?"UP":"DOWN"})," ",c&&(0,n.jsxs)("b",{children:["(",c,")"]})]})]})};m.Skeleton=()=>(0,n.jsxs)(o,{children:[(0,n.jsx)(d.Od,{width:48,height:22}),(0,n.jsx)(d.XS,{children:(0,n.jsx)(d.Od,{width:200,height:18})})]});let c=m;m.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"UpliftLabel",props:{comparisonRatio:{required:!0,tsType:{name:"number"},description:""},previousValue:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},timePeriod:{required:!0,tsType:{name:"ReportTimePeriod"},description:""},compareTo:{required:!0,tsType:{name:"ReportCompareTo"},description:""}}}},"./src/shared/components/UpliftLabel/index.ts":function(e,i,a){a.d(i,{Z:function(){return n.Z}});var n=a("./src/shared/components/UpliftLabel/UpliftLabel.tsx")},"./src/shared/hooks/useMetricValues/graphql/fetchMetricValues.generated.ts":function(e,i,a){a.d(i,{q:function(){return n}});let n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchMetricValues"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"merchantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"metrics"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MetricEnum"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reportParameters"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportParametersInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"report_values"},arguments:[{kind:"Argument",name:{kind:"Name",value:"merchantId"},value:{kind:"Variable",name:{kind:"Name",value:"merchantId"}}},{kind:"Argument",name:{kind:"Name",value:"metrics"},value:{kind:"Variable",name:{kind:"Name",value:"metrics"}}},{kind:"Argument",name:{kind:"Name",value:"reportParameters"},value:{kind:"Variable",name:{kind:"Name",value:"reportParameters"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"value"}},{kind:"Field",name:{kind:"Name",value:"comparisonValue"}},{kind:"Field",name:{kind:"Name",value:"metadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"metric"}},{kind:"Field",name:{kind:"Name",value:"drillDownUrl"}},{kind:"Field",name:{kind:"Name",value:"currencySymbol"}}]}}]}}]}}]}},"./src/shared/hooks/useMetricValues/useMetricValues.ts":function(e,i,a){a.d(i,{Z:function(){return l}});var n=a("../node_modules/react/index.js"),t=a("../node_modules/@apollo/client/react/hooks/useQuery.js"),r=a("./src/shared/hooks/index.ts"),d=a("./src/shared/utilities/index.ts"),s=a("./src/shared/hooks/useMetricValues/graphql/fetchMetricValues.generated.ts");let l=function(e,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{merchantId:o}=(0,r.rc)(),{loading:m,data:c,error:u}=(0,t.aM)(s.q,{variables:{merchantId:o,metrics:e,reportParameters:i},skip:l});return(0,n.useMemo)(()=>({isLoading:m,isError:!!u,metrics:((null==c?void 0:c.report_values)||[]).map((e,i)=>(0,d.cH)(e,a[i]))||[]}),[null==c?void 0:c.report_values,u,m,a])}},"./src/shared/hooks/useMetricValuesOverTime/graphql/fetchMetricValuesOverTime.generated.ts":function(e,i,a){a.d(i,{v:function(){return n}});let n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchMetricValuesOverTime"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"merchantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"metrics"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MetricEnum"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reportParameters"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportParametersInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"report_valuesOverTime"},arguments:[{kind:"Argument",name:{kind:"Name",value:"merchantId"},value:{kind:"Variable",name:{kind:"Name",value:"merchantId"}}},{kind:"Argument",name:{kind:"Name",value:"metrics"},value:{kind:"Variable",name:{kind:"Name",value:"metrics"}}},{kind:"Argument",name:{kind:"Name",value:"reportParameters"},value:{kind:"Variable",name:{kind:"Name",value:"reportParameters"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"metadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"drillDownUrl"}},{kind:"Field",name:{kind:"Name",value:"currencySymbol"}}]}},{kind:"Field",name:{kind:"Name",value:"series"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"isComparison"}},{kind:"Field",name:{kind:"Name",value:"metadata"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"metric"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}}]}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"x"}},{kind:"Field",name:{kind:"Name",value:"y"}}]}}]}}]}}]}}]}},"./src/shared/hooks/useMetricValuesOverTime/useMetricValuesOverTime.ts":function(e,i,a){a.d(i,{Z:function(){return m}});var n=a("../node_modules/react/index.js"),t=a("../node_modules/@apollo/client/react/hooks/useQuery.js"),r=a("./src/shared/@types/reporting.ts"),d=a("./src/shared/hooks/index.ts"),s=a("./src/shared/hooks/useMetricValuesOverTime/graphql/fetchMetricValuesOverTime.generated.ts");let l=[r.Iq.LAST_WEEK,r.Iq.LAST_8_WEEKS,r.Iq.LAST_12_WEEKS,r.Iq.LAST_26_WEEKS,r.Iq.LAST_ALL_TIME,r.Iq.CUSTOM],o=[r.Iq.LAST_MONTH,r.Iq.LAST_3_WHOLE_MONTHS,r.Iq.SPECIFIC_3_MONTHS,r.Iq.LAST_6_WHOLE_MONTHS,r.Iq.SPECIFIC_6_MONTHS,r.Iq.LAST_12_WHOLE_MONTHS,r.Iq.SPECIFIC_13_MONTHS,r.Iq.SPECIFIC_24_MONTHS,r.Iq.LAST_ALL_TIME,r.Iq.CUSTOM],m=function(e,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],m=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{merchantId:c}=(0,d.rc)(),{loading:u,data:p,error:h}=(0,t.aM)(s.v,{variables:{merchantId:c,metrics:e,reportParameters:i},skip:m});return(0,n.useMemo)(()=>{let n=(null==p?void 0:p.report_valuesOverTime.series)||[],{groupBy:t,timePeriod:d}=i,s=t===r.Cc.WEEK&&!l.includes(d)||t===r.Cc.MONTH&&!o.includes(d);return{isLoading:u,isError:!!h,series:[...n].sort((i,a)=>{var n,t;let r=e.indexOf(null===(n=i.metadata)||void 0===n?void 0:n.metric),d=e.indexOf(null===(t=a.metadata)||void 0===t?void 0:t.metric);return r!==d?r-d:Number(i.isComparison)-Number(a.isComparison)}).map((e,i)=>{var n,t,r;let d=[...e.data],l=d[d.length-1],o=s&&0===l.y?d.slice(0,-1):d;return{id:e.id.replace(/\s+/g,"-"),metric:null===(n=e.metadata)||void 0===n?void 0:n.metric,name:a[i]??(null===(t=e.metadata)||void 0===t?void 0:t.name)??"",description:(null===(r=e.metadata)||void 0===r?void 0:r.description)??"",type:e.type,isComparison:e.isComparison,data:o}})}},[null==p?void 0:p.report_valuesOverTime.series,i,u,h,a,e])}}}]);