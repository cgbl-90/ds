"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["2810"],{"./src/consumer/journey/ChoiceOfOffer/ChoiceOfOfferPage.stories.tsx":function(e,r,t){t.r(r),t.d(r,{default:()=>T,Default:()=>h});var n=t("../node_modules/react/jsx-runtime.js"),s=t("./src/shared/constants/filterOfferTypes.ts"),o=t("./src/consumer/journey/mockData.tsx"),i=t("../node_modules/react/index.js"),c=t("./src/shared/utilities/addTerm.ts"),a=t("./src/shared/utilities/createFormClickHandler.ts"),u=t("./src/consumer/journey/components/ContentItem.tsx"),m=t("./src/consumer/journey/components/Header.tsx"),d=t("./src/consumer/journey/components/InformationNotice.tsx"),O=t("./src/consumer/journey/components/PageTransition.tsx"),f=t("./src/consumer/journey/hooks/JourneyContext.tsx"),E=t("./src/consumer/journey/hooks/useJourneyData.tsx"),_=t("./src/consumer/journey/RegistrationPage/RegistrationPage.tsx"),l=t("./src/consumer/journey/types.ts"),p=t("./src/consumer/journey/ChoiceOfOffer/components/ChoiceOfOfferButton.tsx");let C=e=>{let{situation:r,offer:t,flowId:s,showOrderComplete:o,includePrivacyNotices:C}=e,[T,h]=(0,i.useState)(),{step:N,user:{email:I,firstname:R,surname:j,isSaved:S}}=(0,f.Lz)(),{setStep:x}=(0,f.Nk)(),{subOffers:F}=t,{previewMode:y,isInPreview:g}=(0,E.Z)(),v=(0,i.useCallback)(e=>{e&&I&&R&&j&&(0,a.Z)((0,c.Z)(e.url,{email:I,firstname:R,surname:j}))()},[I,R,j]),b=(0,i.useCallback)(e=>{if(!g)h(e),S&&e?v(e):e&&x(1)},[S,v,g,x]),M=l.jy.CHOICE_OF_OFFER_REGISTER;(null==T?void 0:T.isNps)?M=l.qo.CHOICE_OF_OFFER_REGISTER:(null==T?void 0:T.isIfa)&&(M=l.mu.CHOICE_OF_OFFER_REGISTER);let A=T&&(0,n.jsx)(u.Z,{tag:M,hasNoWrapper:!0,subOfferId:T.id}),H=new URLSearchParams(window.location.search).get("hasBeenResegmented");return 1===N?(0,n.jsx)(_.Z,{situation:r,contentItems:l.zi,onSubmit:()=>v(T),onCancel:()=>b(),flowId:s,offer:t,registerButton:A,isInPreview:g}):(0,n.jsxs)(O.Z,{className:`referrer referrer-offer--${r} mm-frame-choice-of-offer`,dataStage:"referrer-offer",children:[H?(0,n.jsx)(u.Z,{tag:l.zi.RESEGMENTATION_COMPLETE}):o&&(0,n.jsx)(u.Z,{tag:l.zi.ORDER_COMPLETE}),(0,n.jsx)(m.Z,{tag:l.zi.HEADLINE,shouldAutoFocus:!0}),(0,n.jsx)("div",{className:"mm-choice-of-offer-body",children:F.map((e,r)=>{let t=l.jy.CHOICE_OF_OFFER_HEADER;return e.isIfa?t=l.mu.CHOICE_OF_OFFER_HEADER:e.isNps&&(t=l.qo.CHOICE_OF_OFFER_HEADER),(0,n.jsxs)(i.Fragment,{children:[(0,n.jsx)("span",{className:`mm-choice-of-offer-headline-${r}`,children:(0,n.jsx)(u.Z,{tag:t,subOfferId:e.id})}),r!==F.length-1&&(0,n.jsx)("span",{className:`mm-choice-of-offer-headline-separator-${r}`,children:(0,n.jsx)(u.Z,{tag:l.zi.OFFER_HEADLINE})})]},e.id)})}),C&&(0,n.jsx)(d.Z,{tag:l.zi.INFORMATION_NOTICE}),(0,n.jsx)("div",{className:"mm-choice-of-offer-buttons",children:F.map(e=>(0,n.jsx)(p.Z,{offer:e,onSelectChoice:()=>b(e),previewMode:y},e.id))})]})};C.__docgenInfo={description:"",methods:[],displayName:"ChoiceOfOfferPage"},t("./src/consumer/journey/App.stories.less?d569");let T={component:C,title:"Customer Journey / Choice Of Offer / Choice Of Offer Page"},h=(e=>{let r=(0,o.LT)(C);return(0,n.jsx)("div",{className:"mm-body-europium",style:{width:"960px",height:"630px"},children:(0,n.jsx)("div",{className:"europium-container",children:(0,n.jsx)("div",{className:"europium-page",children:(0,n.jsx)(r,{...e})})})})}).bind({});h.args={situation:"postpurchase",offer:{id:"123",type:s.Z.CHOICE_OF_OFFER,quickLinkCode:"",subOffers:o.Tn},showOrderComplete:!0,includePrivacyNotices:!0},h.parameters={...h.parameters,docs:{...h.parameters?.docs,source:{originalSource:'(args: Props) => {\n  const WrappedChoiceOfOfferPage = withMock(ChoiceOfOfferPage);\n  return <div className="mm-body-europium" style={{\n    width: "960px",\n    height: "630px"\n  }}>\n            <div className="europium-container">\n                <div className="europium-page">\n                    <WrappedChoiceOfOfferPage {...args} />\n                </div>\n            </div>\n        </div>;\n}',...h.parameters?.docs?.source}}}},"./src/consumer/journey/ChoiceOfOffer/components/ChoiceOfOfferButton.tsx":function(e,r,t){t.d(r,{Z:function(){return a}});var n=t("../node_modules/react/jsx-runtime.js"),s=t("./src/shared/constants/preview.ts"),o=t("./src/consumer/journey/components/ContentItem.tsx"),i=t("./src/consumer/journey/types.ts");let c=e=>{let{offer:r,onSelectChoice:t,previewMode:c}=e,a=c===s.i4.EDIT,u=i.jy.CHOICE_OF_OFFER_CTA;return r.isNps?u=i.qo.CHOICE_OF_OFFER_CTA:r.isIfa&&(u=i.mu.CHOICE_OF_OFFER_CTA),(0,n.jsx)("div",{className:"mm-button",children:(0,n.jsx)("button",{type:"button",onClick:a?void 0:t,children:(0,n.jsx)(o.Z,{tag:u,hasNoWrapper:!0,subOfferId:r.id})})})},a=c;c.__docgenInfo={description:"",methods:[],displayName:"ChoiceOfOfferButton",props:{offer:{required:!0,tsType:{name:"SubOffer"},description:""},onSelectChoice:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},previewMode:{required:!1,tsType:{name:"PREVIEW_MODE"},description:""}}}},"./src/consumer/journey/components/InformationNotice.tsx":function(e,r,t){t.d(r,{Z:function(){return i}});var n=t("../node_modules/react/jsx-runtime.js"),s=t("./src/consumer/journey/components/ContentItem.tsx");let o=e=>{let{tag:r}=e;return(0,n.jsxs)("div",{className:"mm-information-notice","data-auto-class":"mm-information-notice",children:[(0,n.jsx)("hr",{}),(0,n.jsx)(s.Z,{tag:r})]})},i=o;o.__docgenInfo={description:"",methods:[],displayName:"InformationNotice",props:{tag:{required:!0,tsType:{name:"union",raw:"| GLOBAL_CONTENT_ITEMS\n| REFERRER_CONTENT_ITEMS\n| IFA_CONTENT_ITEMS\n| NPS_CONTENT_ITEMS\n| CHOICE_OF_OFFER_CONTENT_ITEMS\n| CUSTOMER_ORIGIN_SURVEY_CONTENT_ITEMS\n| CUSTOMER_ORIGIN_SURVEY_ANSWERS",elements:[{name:"GLOBAL_CONTENT_ITEMS"},{name:"REFERRER_CONTENT_ITEMS"},{name:"IFA_CONTENT_ITEMS"},{name:"NPS_CONTENT_ITEMS"},{name:"CHOICE_OF_OFFER_CONTENT_ITEMS"},{name:"CUSTOMER_ORIGIN_SURVEY_CONTENT_ITEMS"},{name:"union",raw:"| CUSTOMER_ORIGIN_SURVEY_ANSWERS_WITHOUT_OTHER\n| CUSTOMER_ORIGIN_SURVEY_CONTENT_ITEMS.COS_ANSWER_OTHER",elements:[{name:"CUSTOMER_ORIGIN_SURVEY_ANSWERS_WITHOUT_OTHER"},{name:"CUSTOMER_ORIGIN_SURVEY_CONTENT_ITEMS.COS_ANSWER_OTHER"}]}]},description:""}}}},"./src/shared/utilities/addTerm.ts":function(e,r,t){t.d(r,{Z:function(){return n}});let n=(e,r)=>{let t=document.createElement("a");return t.href=e,Object.entries(r).forEach(e=>{let[r,n]=e;t.search+=`${t.search?"&":""}${encodeURIComponent(r)}=${encodeURIComponent(n)}`}),t.href}},"./src/shared/utilities/createFormClickHandler.ts":function(e,r,t){t.d(r,{Z:function(){return n}});let n=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=>{null==t||t.preventDefault();let n=document.createElement("form");n.setAttribute("method","post"),n.setAttribute("action",e),Object.entries(r).forEach(e=>{let[r,t]=e;if(!t)return;let s=document.createElement("input");s.setAttribute("type","hidden"),s.setAttribute("name",r),s.setAttribute("value",t),n.appendChild(s)}),document.body.appendChild(n),n.submit()}}}}]);