"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["4860"],{"./src/client/reporting/incremental-value/__mocks__/fetchIncrementalValueStatistics.msw.ts":function(e,n,i){i.d(n,{m:function(){return t}});let t={__typename:"Query",merchant:{__typename:"Merchant",id:"4461",reportingCurrencySymbol:"\xa3",propensityToReferStats:{__typename:"PropensityToReferStats",metricVariationsAcrossSegments:{__typename:"PropensityToReferMetricVariationsAcrossSegments",volume:{__typename:"PropensityToReferFullSegmentedValue",high:.4423313708308486,low:.3913457026157887,control:.16632292655336264},shareRate:{__typename:"PropensityToReferSegmentedValue",high:.03666666666666667,low:.01},newCustomers:{__typename:"PropensityToReferSegmentedValue",high:30805,low:10877},newCustomersPercentage:{__typename:"PropensityToReferSegmentedValue",high:.7389144237727118,low:.7389144237727118},repeatRate:{__typename:"PropensityToReferSegmentedValue",high:.0521,low:.05703333333333333}}}}}},"./src/client/reporting/incremental-value/components/ChartCard/ChartCard.tsx":function(e,n,i){i.d(n,{Z:()=>k});var t=i("../node_modules/react/jsx-runtime.js"),a=i("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),r=i("../node_modules/react-i18next/dist/es/index.js"),l=i("./src/client/reporting/incremental-value/components/ExplainerLabel/ExplainerLabel.tsx"),o=i("../node_modules/styled-components/dist/styled-components.browser.esm.js");let d=o.ZP.div.withConfig({displayName:"ChartCard.styled__ChartContainer"})(["display:grid;grid-template-columns:auto;place-content:center center;margin-top:",";text-align:center;"],(0,a.W0)(2)),s=o.ZP.div.withConfig({displayName:"ChartCard.styled__LabelContainer"})(["display:grid;grid-template-columns:repeat(2,1fr);gap:",";"],(0,a.W0)(2)),c=o.ZP.div.withConfig({displayName:"ChartCard.styled__InnerContainer"})(["display:grid;grid-template-columns:auto;gap:",";"],(0,a.W0)(2)),m=o.ZP.div.withConfig({displayName:"ChartCard.styled__CardDescription"})(["background-color:",";border-radius:",";padding:",";"],(0,a.Ys)("GreyLight"),(0,a.W0)(1),(0,a.W0)(2)),p=o.ZP.div.withConfig({displayName:"ChartCard.styled__TextContainer"})(["display:flex;white-space:normal;width:100%;"]),u=(0,o.ZP)(a.M).withConfig({displayName:"ChartCard.styled__M"})(["font-weight:bold;word-break:normal;"]),h=e=>{let{heading:n,description:i,data:o,chart:k,isLoading:g}=e,{t:y}=(0,r.$G)("reporting",{keyPrefix:"incremental-value.segment-explainer-modal"});return g?(0,t.jsx)(h.Skeleton,{chart:k}):(0,t.jsxs)(a.Zb,{variant:"border",children:[(0,t.jsx)(a.Zb.Title,{wrapper:e=>{let{children:n}=e;return(0,t.jsx)(p,{children:n})},children:(0,t.jsx)(u,{children:n})}),(0,t.jsx)(a.Zb.Body,{children:(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:k}),(0,t.jsxs)(s,{children:[(0,t.jsx)(l.Z,{color:"MidnightBlueBase",text:y("chart-card.label.high-title","High Propensity Group")}),(0,t.jsx)(l.Z,{color:"CyanBase",text:y("chart-card.label.low-title","Low Propensity Group")}),(null==o?void 0:o.control)&&(0,t.jsx)(l.Z,{color:"MidnightBlue40Light",text:y("chart-card.label.control-title","Control (placed in High Propensity Group)")})]}),(0,t.jsx)(m,{children:i})]})})]})};h.Skeleton=e=>{let{chart:n}=e;return(0,t.jsxs)(a.Zb,{variant:"border",children:[(0,t.jsx)(a.Zb.Title,{wrapper:e=>{let{children:n}=e;return(0,t.jsx)(p,{children:n})},children:(0,t.jsx)(a.Od,{width:158,height:24})}),(0,t.jsx)(a.Zb.Body,{children:(0,t.jsxs)(c,{children:[(0,t.jsx)(d,{children:n}),(0,t.jsxs)(s,{children:[(0,t.jsx)(l.Z.Skeleton,{}),(0,t.jsx)(l.Z.Skeleton,{})]}),(0,t.jsx)(m,{children:(0,t.jsx)(a.Od,{width:300,height:100})})]})})]})};let k=h;h.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[{name:'{ chart }: Pick<ChartCardProps, "chart">',optional:!1,type:{name:"Pick",elements:[{name:"ChartCardProps"},{name:"literal",value:'"chart"'}],raw:'Pick<ChartCardProps, "chart">',alias:"Pick"}}],returns:null}],displayName:"ChartCard",props:{heading:{required:!1,tsType:{name:"string"},description:""},description:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},chart:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},data:{required:!1,tsType:{name:"Data"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""}}}},"./src/client/reporting/incremental-value/components/DonutPieChart/DonutPieChart.tsx":function(e,n,i){i.d(n,{Z:()=>h});var t=i("../node_modules/react/jsx-runtime.js"),a=i("../node_modules/@nivo/pie/dist/nivo-pie.es.js"),r=i("../node_modules/react-i18next/dist/es/index.js"),l=i("../node_modules/styled-components/dist/styled-components.browser.esm.js"),o=i("./src/shared/components/Charts/index.ts"),d=i("../node_modules/@react-spring/web/dist/react-spring_web.modern.mjs"),s=i("./src/shared/utilities/index.ts"),c=i("./src/shared/@types/graphql.ts");let m=e=>{let{label:n,style:i}=e;return(0,t.jsx)(d.q.g,{transform:i.transform,style:{pointerEvents:"none"},children:(0,t.jsx)("text",{textAnchor:"middle",dominantBaseline:"central",fill:i.textColor,style:{fontSize:12,fontWeight:800},children:(0,s.qp)(n,{type:c.mV.Percentage})})})};m.__docgenInfo={description:"",methods:[],displayName:"CustomArcLabelsComponent"};let p=[{id:"Low Propensity Group",value:20,colour:"#EBEBEB"},{id:"High Propensity Group",value:80,colour:"#D9D9D9"}],u=e=>{let{data:n}=e,{t:i}=(0,r.$G)("reporting",{keyPrefix:"incremental-value.segment-explainer-modal"}),{colors:d}=(0,l.Fg)();if(!n)return(0,t.jsx)(u.Skeleton,{});let s=[{id:i("chart-card.label.high-title","High Propensity Group"),value:n.high||0,colour:d.MidnightBlueBase},{id:i("chart-card.label.low-title","Low Propensity Group"),value:n.low||0,colour:d.CyanBase},...n.control?[{id:i("chart-card.label.control-title","Control"),value:n.control||0,colour:d.MidnightBlue40Light}]:[]];return(0,t.jsx)(o.hC,{style:{height:"200px",width:"200px"},children:(0,t.jsx)(a.Y2,{data:s,innerRadius:.7,colors:e=>e.data.colour,cornerRadius:5,margin:{top:30,right:40,bottom:20,left:30},enableArcLinkLabels:!1,arcLabelsRadiusOffset:1.8,arcLabelsTextColor:e=>e.data.colour,padAngle:1.4,arcLabelsComponent:e=>{let{datum:n,label:i,style:a}=e;return(0,t.jsx)(m,{datum:n,label:i,style:a})}})})};u.Skeleton=()=>(0,t.jsx)(o.hC,{style:{height:"200px",width:"200px"},children:(0,t.jsx)(a.Y2,{data:p,innerRadius:.7,colors:e=>e.data.colour,cornerRadius:5,margin:{top:30,right:40,bottom:20,left:30},enableArcLinkLabels:!1,arcLabelsRadiusOffset:1.8,arcLabelsTextColor:e=>e.data.colour,padAngle:1.4,enableArcLabels:!1})});let h=u;u.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[],returns:null}],displayName:"DonutPieChart",props:{data:{required:!1,tsType:{name:"Data"},description:""}}}},"./src/client/reporting/incremental-value/components/ExplainerLabel/ExplainerLabel.tsx":function(e,n,i){i.d(n,{Z:()=>m});var t=i("../node_modules/react/jsx-runtime.js"),a=i("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),r=i("../node_modules/styled-components/dist/styled-components.browser.esm.js");let l=r.ZP.div.withConfig({displayName:"ExplainerLabel.styled__Container"})(["display:grid;grid-template-columns:"," auto;gap:",";align-items:center;"],(0,a.W0)(4),(0,a.W0)(1)),o=(e,n)=>n?(0,a.Ys)(n):"primary"===e?(0,a.Ys)("MidnightBlueBase"):"secondary"===e?(0,a.Ys)("HotPinkBase"):(0,a.Ys)("Skeleton"),d=r.ZP.div.withConfig({displayName:"ExplainerLabel.styled__InnerContainer"})(["display:flex;flex-wrap:nowrap;border:"," solid ",";padding:",";border-radius:",";"],(0,a.W0)(.25),(0,a.Ys)("Skeleton"),(0,a.W0)(.5),(0,a.W0)(.75)),s=(0,r.ZP)("div").withConfig((0,a.NZ)("type","color")).withConfig({displayName:"ExplainerLabel.styled__TypeIndicator"})(["display:flex;flex-wrap:wrap;gap:",";background:",";width:",";height:",";border-radius:",";"],(0,a.W0)(2),e=>{let{type:n,color:i}=e;return o(n,i)},(0,a.W0)(3.5),(0,a.W0)(2.5),(0,a.W0)(.5)),c=e=>{let{type:n,text:i,color:r}=e;return(0,t.jsxs)(l,{children:[(0,t.jsx)(d,{children:(0,t.jsx)(s,{type:n??"skeleton",color:r})}),(0,t.jsx)(a.M,{children:i})]})};c.Skeleton=e=>{let{color:n}=e;return(0,t.jsxs)(l,{children:[(0,t.jsx)(d,{children:(0,t.jsx)(s,{type:"skeleton",color:n})}),(0,t.jsx)(a.M,{children:(0,t.jsx)(a.Od,{width:138})})]})};let m=c;c.__docgenInfo={description:"",methods:[{name:"Skeleton",docblock:null,modifiers:["static"],params:[{name:'{ color }: Pick<ExplainerLabelProps, "color">',optional:!1,type:{name:"Pick",elements:[{name:"ExplainerLabelProps"},{name:"literal",value:'"color"'}],raw:'Pick<ExplainerLabelProps, "color">',alias:"Pick"}}],returns:null}],displayName:"ExplainerLabel",props:{type:{required:!1,tsType:{name:"union",raw:'"primary" | "secondary"',elements:[{name:"literal",value:'"primary"'},{name:"literal",value:'"secondary"'}]},description:""},text:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},color:{required:!1,tsType:{name:"unknown"},description:""}}}},"./src/client/reporting/incremental-value/hooks/useIncrementalValueStatistics.ts":function(e,n,i){i.d(n,{Z:()=>c});var t=i("../node_modules/react/index.js"),a=i("../node_modules/@apollo/client/react/hooks/useQuery.js"),r=i("./src/shared/hooks/index.ts"),l=i("./src/client/reporting/hooks/ReportingContext.tsx"),o=i("./src/client/reporting/incremental-value/context/IncrementalValuePageContext.ts");let d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchIncrementalValueStatistics"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"merchantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"timePeriod"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"repeatWindow"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"merchant"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"merchantId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"reportingCurrencySymbol"}},{kind:"Field",name:{kind:"Name",value:"propensityToReferStats"},arguments:[{kind:"Argument",name:{kind:"Name",value:"timePeriod"},value:{kind:"Variable",name:{kind:"Name",value:"timePeriod"}}},{kind:"Argument",name:{kind:"Name",value:"repeatWindow"},value:{kind:"Variable",name:{kind:"Name",value:"repeatWindow"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"metricVariationsAcrossSegments"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"volume"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"high"}},{kind:"Field",name:{kind:"Name",value:"low"}},{kind:"Field",name:{kind:"Name",value:"control"}}]}},{kind:"Field",name:{kind:"Name",value:"shareRate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"high"}},{kind:"Field",name:{kind:"Name",value:"low"}}]}},{kind:"Field",name:{kind:"Name",value:"newCustomers"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"high"}},{kind:"Field",name:{kind:"Name",value:"low"}}]}},{kind:"Field",name:{kind:"Name",value:"newCustomersPercentage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"high"}},{kind:"Field",name:{kind:"Name",value:"low"}}]}},{kind:"Field",name:{kind:"Name",value:"repeatRate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"high"}},{kind:"Field",name:{kind:"Name",value:"low"}}]}}]}}]}}]}}]}}]};var s=i("./src/client/reporting/incremental-value/IncrementalValue.types.ts");let c=()=>{let{merchantId:e}=(0,r.rc)(),{timePeriod:n}=(0,l.eh)(),{selectedGoal:i,selectedRepeatWindow:c}=(0,o.t)(),{data:m,loading:p}=(0,a.aM)(d,{variables:{merchantId:e,timePeriod:n,repeatWindow:i===s.r.REPEAT_REVENUE?c:void 0}});return(0,t.useMemo)(()=>{var e,n;return{statistics:null==m?void 0:null===(n=m.merchant)||void 0===n?void 0:null===(e=n.propensityToReferStats)||void 0===e?void 0:e.metricVariationsAcrossSegments,loading:p}},[m,p])}}}]);