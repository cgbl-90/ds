/*! For license information please see client-customer-profile-components-CustomerProfileActions-components-components-ConfirmPurchaseModal-stories.7b005129.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["223"],{"./src/shared/components/Chart/ChartInternal.module.less?712b":function(e,r,n){"use strict";n.d(r,{Z:function(){return a}});let a={loading:"loading-i429gv",header:"header-INChVS",titles:"titles-herhqc",chartWrapper:"chartWrapper-v_5RGH",chartWrapperLegendLeft:"chartWrapperLegendLeft-gyUVNB",chartWrapperLegendRight:"chartWrapperLegendRight-N6VGBw",chartWrapperLegendTop:"chartWrapperLegendTop-JPzW2f",chartWrapperLegendBottom:"chartWrapperLegendBottom-ZyJR9E",chart:"chart-_XQz0c",customChartLegendHidden:"customChartLegendHidden-QDlMox"}},"./src/client/customer/profile/components/CustomerProfileActions/components/components/ConfirmPurchaseModal.stories.tsx":function(e,r,n){"use strict";n.r(r),n.d(r,{OfferIsActivePromotion:()=>U,OfferIsPromotion:()=>L,default:()=>R,OfferIsExpiredPromotion:()=>E,NoOrders:()=>S,MultipleOrders:()=>T,Default:()=>F});var a=n("../node_modules/react/jsx-runtime.js"),t=n("../node_modules/msw/lib/core/graphql.mjs"),i=n("../node_modules/msw/lib/core/HttpResponse.mjs");let l={__typename:"Query",merchantCustomer:{__typename:"MerchantCustomer",id:"123",refereesForConfirmPurchase:[{__typename:"Referee",id:"1",createdDate:new Date(2024,1,25,12,23,6).toISOString(),merchantOrders:[{__typename:"MerchantOrder",id:"2",total:50.23,currency:"GBP",orderId:"ORD-123",orderDate:new Date(2023,11,24,10,33,30).toISOString()}],referrer:{__typename:"Referrer",id:"2",userOffer:{__typename:"UserOffer",id:"3",merchantCustomer:{__typename:"MerchantCustomer",id:"123",userFullName:"James 1st",user:{__typename:"User",id:"1611",email:"james@king.co.uk"}},offer:{__typename:"Offer",id:"4",experiment:{__typename:"Experiment",isPromotion:!1,lastRefereePurchaseDate:null,id:"5",campaign:{__typename:"Campaign",id:"6",productNormalPrice:50,locale:{__typename:"Locale",id:"7",currencyCode:"GBP"}}}}}}}]}},s=()=>{var e,r,n,a,t;let i=structuredClone(l);return(null===(t=i.merchantCustomer)||void 0===t?void 0:null===(a=t.refereesForConfirmPurchase)||void 0===a?void 0:null===(n=a[0].referrer)||void 0===n?void 0:null===(r=n.userOffer)||void 0===r?void 0:null===(e=r.offer)||void 0===e?void 0:e.experiment)&&(i.merchantCustomer.refereesForConfirmPurchase[0].referrer.userOffer.offer.experiment.isPromotion=!0),i},u=()=>{var e,r,n,a,t;let i=structuredClone(s());return(null==i?void 0:null===(t=i.merchantCustomer)||void 0===t?void 0:null===(a=t.refereesForConfirmPurchase)||void 0===a?void 0:null===(n=a[0].referrer)||void 0===n?void 0:null===(r=n.userOffer)||void 0===r?void 0:null===(e=r.offer)||void 0===e?void 0:e.experiment)&&(i.merchantCustomer.refereesForConfirmPurchase[0].referrer.userOffer.offer.experiment.lastRefereePurchaseDate=new Date(Date.now()+6048e5).toISOString()),i},o=()=>{var e,r,n,a,t,i,l;let u=structuredClone(s());return(null==u?void 0:null===(t=u.merchantCustomer)||void 0===t?void 0:null===(a=t.refereesForConfirmPurchase)||void 0===a?void 0:null===(n=a[0].referrer)||void 0===n?void 0:null===(r=n.userOffer)||void 0===r?void 0:null===(e=r.offer)||void 0===e?void 0:e.experiment)&&(u.merchantCustomer.refereesForConfirmPurchase[0].referrer.userOffer.offer.experiment.lastRefereePurchaseDate=new Date(2023,11,30,0,0,0).toISOString()),(null===(l=u.merchantCustomer)||void 0===l?void 0:null===(i=l.refereesForConfirmPurchase)||void 0===i?void 0:i.length)&&u.merchantCustomer.refereesForConfirmPurchase[0].merchantOrders.push({__typename:"MerchantOrder",id:"3",total:50.23,currency:"GBP",orderId:"ORD-456",orderDate:new Date(2024,2,25,12,23,6).toISOString()}),u},m=()=>{var e,r;let n=structuredClone(l);return(null==n?void 0:null===(r=n.merchantCustomer)||void 0===r?void 0:null===(e=r.refereesForConfirmPurchase)||void 0===e?void 0:e.length)&&(n.merchantCustomer.refereesForConfirmPurchase[0].merchantOrders=[{__typename:"MerchantOrder",id:"2",total:50.23,currency:"GBP",orderId:"ORD-123",orderDate:new Date(2023,11,24,10,33,30).toISOString()},{__typename:"MerchantOrder",id:"3",total:40.26,currency:"GBP",orderId:"ORD-456",orderDate:new Date(2023,11,30,9,15,59).toISOString()}]),n},d=()=>{var e,r;let n=structuredClone(l);return(null==n?void 0:null===(r=n.merchantCustomer)||void 0===r?void 0:null===(e=r.refereesForConfirmPurchase)||void 0===e?void 0:e.length)&&(n.merchantCustomer.refereesForConfirmPurchase[0].merchantOrders=[]),n};var c=n("../node_modules/@apollo/client/react/hooks/useQuery.js"),p=n("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),g=n("../node_modules/react-i18next/dist/es/index.js"),y=n("./src/shared/hooks/index.ts"),_=n("../node_modules/@apollo/client/react/hooks/useMutation.js"),f=n("./src/shared/components/CustomerLink/CustomerLink.tsx"),h=n("./src/shared/components/DateFormat/index.ts"),v=n("./src/shared/context/NotificationContext.tsx");let k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"confirmPurchase"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"merchantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"refereeId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"orderId"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"confirmPurchase_Referee"},arguments:[{kind:"Argument",name:{kind:"Name",value:"merchantId"},value:{kind:"Variable",name:{kind:"Name",value:"merchantId"}}},{kind:"Argument",name:{kind:"Name",value:"refereeId"},value:{kind:"Variable",name:{kind:"Name",value:"refereeId"}}},{kind:"Argument",name:{kind:"Name",value:"orderId"},value:{kind:"Variable",name:{kind:"Name",value:"orderId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"merchantCustomer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPayingCustomer"}},{kind:"Field",name:{kind:"Name",value:"refereesForConfirmPurchase"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}}]}}]};var C=n("../node_modules/styled-components/dist/styled-components.browser.esm.js");let b=C.ZP.div.withConfig({displayName:"ChooseRefereeList.styled__OrderListItem"})(["display:flex;justify-content:space-between;align-items:flex-start;margin:"," 0;"],(0,p.W0)(2));var q=n("./src/client/customer/utilities/getApprovalId.ts");let w=e=>{var r,n,t;let{referee:i,date:l}=e,{t:s}=(0,g.$G)("customer",{keyPrefix:"confirm-purchase.modal"}),u=null===(t=i.referrer)||void 0===t?void 0:null===(n=t.userOffer)||void 0===n?void 0:null===(r=n.offer)||void 0===r?void 0:r.experiment,o=(null==u?void 0:u.isPromotion)||!1,m=null==u?void 0:u.lastRefereePurchaseDate,d=m?new Date(m):new Date,c=o&&null!==m&&d<l,y=(0,p.p6)(d);return o?(0,a.jsx)("div",{children:c?(0,a.jsx)(p.u,{tooltip:(0,a.jsxs)(g.cC,{t:s,i18nKey:"list.promotion.expired.help",children:["This promotion has expired as of ",{formattedDate:y},". Confirming this purchase may give this customer a different reward to that of the promotion."]}),children:(0,a.jsx)(p.__,{variant:"status",status:"warning",children:s("list.promotion.expired.label","Not eligible for promotion")})}):(0,a.jsx)(p.u,{tooltip:s("list.promotion.active.help","If this purchase is confirmed, it will be eligible for the promotion the referee was introduced to. The rewards given out will be for the promotion."),children:(0,a.jsx)(p.__,{variant:"status",status:"positive",children:s("list.promotion.active.label","Eligible for promotion")})})}):null};w.__docgenInfo={description:"",methods:[],displayName:"PromotionWarningLabels",props:{referee:{required:!0,tsType:{name:"signature",type:"object",raw:"{ __typename: 'Referee', id: string, createdDate: string, merchantOrders: Array<{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }>, referrer?: { __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Referee'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"createdDate",value:{name:"string",required:!0}},{key:"merchantOrders",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'MerchantOrder'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"orderDate",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"total",value:{name:"number",required:!0}},{key:"currency",value:{name:"string",required:!0}},{key:"orderId",value:{name:"string",required:!0}}]}}],raw:"Array<{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }>",required:!0}},{key:"referrer",value:{name:"union",raw:"{ __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Referrer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"userOffer",value:{name:"union",raw:"{ __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'UserOffer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"merchantCustomer",value:{name:"union",raw:"{ __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'MerchantCustomer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"userFullName",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"user",value:{name:"signature",type:"object",raw:"{ __typename: 'User', id?: string | null, email: string }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'User'",required:!0}},{key:"id",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"email",value:{name:"string",required:!0}}]},required:!0}}]}},{name:"null"}],required:!1}},{key:"offer",value:{name:"union",raw:"{ __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Offer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"experiment",value:{name:"union",raw:"{ __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Experiment'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"isPromotion",value:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}],required:!1}},{key:"lastRefereePurchaseDate",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"campaign",value:{name:"signature",type:"object",raw:"{ __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Campaign'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"productNormalPrice",value:{name:"number",required:!0}},{key:"locale",value:{name:"signature",type:"object",raw:"{ __typename: 'Locale', id?: string | null, currencyCode?: string | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Locale'",required:!0}},{key:"id",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"currencyCode",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}}]},required:!0}}]},required:!0}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},description:""},date:{required:!0,tsType:{name:"Date"},description:""}}};let P=e=>{let{referee:r,order:n,confirmPurchaseMutation:t,isConfirmPurchaseMutationLoading:i}=e,{t:l}=(0,g.$G)("customer",{keyPrefix:"confirm-purchase.modal"}),{merchantId:s}=(0,y.rc)(),{orderId:u,total:o,currency:m}=n,d=(0,p.xG)(o,{currencyCode:m}),c=(0,p.p6)(n.orderDate,{notation:"custom",format:"d MMM yyyy HH:mm:ss"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(p.al,{children:[(0,a.jsx)(p.S,{children:(0,a.jsxs)(g.cC,{t:l,i18nKey:"list.order.label",children:["Order #",{orderId:u}," made on ",{date:c}," for ",{orderAmount:d}]})}),(0,a.jsx)(w,{referee:r,date:n.orderDate?new Date(n.orderDate):new Date})]}),(0,a.jsx)(p.zx,{isLoading:i,variant:"primary",size:"small",onClick:()=>{t({variables:{merchantId:s,refereeId:(0,q.Z)(r),orderId:n.id}})},children:l("list.order.existing.confirm","Confirm #{{orderId}}",{orderId:u})})]})};P.__docgenInfo={description:"",methods:[],displayName:"ConfirmExistingOrder",props:{referee:{required:!0,tsType:{name:"signature",type:"object",raw:"{ __typename: 'Referee', id: string, createdDate: string, merchantOrders: Array<{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }>, referrer?: { __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Referee'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"createdDate",value:{name:"string",required:!0}},{key:"merchantOrders",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'MerchantOrder'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"orderDate",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"total",value:{name:"number",required:!0}},{key:"currency",value:{name:"string",required:!0}},{key:"orderId",value:{name:"string",required:!0}}]}}],raw:"Array<{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }>",required:!0}},{key:"referrer",value:{name:"union",raw:"{ __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Referrer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"userOffer",value:{name:"union",raw:"{ __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'UserOffer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"merchantCustomer",value:{name:"union",raw:"{ __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'MerchantCustomer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"userFullName",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"user",value:{name:"signature",type:"object",raw:"{ __typename: 'User', id?: string | null, email: string }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'User'",required:!0}},{key:"id",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"email",value:{name:"string",required:!0}}]},required:!0}}]}},{name:"null"}],required:!1}},{key:"offer",value:{name:"union",raw:"{ __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Offer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"experiment",value:{name:"union",raw:"{ __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Experiment'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"isPromotion",value:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}],required:!1}},{key:"lastRefereePurchaseDate",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"campaign",value:{name:"signature",type:"object",raw:"{ __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Campaign'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"productNormalPrice",value:{name:"number",required:!0}},{key:"locale",value:{name:"signature",type:"object",raw:"{ __typename: 'Locale', id?: string | null, currencyCode?: string | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Locale'",required:!0}},{key:"id",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"currencyCode",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}}]},required:!0}}]},required:!0}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},description:""},order:{required:!0,tsType:{name:"signature",type:"object",raw:"{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'MerchantOrder'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"orderDate",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"total",value:{name:"number",required:!0}},{key:"currency",value:{name:"string",required:!0}},{key:"orderId",value:{name:"string",required:!0}}]}},description:""},confirmPurchaseMutation:{required:!0,tsType:{name:"signature",type:"function",raw:"(\n    options?: MutationFunctionOptions<any, ConfirmPurchaseMutationVariables>\n) => Promise<FetchResult>",signature:{arguments:[{type:{name:"MutationFunctionOptions",elements:[{name:"any"},{name:"Types.Exact",elements:[{name:"signature",type:"object",raw:"{\n  merchantId: Types.Scalars['ID']['input'];\n  refereeId: Types.Scalars['ID']['input'];\n  orderId?: Types.InputMaybe<Types.Scalars['ID']['input']>;\n}",signature:{properties:[{key:"merchantId",value:{name:"Types.Scalars['ID']['input']",raw:"Types.Scalars['ID']['input']",required:!0}},{key:"refereeId",value:{name:"Types.Scalars['ID']['input']",raw:"Types.Scalars['ID']['input']",required:!0}},{key:"orderId",value:{name:"Types.InputMaybe",elements:[{name:"Types.Scalars['ID']['input']",raw:"Types.Scalars['ID']['input']"}],raw:"Types.InputMaybe<Types.Scalars['ID']['input']>",required:!1}}]}}],raw:"Types.Exact<{\n  merchantId: Types.Scalars['ID']['input'];\n  refereeId: Types.Scalars['ID']['input'];\n  orderId?: Types.InputMaybe<Types.Scalars['ID']['input']>;\n}>"}],raw:"MutationFunctionOptions<any, ConfirmPurchaseMutationVariables>"},name:"options"}],return:{name:"Promise",elements:[{name:"FetchResult"}],raw:"Promise<FetchResult>"}}},description:""},isConfirmPurchaseMutationLoading:{required:!0,tsType:{name:"boolean"},description:""}}};var N=n("./src/shared/components/index.ts");let x=e=>{let{preamble:r,purchaseAmount:n,referee:t,confirmPurchaseMutation:i,isConfirmPurchaseMutationLoading:l}=e,{t:s}=(0,g.$G)("customer",{keyPrefix:"confirm-purchase.modal"}),{merchantId:u}=(0,y.rc)(),o=new Date;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(p.al,{children:[(0,a.jsxs)(p.S,{children:[r,(0,a.jsx)(N.WW,{message:s("list.order.nominal.help","{{purchaseAmount}} is the default confirmation price for this Campaign.",{purchaseAmount:n})})]}),(0,a.jsx)(w,{referee:t,date:o})]}),(0,a.jsx)(p.zx,{isLoading:l,variant:"primary",size:"small",onClick:()=>{i({variables:{merchantId:u,refereeId:(0,q.Z)(t)}})},children:s("list.button.confirm.new","Confirm new purchase")})]})};x.__docgenInfo={description:"",methods:[],displayName:"ConfirmNewOrder",props:{preamble:{required:!0,tsType:{name:"any"},description:""},purchaseAmount:{required:!0,tsType:{name:"string"},description:""},referee:{required:!0,tsType:{name:"signature",type:"object",raw:"{ __typename: 'Referee', id: string, createdDate: string, merchantOrders: Array<{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }>, referrer?: { __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Referee'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"createdDate",value:{name:"string",required:!0}},{key:"merchantOrders",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'MerchantOrder'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"orderDate",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"total",value:{name:"number",required:!0}},{key:"currency",value:{name:"string",required:!0}},{key:"orderId",value:{name:"string",required:!0}}]}}],raw:"Array<{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }>",required:!0}},{key:"referrer",value:{name:"union",raw:"{ __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Referrer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"userOffer",value:{name:"union",raw:"{ __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'UserOffer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"merchantCustomer",value:{name:"union",raw:"{ __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'MerchantCustomer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"userFullName",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"user",value:{name:"signature",type:"object",raw:"{ __typename: 'User', id?: string | null, email: string }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'User'",required:!0}},{key:"id",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"email",value:{name:"string",required:!0}}]},required:!0}}]}},{name:"null"}],required:!1}},{key:"offer",value:{name:"union",raw:"{ __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Offer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"experiment",value:{name:"union",raw:"{ __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Experiment'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"isPromotion",value:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}],required:!1}},{key:"lastRefereePurchaseDate",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"campaign",value:{name:"signature",type:"object",raw:"{ __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Campaign'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"productNormalPrice",value:{name:"number",required:!0}},{key:"locale",value:{name:"signature",type:"object",raw:"{ __typename: 'Locale', id?: string | null, currencyCode?: string | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Locale'",required:!0}},{key:"id",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"currencyCode",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}}]},required:!0}}]},required:!0}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},description:""},confirmPurchaseMutation:{required:!0,tsType:{name:"signature",type:"function",raw:"(\n    options?: MutationFunctionOptions<any, ConfirmPurchaseMutationVariables>\n) => Promise<FetchResult>",signature:{arguments:[{type:{name:"MutationFunctionOptions",elements:[{name:"any"},{name:"Types.Exact",elements:[{name:"signature",type:"object",raw:"{\n  merchantId: Types.Scalars['ID']['input'];\n  refereeId: Types.Scalars['ID']['input'];\n  orderId?: Types.InputMaybe<Types.Scalars['ID']['input']>;\n}",signature:{properties:[{key:"merchantId",value:{name:"Types.Scalars['ID']['input']",raw:"Types.Scalars['ID']['input']",required:!0}},{key:"refereeId",value:{name:"Types.Scalars['ID']['input']",raw:"Types.Scalars['ID']['input']",required:!0}},{key:"orderId",value:{name:"Types.InputMaybe",elements:[{name:"Types.Scalars['ID']['input']",raw:"Types.Scalars['ID']['input']"}],raw:"Types.InputMaybe<Types.Scalars['ID']['input']>",required:!1}}]}}],raw:"Types.Exact<{\n  merchantId: Types.Scalars['ID']['input'];\n  refereeId: Types.Scalars['ID']['input'];\n  orderId?: Types.InputMaybe<Types.Scalars['ID']['input']>;\n}>"}],raw:"MutationFunctionOptions<any, ConfirmPurchaseMutationVariables>"},name:"options"}],return:{name:"Promise",elements:[{name:"FetchResult"}],raw:"Promise<FetchResult>"}}},description:""},isConfirmPurchaseMutationLoading:{required:!0,tsType:{name:"boolean"},description:""}}};let O=e=>{var r,n,t,i,l;let{referee:s,identifier:u,closeModal:o}=e,{t:m}=(0,g.$G)("customer",{keyPrefix:"confirm-purchase.modal"}),d=null===(n=s.referrer)||void 0===n?void 0:null===(r=n.userOffer)||void 0===r?void 0:r.merchantCustomer,c=null===(l=s.referrer)||void 0===l?void 0:null===(i=l.userOffer)||void 0===i?void 0:null===(t=i.offer)||void 0===t?void 0:t.experiment,y=null==c?void 0:c.campaign,C=(0,p.xG)((null==y?void 0:y.productNormalPrice)||0,{currencyCode:(null==y?void 0:y.locale.currencyCode)||"GBP"}),{addSuccessNotification:q,addErrorNotification:w}=(0,v.kE)(),[N,{loading:O}]=(0,_.D)(k,{onCompleted:()=>{q(m("success.heading","Success"),m("success.body","Purchase by {{identifier}} has been confirmed.",{identifier:u})),o()},onError:()=>{w(m("error.heading","Oops!"),m("error.body","There was an error confirming a purchase for this customer."))}});return(0,a.jsxs)("div",{children:[(0,a.jsx)(p.al,{children:(0,a.jsx)(p.M,{children:d?(0,a.jsxs)(g.cC,{t:m,i18nKey:"list.intro-by.known",children:["Introduced by ",(0,a.jsx)(f.Z,{merchantCustomer:d})," on"," ",(0,a.jsx)(h.Z,{date:s.createdDate,format:"d MMM yyyy HH:mm:ss"}),"."]}):(0,a.jsxs)(g.cC,{t:m,i18nKey:"list.intro-by.unknown",children:["Introduced by an unknown person on"," ",(0,a.jsx)(h.Z,{date:s.createdDate,format:"d MMM yyyy HH:mm:ss"}),"."]})})}),s.merchantOrders.length>0&&(0,a.jsxs)(a.Fragment,{children:[s.merchantOrders.map(e=>(0,a.jsx)(b,{children:(0,a.jsx)(P,{referee:s,order:e,confirmPurchaseMutation:N,isConfirmPurchaseMutationLoading:O})},e.id)),(0,a.jsx)(b,{children:(0,a.jsx)(x,{preamble:(0,a.jsxs)(g.cC,{t:m,i18nKey:"list.orders.new.prefix",children:["Or, record a new transaction for a nominal amount of"," ",(0,a.jsx)("strong",{children:{purchaseAmount:C}}),"."]}),purchaseAmount:C,referee:s,confirmPurchaseMutation:N,isConfirmPurchaseMutationLoading:O})})]}),0===s.merchantOrders.length&&(0,a.jsx)(b,{children:(0,a.jsx)(x,{preamble:(0,a.jsxs)(g.cC,{t:m,i18nKey:"list.order.new.no-prefix",children:["We do not have any recorded transactions for ",{identifier:u}," yet. Record a new transaction for a nominal amount of ",(0,a.jsx)("strong",{children:{purchaseAmount:C}}),"."]}),purchaseAmount:C,referee:s,confirmPurchaseMutation:N,isConfirmPurchaseMutationLoading:O})})]})};O.__docgenInfo={description:"",methods:[],displayName:"ChooseRefereeList",props:{referee:{required:!0,tsType:{name:"signature",type:"object",raw:"{ __typename: 'Referee', id: string, createdDate: string, merchantOrders: Array<{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }>, referrer?: { __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Referee'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"createdDate",value:{name:"string",required:!0}},{key:"merchantOrders",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'MerchantOrder'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"orderDate",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"total",value:{name:"number",required:!0}},{key:"currency",value:{name:"string",required:!0}},{key:"orderId",value:{name:"string",required:!0}}]}}],raw:"Array<{ __typename: 'MerchantOrder', id: string, orderDate?: string | null, total: number, currency: string, orderId: string }>",required:!0}},{key:"referrer",value:{name:"union",raw:"{ __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Referrer', id: string, userOffer?: { __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Referrer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"userOffer",value:{name:"union",raw:"{ __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'UserOffer', id: string, merchantCustomer?: { __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null, offer?: { __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'UserOffer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"merchantCustomer",value:{name:"union",raw:"{ __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'MerchantCustomer', id: string, userFullName?: string | null, user: { __typename: 'User', id?: string | null, email: string } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'MerchantCustomer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"userFullName",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"user",value:{name:"signature",type:"object",raw:"{ __typename: 'User', id?: string | null, email: string }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'User'",required:!0}},{key:"id",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"email",value:{name:"string",required:!0}}]},required:!0}}]}},{name:"null"}],required:!1}},{key:"offer",value:{name:"union",raw:"{ __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Offer', id: string, experiment?: { __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Offer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"experiment",value:{name:"union",raw:"{ __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Experiment', id: string, isPromotion?: boolean | null, lastRefereePurchaseDate?: string | null, campaign: { __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Experiment'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"isPromotion",value:{name:"union",raw:"boolean | null",elements:[{name:"boolean"},{name:"null"}],required:!1}},{key:"lastRefereePurchaseDate",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"campaign",value:{name:"signature",type:"object",raw:"{ __typename: 'Campaign', id: string, productNormalPrice: number, locale: { __typename: 'Locale', id?: string | null, currencyCode?: string | null } }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Campaign'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"productNormalPrice",value:{name:"number",required:!0}},{key:"locale",value:{name:"signature",type:"object",raw:"{ __typename: 'Locale', id?: string | null, currencyCode?: string | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Locale'",required:!0}},{key:"id",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"currencyCode",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}}]},required:!0}}]},required:!0}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},description:""},identifier:{required:!0,tsType:{name:"string"},description:""},closeModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};let j=C.ZP.div.withConfig({displayName:"ConfirmPurchaseModal.styled__InfoBoxes"})(["display:grid;gap:",";"],(0,p.W0)(1)),M={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"fetchMerchantCustomerConfirmPurchaseReferees"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"merchantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"merchantCustomer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"merchantId"},value:{kind:"Variable",name:{kind:"Name",value:"merchantId"}}},{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MerchantCustomerConfirmPurchaseReferees"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"OrderConfirmPurchase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MerchantOrder"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"orderDate"}},{kind:"Field",name:{kind:"Name",value:"total"}},{kind:"Field",name:{kind:"Name",value:"currency"}},{kind:"Field",name:{kind:"Name",value:"orderId"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"RefereeConfirmPurchase"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Referee"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"createdDate"}},{kind:"Field",name:{kind:"Name",value:"merchantOrders"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"OrderConfirmPurchase"}}]}},{kind:"Field",name:{kind:"Name",value:"referrer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"userOffer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"merchantCustomer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"userFullName"}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"email"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"offer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"experiment"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPromotion"}},{kind:"Field",name:{kind:"Name",value:"lastRefereePurchaseDate"}},{kind:"Field",name:{kind:"Name",value:"campaign"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"productNormalPrice"}},{kind:"Field",name:{kind:"Name",value:"locale"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"currencyCode"}}]}}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"MerchantCustomerConfirmPurchaseReferees"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MerchantCustomer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"refereesForConfirmPurchase"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"RefereeConfirmPurchase"}}]}}]}}]},D=e=>{var r,n;let{isOpen:t,closeModal:i,merchantCustomer:l}=e,{t:s}=(0,g.$G)("customer"),{merchantId:u,userId:o}=(0,y.rc)(),{data:m,loading:d}=(0,c.aM)(M,{skip:!t,variables:{merchantId:u,userId:o}}),_=null==l?void 0:null===(r=l.user)||void 0===r?void 0:r.email,f=(null==l?void 0:l.userFullName)?`${l.userFullName} - ${_}`:`${_}`,h=(null==m?void 0:null===(n=m.merchantCustomer)||void 0===n?void 0:n.refereesForConfirmPurchase)||[];return(0,a.jsx)(p.u_,{isOpen:t,onClose:i,modalVariant:"drawer-right",children:(0,a.jsxs)(p.u_.Content,{children:[(0,a.jsxs)(p.u_.Header,{children:[(0,a.jsx)(p.H5,{children:s("confirm-purchase.modal.header","Confirm a purchase we may have missed")}),(0,a.jsx)(p.u_.CloseButton,{})]}),(0,a.jsx)(p.u_.Body,{children:d?(0,a.jsx)(p.Od,{}):(0,a.jsxs)("div",{children:[(0,a.jsx)(j,{children:(0,a.jsx)(p.eg,{variant:"info",children:(0,a.jsxs)(p.eg.Body,{children:[(0,a.jsx)(p.H5,{children:s("confirm-purchase.modal.explainer.generic.title","Why might you need to confirm a purchase?")}),(0,a.jsxs)(g.cC,{t:s,i18nKey:"confirm-purchase.modal.explainer.generic.body",children:[(0,a.jsx)(p.M,{children:"We sometimes don't complete a referral automatically - this could be because the referral took place after a new customer purchased for the first time, or they purchased with a different email address or the order wasn't sent to us."}),(0,a.jsx)(p.M,{children:"If you know this person made an eligible purchase you can confirm it manually here. This will ensure their referrer gets rewarded."})]})]})})}),(0,a.jsx)("hr",{}),(0,a.jsx)("div",{children:h.map(e=>(0,a.jsx)(O,{referee:e,identifier:f,closeModal:i},e.id))}),(0,a.jsx)("hr",{})]})})]})})};D.__docgenInfo={description:"",methods:[],displayName:"ConfirmPurchaseModal",props:{isOpen:{required:!0,tsType:{name:"boolean"},description:""},closeModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},merchantCustomer:{required:!0,tsType:{name:"signature",type:"object",raw:"{ __typename: 'MerchantCustomer', id: string, createdDate: string, userFullName?: string | null, customerUsername?: string | null, customerId?: string | null, hashKey?: string | null, lastPurchaseDate?: string | null, isSuspicious: boolean, isReceivingEmails: boolean, isPayingCustomer: boolean, user: { __typename: 'User', id?: string | null, email: string, locked: boolean }, refereesForConfirmPurchase?: Array<{ __typename: 'Referee', id: string }> | null, latestNps?: { __typename: 'NPS', id: string, answer: number, feedback?: string | null } | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'MerchantCustomer'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"createdDate",value:{name:"string",required:!0}},{key:"userFullName",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"customerUsername",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"customerId",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"hashKey",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"lastPurchaseDate",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"isSuspicious",value:{name:"boolean",required:!0}},{key:"isReceivingEmails",value:{name:"boolean",required:!0}},{key:"isPayingCustomer",value:{name:"boolean",required:!0}},{key:"user",value:{name:"signature",type:"object",raw:"{ __typename: 'User', id?: string | null, email: string, locked: boolean }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'User'",required:!0}},{key:"id",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"email",value:{name:"string",required:!0}},{key:"locked",value:{name:"boolean",required:!0}}]},required:!0}},{key:"refereesForConfirmPurchase",value:{name:"union",raw:"Array<{ __typename: 'Referee', id: string }> | null",elements:[{name:"Array",elements:[{name:"signature",type:"object",raw:"{ __typename: 'Referee', id: string }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'Referee'",required:!0}},{key:"id",value:{name:"string",required:!0}}]}}],raw:"Array<{ __typename: 'Referee', id: string }>"},{name:"null"}],required:!1}},{key:"latestNps",value:{name:"union",raw:"{ __typename: 'NPS', id: string, answer: number, feedback?: string | null } | null",elements:[{name:"signature",type:"object",raw:"{ __typename: 'NPS', id: string, answer: number, feedback?: string | null }",signature:{properties:[{key:"__typename",value:{name:"literal",value:"'NPS'",required:!0}},{key:"id",value:{name:"string",required:!0}},{key:"answer",value:{name:"number",required:!0}},{key:"feedback",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}}]}},{name:"null"}],required:!1}}]}},description:""}}};let R={component:D,title:"Portal / Customer Profile / Confirm Purchase / Modal",parameters:{layout:"padded",msw:{handlers:[t.B.query("fetchMerchantCustomerConfirmPurchaseReferees",()=>i.Z.json({data:l}))]}},argTypes:{},args:{}},I=e=>{let{closeModal:r,isOpen:n,merchantCustomer:t}=e;return(0,a.jsx)(D,{isOpen:n,closeModal:r,merchantCustomer:t})},F=I.bind({});F.args={isOpen:!0,closeModal:()=>{console.log("closeModal")},merchantCustomer:{__typename:"MerchantCustomer",id:"123",userFullName:"Guy Fawkes",createdDate:new Date(2024,1,25,12,23,6).toISOString(),user:{__typename:"User",id:"511",email:"guy@anarchy.com",locked:!1},isPayingCustomer:!1,isSuspicious:!1,isReceivingEmails:!1}};let S=I.bind({});S.args=F.args,S.parameters={msw:{handlers:[t.B.query("fetchMerchantCustomerConfirmPurchaseReferees",()=>i.Z.json({data:d()}))]}};let T=I.bind({});T.args=F.args,T.parameters={msw:{handlers:[t.B.query("fetchMerchantCustomerConfirmPurchaseReferees",()=>i.Z.json({data:m()}))]}};let L=I.bind({});L.args=F.args,L.parameters={msw:{handlers:[t.B.query("fetchMerchantCustomerConfirmPurchaseReferees",()=>i.Z.json({data:s()}))]}};let U=I.bind({});U.args=F.args,U.parameters={msw:{handlers:[t.B.query("fetchMerchantCustomerConfirmPurchaseReferees",()=>i.Z.json({data:u()}))]}};let E=I.bind({});E.args=F.args,E.parameters={msw:{handlers:[t.B.query("fetchMerchantCustomerConfirmPurchaseReferees",()=>i.Z.json({data:o()}))]}},F.parameters={...F.parameters,docs:{...F.parameters?.docs,source:{originalSource:"({\n  closeModal,\n  isOpen,\n  merchantCustomer\n}) => {\n  return <ConfirmPurchaseModal isOpen={isOpen} closeModal={closeModal} merchantCustomer={merchantCustomer} />;\n}",...F.parameters?.docs?.source}}},S.parameters={...S.parameters,docs:{...S.parameters?.docs,source:{originalSource:"({\n  closeModal,\n  isOpen,\n  merchantCustomer\n}) => {\n  return <ConfirmPurchaseModal isOpen={isOpen} closeModal={closeModal} merchantCustomer={merchantCustomer} />;\n}",...S.parameters?.docs?.source}}},T.parameters={...T.parameters,docs:{...T.parameters?.docs,source:{originalSource:"({\n  closeModal,\n  isOpen,\n  merchantCustomer\n}) => {\n  return <ConfirmPurchaseModal isOpen={isOpen} closeModal={closeModal} merchantCustomer={merchantCustomer} />;\n}",...T.parameters?.docs?.source}}},L.parameters={...L.parameters,docs:{...L.parameters?.docs,source:{originalSource:"({\n  closeModal,\n  isOpen,\n  merchantCustomer\n}) => {\n  return <ConfirmPurchaseModal isOpen={isOpen} closeModal={closeModal} merchantCustomer={merchantCustomer} />;\n}",...L.parameters?.docs?.source}}},U.parameters={...U.parameters,docs:{...U.parameters?.docs,source:{originalSource:"({\n  closeModal,\n  isOpen,\n  merchantCustomer\n}) => {\n  return <ConfirmPurchaseModal isOpen={isOpen} closeModal={closeModal} merchantCustomer={merchantCustomer} />;\n}",...U.parameters?.docs?.source}}},E.parameters={...E.parameters,docs:{...E.parameters?.docs,source:{originalSource:"({\n  closeModal,\n  isOpen,\n  merchantCustomer\n}) => {\n  return <ConfirmPurchaseModal isOpen={isOpen} closeModal={closeModal} merchantCustomer={merchantCustomer} />;\n}",...E.parameters?.docs?.source}}}},"./src/client/customer/utilities/getApprovalId.ts":function(e,r,n){"use strict";n.d(r,{Z:function(){return a}});let a=e=>{let r;if(!(r="string"==typeof e?e:e.id))return"";let n=r.split("-");if(2!==n.length)throw Error(`Invalid approvable id: ${r}. Expected Approvable-ID, e.g. Referee-1234`);return n[1]}},"./src/shared/components/Chart/Chart.tsx":function(e,r,n){"use strict";n.d(r,{Z:()=>y});var a=n("../node_modules/react/jsx-runtime.js"),t=n("../node_modules/react/index.js"),i=n("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),l=n("../node_modules/styled-components/dist/styled-components.browser.esm.js"),s=n("./src/shared/components/Chart/ChartInternal.module.less?712b");let u=(0,t.lazy)(()=>Promise.all([n.e("2084"),n.e("7773"),n.e("6168"),n.e("3268"),n.e("7186"),n.e("2392"),n.e("6064"),n.e("1586"),n.e("6292"),n.e("4878"),n.e("1379"),n.e("3363"),n.e("4699"),n.e("247"),n.e("7847"),n.e("897"),n.e("4175"),n.e("7256"),n.e("1141"),n.e("4684"),n.e("4712"),n.e("9432"),n.e("4537")]).then(n.bind(n,"./src/shared/components/Chart/ChartInternal.tsx"))),o=(0,t.forwardRef)((e,r)=>{let{chartHeight:n,fallback:i,isLoading:l,...o}=e,m=i?(0,a.jsx)("div",{style:{height:n},children:i}):(0,a.jsx)("div",{className:s.Z.loading,style:{height:n}});return(0,a.jsx)(t.Suspense,{fallback:m,children:l?m:(0,a.jsx)(u,{ref:r,chartHeight:n,...o})})});o.__docgenInfo={description:"",methods:[],displayName:"LazyChart"};let m=l.ZP.div.withConfig({displayName:"ChartModal.styled__FallbackContainer"})(["height:80vh;.fallback{height:70vh;}"]),d=l.ZP.div.withConfig({displayName:"ChartModal.styled__Fallback"})(["height:70vh;"]),c=(0,l.ZP)(o).withConfig({displayName:"ChartModal.styled__Chart"})(["h3{font-weight:300;opacity:1;font-size:24px;padding-bottom:11px;}"]),p=e=>{let{config:r,data:n,annotations:t,amChartType:l,className:s,title:u,isOpen:o,isLoading:p,fallback:g,closeModal:y,openModal:_,shouldShowDownloadImage:f,...h}=e;return(0,a.jsx)(i.u_,{isOpen:o,onClose:y,modalVariant:"expanded",children:(0,a.jsxs)(i.u_.Content,{children:[(0,a.jsxs)(i.u_.Header,{children:[(0,a.jsx)(i.H5,{children:u}),(0,a.jsx)(i.u_.CloseButton,{})]}),(0,a.jsx)(i.u_.Body,{children:(0,a.jsx)(c,{isExpandMode:!0,className:s,config:r,data:n,annotations:t,amChartType:l,chartHeight:"75vh",openModal:_,isLoading:p,shouldShowDownloadImage:f,fallback:(0,a.jsx)(m,{children:(0,a.jsx)(d,{children:g})}),...h})})]})})};p.__docgenInfo={description:"",methods:[],displayName:"ChartModal",props:{config:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},description:""},data:{required:!1,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},annotations:{required:!1,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},amChartType:{required:!1,tsType:{name:"string"},description:""},chartHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},title:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""},subTitle:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""},isExpandMode:{required:!1,tsType:{name:"boolean"},description:""},openModal:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},shouldShowDownloadImage:{required:!1,tsType:{name:"boolean"},description:""},hasTogglableLegend:{required:!1,tsType:{name:"boolean"},description:""},isAnimated:{required:!1,tsType:{name:"boolean"},description:""},shouldShowHeader:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},fallback:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},closeModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}},composes:["Omit"]};let g=(0,t.forwardRef)((e,r)=>{let{config:n,data:i,annotations:l,amChartType:s,className:u,chartHeight:m,title:d,subTitle:c,fallback:g,isLoading:y,shouldShowDownloadImage:_=!0,...f}=e,[h,v]=(0,t.useState)(!1),k=()=>v(!0);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o,{className:u,config:n,data:i,annotations:l,amChartType:s,chartHeight:m,title:d,subTitle:c,openModal:k,fallback:g,isLoading:y,ref:r,shouldShowDownloadImage:_,...f}),(0,a.jsx)(p,{className:u,config:n,data:i,annotations:l,amChartType:s,title:d,isOpen:h,fallback:g,closeModal:()=>v(!1),openModal:k,isLoading:y,shouldShowDownloadImage:_,...f})]})}),y=g;g.__docgenInfo={description:"",methods:[],displayName:"Chart",props:{shouldShowDownloadImage:{defaultValue:{value:"true",computed:!1},required:!1}}}},"./src/shared/components/CustomerLink/CustomerLink.tsx":function(e,r,n){"use strict";n.d(r,{Z:function(){return m}});var a=n("../node_modules/react/jsx-runtime.js"),t=n("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),i=n("../node_modules/react-i18next/dist/es/index.js"),l=n("../node_modules/react-router-dom/esm/react-router-dom.js"),s=n("./src/shared/hooks/index.ts"),u=n("./src/shared/utilities/index.ts");let o=e=>{var r,n,o,m;let{merchantCustomer:d}=e,{t:c}=(0,i.$G)("customer"),{merchantId:p,userId:g}=(0,s.rc)();if(!d)return(0,a.jsx)(a.Fragment,{children:c("link.unknown","an unknown customer")});let y=(null==d?void 0:d.userFullName)?`${d.userFullName} - ${null==d?void 0:null===(r=d.user)||void 0===r?void 0:r.email}`:null==d?void 0:null===(n=d.user)||void 0===n?void 0:n.email;return g===d.user.id?(0,a.jsx)(a.Fragment,{children:y}):(0,a.jsx)(t.BY,{as:l.OL,to:(0,u.nu)("fe_merchant_customers_profile",{merchantId:p,userId:null==d?void 0:null===(o=d.user)||void 0===o?void 0:o.id}),"data-customer-id":null==d?void 0:d.id,"data-user-id":null==d?void 0:null===(m=d.user)||void 0===m?void 0:m.id,children:y})},m=o;o.__docgenInfo={description:"",methods:[],displayName:"CustomerLink",props:{merchantCustomer:{required:!0,tsType:{name:"union",raw:'| Maybe<Pick<MerchantCustomer, "id" | "userFullName"> & { user: Pick<User, "id" | "email"> }>\n| undefined',elements:[{name:"union",raw:"T | null",elements:[{name:"intersection",raw:'Pick<MerchantCustomer, "id" | "userFullName"> & { user: Pick<User, "id" | "email"> }',elements:[{name:"Pick",elements:[{name:"MerchantCustomer"},{name:"union",raw:'"id" | "userFullName"',elements:[{name:"literal",value:'"id"'},{name:"literal",value:'"userFullName"'}]}],raw:'Pick<MerchantCustomer, "id" | "userFullName">'},{name:"signature",type:"object",raw:'{ user: Pick<User, "id" | "email"> }',signature:{properties:[{key:"user",value:{name:"Pick",elements:[{name:"User"},{name:"union",raw:'"id" | "email"',elements:[{name:"literal",value:'"id"'},{name:"literal",value:'"email"'}]}],raw:'Pick<User, "id" | "email">',required:!0}}]}}]},{name:"null"}]},{name:"undefined"}]},description:""}}}},"./src/shared/components/DateFormat/index.ts":function(e,r,n){"use strict";n.d(r,{Z:()=>o});var a=n("../node_modules/react/jsx-runtime.js"),t=n("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),i=n("../node_modules/react/index.js"),l=n("../node_modules/react-i18next/dist/es/index.js");let s=e=>{let{date:r,updateFrequency:n}=e,{t:s}=(0,l.$G)("shared"),[u,o]=(0,i.useState)(Date.now());(0,i.useEffect)(()=>{let e;return n&&(e=setInterval(()=>{o(Date.now())},n)),()=>{e&&clearInterval(e)}},[n]);let m=new Date(r).getTime(),d=Math.floor((u-m)/1e3),c="",p="some time ago";u<=m&&(d=Math.floor((m-u)/1e3),c=".future",p="in a bit");let g=Math.floor(d/60),y=Math.floor(g/60),_=Math.floor(y/24),f=Math.floor(_/30),h=Math.floor(_/365),v=s(`shared:date.fromNow${c}.justNow`,p);return h>0?v=s(`shared:date.fromNow${c}.year`,p,{count:h}):f>0?v=s(`shared:date.fromNow${c}.month`,p,{count:f}):_>0&&_<7?v=s(`shared:date.fromNow${c}.days_and_hours`,p,{days:_,hours:y%24}):_>=7?v=s(`shared:date.fromNow${c}.day`,p,{count:_}):y>0?v=s(`shared:date.fromNow${c}.hour`,p,{count:y}):g>0?v=s(`shared:date.fromNow${c}.minute`,p,{count:g}):d>0&&(v=s(`shared:date.fromNow${c}.second`,p,{count:d})),(0,i.useMemo)(()=>(0,a.jsx)(t.u,{tooltip:(0,t.k2)(r),children:(0,a.jsx)("span",{children:v})}),[v,r])},u=e=>{let{variant:r,date:n,format:i,useDateIfOlderThan:l=864e5,shouldUpdateEverySecond:u}=e;if(!n)return null;let o=new Date(n);if(o){if("fromNow"===r){let e=new Date().getTime(),r=o.getTime();if(!l||e-r<l)return(0,a.jsx)(s,{date:o,updateFrequency:u?1e3:0})}return(0,a.jsx)(a.Fragment,{children:(0,t.p6)(n,i?{notation:"custom",format:i}:{notation:"short"})})}return null};u.__docgenInfo={description:"",methods:[],displayName:"DateFormat",props:{date:{required:!1,tsType:{name:"union",raw:"T | null",elements:[{name:"union",raw:"Date | string",elements:[{name:"Date"},{name:"string"}]},{name:"null"}]},description:""},format:{required:!1,tsType:{name:"string"},description:""},variant:{required:!1,tsType:{name:"literal",value:'"fromNow"'},description:""},useDateIfOlderThan:{required:!1,tsType:{name:"number"},description:'If the number of milliseconds is greater than this, we\'ll just display the date and not do the "fromNow" bit.\n\nIt\'s sometimes not very helpful to display "1 month ago", and easier to display "7th Jan".',defaultValue:{value:"86400000",computed:!1}},shouldUpdateEverySecond:{required:!1,tsType:{name:"boolean"},description:"Should we re-render this component every second? By default, we won't - but in places where it's useful to show\ntime progressing (e.g. a page that live renders recent data) it's useful to set this."}}};let o=u},"../node_modules/classnames/index.js":function(e){!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var i=arguments[t];i&&(e=a(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var i in e)r.call(e,i)&&e[i]&&(t=a(t,i));return t}(i)))}return e}function a(e,r){return r?e?e+" "+r:e+r:e}e.exports?(n.default=n,e.exports=n):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return n}):window.classNames=n}()},"../node_modules/msw/lib/core/graphql.mjs":function(e,r,n){"use strict";n.d(r,{B:()=>b});var a=n("../node_modules/msw/lib/core/handlers/RequestHandler.mjs"),t=n("../node_modules/msw/lib/core/utils/logging/getTimestamp.mjs"),i=n("../node_modules/msw/lib/core/utils/logging/getStatusCodeColor.mjs"),l=n("../node_modules/msw/lib/core/utils/logging/serializeRequest.mjs"),s=n("../node_modules/msw/lib/core/utils/logging/serializeResponse.mjs"),u=n("../node_modules/msw/lib/core/utils/matching/matchRequestUrl.mjs"),o=n("../node_modules/msw/lib/core/utils/request/toPublicUrl.mjs"),m=n("../node_modules/msw/lib/core/utils/internal/devUtils.mjs");function d(e){try{return JSON.parse(e)}catch{return}}var c=n("../node_modules/headers-polyfill/lib/index.mjs");function p(e){let r=e.definitions.find(e=>"OperationDefinition"===e.kind);return{operationType:r?.operation,operationName:r?.name?.value}}async function g(e){let{parse:r}=await n.e("8055").then(n.bind(n,"../node_modules/msw/node_modules/graphql/index.mjs")).catch(e=>{throw console.error('[MSW] Failed to parse a GraphQL query: cannot import the "graphql" module. Please make sure you install it if you wish to intercept GraphQL requests. See the original import error below.'),e});try{let n=r(e);return p(n)}catch(e){return e}}async function y(e){switch(e.method){case"GET":{let r=new URL(e.url),n=r.searchParams.get("query");return{query:n,variables:d(r.searchParams.get("variables")||"")}}case"POST":{let r=e.clone();if(e.headers.get("content-type")?.includes("multipart/form-data")){let n=function(e,r){let n=r?.get("content-type");if(!n)return;let[,...a]=n.split(/; */),t=a.filter(e=>e.startsWith("boundary=")).map(e=>e.replace(/^boundary=/,""))[0];if(!t)return;let i=RegExp(`--+${t}`),l=e.split(i).filter(e=>e.startsWith("\r\n")&&e.endsWith("\r\n")).map(e=>e.trimStart().replace(/\r\n$/,""));if(!l.length)return;let s={};try{for(let e of l){let[r,...n]=e.split("\r\n\r\n"),a=n.join("\r\n\r\n"),{contentType:t,filename:i,name:l}=function(e){let r=(0,c.$M)(e),n=r.get("content-type")||"text/plain",a=r.get("content-disposition");if(!a)throw Error('"Content-Disposition" header is required.');let t=a.split(";").reduce((e,r)=>{let[n,...a]=r.trim().split("=");return e[n]=a.join("="),e},{}),i=t.name?.slice(1,-1);return{name:i,filename:t.filename?.slice(1,-1),contentType:n}}(r),u=void 0===i?a:new File([a],i,{type:t}),o=s[l];void 0===o?s[l]=u:Array.isArray(o)?s[l]=[...o,u]:s[l]=[o,u]}return s}catch{return}}(await r.text(),e.headers);if(!n)return null;let{operations:a,map:t,...i}=n,l=d(a)||{};if(!l.query)return null;let s=d(t||"")||{},u=l.variables?function(e,r,n){let a={variables:e};for(let[e,t]of Object.entries(r)){if(!(e in n))throw Error(`Given files do not have a key '${e}' .`);for(let r of t){let[t,...i]=r.split(".").reverse(),l=i.reverse(),s=a;for(let e of l){if(!(e in s))throw Error(`Property '${l}' is not in operations.`);s=s[e]}s[t]=n[e]}}return a.variables}(l.variables,s,i):{};return{query:l.query,variables:u}}let n=await r.json().catch(()=>null);if(n?.query){let{query:e,variables:r}=n;return{query:e,variables:r}}}default:return null}}async function _(e){let r=await y(e);if(!r||!r.query)return;let{query:n,variables:a}=r,t=await g(n);if(t instanceof Error){let r=(0,o.F)(e.url);throw Error(m.e.formatMessage('Failed to intercept a GraphQL request to "%s %s": cannot parse query. See the error message from the parser below.\n\n%s',e.method,r,t.message))}return{query:r.query,operationType:t.operationType,operationName:t.operationName,variables:a}}var f=n("../node_modules/msw/lib/core/utils/request/getRequestCookies.mjs");class h extends a.Z{endpoint;static parsedRequestCache=new WeakMap;constructor(e,r,n,a,t){var i;let l=r;if(null!=(i=r)&&"object"==typeof i&&"kind"in i&&"definitions"in i){let n=p(r);if(n.operationType!==e)throw Error(`Failed to create a GraphQL handler: provided a DocumentNode with a mismatched operation type (expected "${e}", but got "${n.operationType}").`);if(!n.operationName)throw Error("Failed to create a GraphQL handler: provided a DocumentNode with no operation name.");l=n.operationName}super({info:{header:"all"===e?`${e} (origin: ${n.toString()})`:`${e} ${l} (origin: ${n.toString()})`,operationType:e,operationName:l},resolver:a,options:t}),this.endpoint=n}async parseGraphQLRequestOrGetFromCache(e){return!h.parsedRequestCache.has(e)&&h.parsedRequestCache.set(e,await _(e).catch(e=>{console.error(e)})),h.parsedRequestCache.get(e)}async parse(e){let r=(0,u.R)(new URL(e.request.url),this.endpoint),n=(0,f.B)(e.request);if(!r.matches)return{match:r,cookies:n};let a=await this.parseGraphQLRequestOrGetFromCache(e.request);return void 0===a?{match:r,cookies:n}:{match:r,cookies:n,query:a.query,operationType:a.operationType,operationName:a.operationName,variables:a.variables}}predicate(e){if(void 0===e.parsedResult.operationType)return!1;if(!e.parsedResult.operationName&&"all"!==this.info.operationType){let r=(0,o.F)(e.request.url);return m.e.warn(`Failed to intercept a GraphQL request at "${e.request.method} ${r}": anonymous GraphQL operations are not supported.

Consider naming this operation or using "graphql.operation()" request handler to intercept GraphQL requests regardless of their operation name/type. Read more: https://mswjs.io/docs/api/graphql/#graphqloperationresolver`),!1}let r="all"===this.info.operationType||e.parsedResult.operationType===this.info.operationType,n=this.info.operationName instanceof RegExp?this.info.operationName.test(e.parsedResult.operationName||""):e.parsedResult.operationName===this.info.operationName;return e.parsedResult.match.matches&&r&&n}extendResolverArgs(e){return{query:e.parsedResult.query||"",operationName:e.parsedResult.operationName||"",variables:e.parsedResult.variables||{},cookies:e.parsedResult.cookies}}async log(e){let r=await (0,l.Y)(e.request),n=await (0,s.X)(e.response),a=(0,i.m)(n.status),u=e.parsedResult.operationName?`${e.parsedResult.operationType} ${e.parsedResult.operationName}`:`anonymous ${e.parsedResult.operationType}`;console.groupCollapsed(m.e.formatMessage(`${(0,t.u)()} ${u} (%c${n.status} ${n.statusText}%c)`),`color:${a}`,"color:inherit"),console.log("Request:",r),console.log("Handler:",this),console.log("Response:",n),console.groupEnd()}}function v(e,r){return(n,a,t={})=>new h(e,n,r,a,t)}function k(e){return r=>new h("all",RegExp(".*"),e,r)}let C={query:v("query","*"),mutation:v("mutation","*"),operation:k("*")},b={...C,link:function(e){return{operation:k(e),query:v("query",e),mutation:v("mutation",e)}}}}}]);
//# sourceMappingURL=client-customer-profile-components-CustomerProfileActions-components-components-ConfirmPurchaseModal-stories.7b005129.iframe.bundle.js.map