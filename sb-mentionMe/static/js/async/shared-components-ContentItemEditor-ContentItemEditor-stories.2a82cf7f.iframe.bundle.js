"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["9022"],{"./src/shared/components/ContentItemEditor/ContentItemEditor.stories.tsx":function(e,t,r){r.r(t),r.d(t,{Base:()=>d,default:()=>c});var a=r("../node_modules/react/jsx-runtime.js"),n=r("../node_modules/msw/lib/core/graphql.mjs"),o=r("../node_modules/msw/lib/core/HttpResponse.mjs"),s=r("./src/shared/context/PlaceholdersContext.tsx"),i=r("./src/shared/@types/graphql.ts");let l={__typename:"Query",contentItemByTag:{__typename:"ContentItemEditable",id:"110599258",content:"Tell them in person",tag:"share-wom-header",lastEditedDate:"1674737284",lastRetrievedDate:"1681290862",template:"Tell them in person",stripMarkup:!1,alternativeEditable:null,personalisationTags:[{__typename:"Placeholder",tag:"user-fullname",value:"Charmaine Tannen"},{__typename:"Placeholder",tag:"user-firstname",value:"Charmaine"},{__typename:"Placeholder",tag:"user-surname",value:"Tannen"},{__typename:"Placeholder",tag:"user-lastname",value:"Tannen"},{__typename:"Placeholder",tag:"user-formal-name",value:"Charmaine Tannen"},{__typename:"Placeholder",tag:"user-email",value:"charmainetannen220@mention-me.com"},{__typename:"Placeholder",tag:"user-username",value:""},{__typename:"Placeholder",tag:"user-referral-code",value:"CHATAN464"}],referencedTags:[{__typename:"Placeholder",tag:"referee-reward-amount",value:'<span class="nobreak">10%</span>'},{__typename:"Placeholder",tag:"referrer-reward-amount",value:'<span class="nobreak">10%</span>'}],isDefault:!0,isOverridable:!0,specialRules:["You can use HTML tags within this item","Carriage returns are allowed in this item"]}},u={__typename:"Query",placeholders:[{__typename:"Placeholder",tag:"user-fullname",value:"Charmaine Tannen"},{__typename:"Placeholder",tag:"user-firstname",value:"Charmaine"},{__typename:"Placeholder",tag:"user-surname",value:"Tannen"},{__typename:"Placeholder",tag:"user-lastname",value:"Tannen"},{__typename:"Placeholder",tag:"user-formal-name",value:"Charmaine Tannen"},{__typename:"Placeholder",tag:"user-email",value:"charmainetannen220@mention-me.com"},{__typename:"Placeholder",tag:"user-username",value:""},{__typename:"Placeholder",tag:"user-referral-code",value:"CHATAN464"}]};var p=r("./src/shared/components/ContentItemEditor/ContentItemEditor.tsx");let m={title:"Shared / ContentItemEditor",component:p.Z,parameters:{msw:{handlers:[n.B.query("fetchContentItem",()=>o.Z.json({data:l})),n.B.query("fetchPlaceholders",()=>o.Z.json({data:u}))]}},args:{tag:"referrer-title",contentItemContext:i.dY.Sharing,offerId:"1",title:"Share title copy",clearAll:"Clear title copy",onChange:e=>console.log(e)},render:e=>(0,a.jsx)(s.h,{offerId:e.offerId,children:(0,a.jsx)(p.Z,{...e})})},d={},c=m;d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:"{} satisfies Story",...d.parameters?.docs?.source}}}},"../node_modules/msw/lib/core/graphql.mjs":function(e,t,r){r.d(t,{B:()=>b});var a=r("../node_modules/msw/lib/core/handlers/RequestHandler.mjs"),n=r("../node_modules/msw/lib/core/utils/logging/getTimestamp.mjs"),o=r("../node_modules/msw/lib/core/utils/logging/getStatusCodeColor.mjs"),s=r("../node_modules/msw/lib/core/utils/logging/serializeRequest.mjs"),i=r("../node_modules/msw/lib/core/utils/logging/serializeResponse.mjs"),l=r("../node_modules/msw/lib/core/utils/matching/matchRequestUrl.mjs"),u=r("../node_modules/msw/lib/core/utils/request/toPublicUrl.mjs"),p=r("../node_modules/msw/lib/core/utils/internal/devUtils.mjs");function m(e){try{return JSON.parse(e)}catch{return}}var d=r("../node_modules/headers-polyfill/lib/index.mjs");function c(e){let t=e.definitions.find(e=>"OperationDefinition"===e.kind);return{operationType:t?.operation,operationName:t?.name?.value}}async function h(e){let{parse:t}=await r.e("8055").then(r.bind(r,"../node_modules/msw/node_modules/graphql/index.mjs")).catch(e=>{throw console.error('[MSW] Failed to parse a GraphQL query: cannot import the "graphql" module. Please make sure you install it if you wish to intercept GraphQL requests. See the original import error below.'),e});try{let r=t(e);return c(r)}catch(e){return e}}async function f(e){switch(e.method){case"GET":{let t=new URL(e.url),r=t.searchParams.get("query");return{query:r,variables:m(t.searchParams.get("variables")||"")}}case"POST":{let t=e.clone();if(e.headers.get("content-type")?.includes("multipart/form-data")){let r=function(e,t){let r=t?.get("content-type");if(!r)return;let[,...a]=r.split(/; */),n=a.filter(e=>e.startsWith("boundary=")).map(e=>e.replace(/^boundary=/,""))[0];if(!n)return;let o=RegExp(`--+${n}`),s=e.split(o).filter(e=>e.startsWith("\r\n")&&e.endsWith("\r\n")).map(e=>e.trimStart().replace(/\r\n$/,""));if(!s.length)return;let i={};try{for(let e of s){let[t,...r]=e.split("\r\n\r\n"),a=r.join("\r\n\r\n"),{contentType:n,filename:o,name:s}=function(e){let t=(0,d.$M)(e),r=t.get("content-type")||"text/plain",a=t.get("content-disposition");if(!a)throw Error('"Content-Disposition" header is required.');let n=a.split(";").reduce((e,t)=>{let[r,...a]=t.trim().split("=");return e[r]=a.join("="),e},{}),o=n.name?.slice(1,-1);return{name:o,filename:n.filename?.slice(1,-1),contentType:r}}(t),l=void 0===o?a:new File([a],o,{type:n}),u=i[s];void 0===u?i[s]=l:Array.isArray(u)?i[s]=[...u,l]:i[s]=[u,l]}return i}catch{return}}(await t.text(),e.headers);if(!r)return null;let{operations:a,map:n,...o}=r,s=m(a)||{};if(!s.query)return null;let i=m(n||"")||{},l=s.variables?function(e,t,r){let a={variables:e};for(let[e,n]of Object.entries(t)){if(!(e in r))throw Error(`Given files do not have a key '${e}' .`);for(let t of n){let[n,...o]=t.split(".").reverse(),s=o.reverse(),i=a;for(let e of s){if(!(e in i))throw Error(`Property '${s}' is not in operations.`);i=i[e]}i[n]=r[e]}}return a.variables}(s.variables,i,o):{};return{query:s.query,variables:l}}let r=await t.json().catch(()=>null);if(r?.query){let{query:e,variables:t}=r;return{query:e,variables:t}}}default:return null}}async function y(e){let t=await f(e);if(!t||!t.query)return;let{query:r,variables:a}=t,n=await h(r);if(n instanceof Error){let t=(0,u.F)(e.url);throw Error(p.e.formatMessage('Failed to intercept a GraphQL request to "%s %s": cannot parse query. See the error message from the parser below.\n\n%s',e.method,t,n.message))}return{query:t.query,operationType:n.operationType,operationName:n.operationName,variables:a}}var g=r("../node_modules/msw/lib/core/utils/request/getRequestCookies.mjs");class _ extends a.Z{endpoint;static parsedRequestCache=new WeakMap;constructor(e,t,r,a,n){var o;let s=t;if(null!=(o=t)&&"object"==typeof o&&"kind"in o&&"definitions"in o){let r=c(t);if(r.operationType!==e)throw Error(`Failed to create a GraphQL handler: provided a DocumentNode with a mismatched operation type (expected "${e}", but got "${r.operationType}").`);if(!r.operationName)throw Error("Failed to create a GraphQL handler: provided a DocumentNode with no operation name.");s=r.operationName}super({info:{header:"all"===e?`${e} (origin: ${r.toString()})`:`${e} ${s} (origin: ${r.toString()})`,operationType:e,operationName:s},resolver:a,options:n}),this.endpoint=r}async parseGraphQLRequestOrGetFromCache(e){return!_.parsedRequestCache.has(e)&&_.parsedRequestCache.set(e,await y(e).catch(e=>{console.error(e)})),_.parsedRequestCache.get(e)}async parse(e){let t=(0,l.R)(new URL(e.request.url),this.endpoint),r=(0,g.B)(e.request);if(!t.matches)return{match:t,cookies:r};let a=await this.parseGraphQLRequestOrGetFromCache(e.request);return void 0===a?{match:t,cookies:r}:{match:t,cookies:r,query:a.query,operationType:a.operationType,operationName:a.operationName,variables:a.variables}}predicate(e){if(void 0===e.parsedResult.operationType)return!1;if(!e.parsedResult.operationName&&"all"!==this.info.operationType){let t=(0,u.F)(e.request.url);return p.e.warn(`Failed to intercept a GraphQL request at "${e.request.method} ${t}": anonymous GraphQL operations are not supported.

Consider naming this operation or using "graphql.operation()" request handler to intercept GraphQL requests regardless of their operation name/type. Read more: https://mswjs.io/docs/api/graphql/#graphqloperationresolver`),!1}let t="all"===this.info.operationType||e.parsedResult.operationType===this.info.operationType,r=this.info.operationName instanceof RegExp?this.info.operationName.test(e.parsedResult.operationName||""):e.parsedResult.operationName===this.info.operationName;return e.parsedResult.match.matches&&t&&r}extendResolverArgs(e){return{query:e.parsedResult.query||"",operationName:e.parsedResult.operationName||"",variables:e.parsedResult.variables||{},cookies:e.parsedResult.cookies}}async log(e){let t=await (0,s.Y)(e.request),r=await (0,i.X)(e.response),a=(0,o.m)(r.status),l=e.parsedResult.operationName?`${e.parsedResult.operationType} ${e.parsedResult.operationName}`:`anonymous ${e.parsedResult.operationType}`;console.groupCollapsed(p.e.formatMessage(`${(0,n.u)()} ${l} (%c${r.status} ${r.statusText}%c)`),`color:${a}`,"color:inherit"),console.log("Request:",t),console.log("Handler:",this),console.log("Response:",r),console.groupEnd()}}function q(e,t){return(r,a,n={})=>new _(e,r,t,a,n)}function w(e){return t=>new _("all",RegExp(".*"),e,t)}let v={query:q("query","*"),mutation:q("mutation","*"),operation:w("*")},b={...v,link:function(e){return{operation:w(e),query:q("query",e),mutation:q("mutation",e)}}}}}]);
//# sourceMappingURL=shared-components-ContentItemEditor-ContentItemEditor-stories.2a82cf7f.iframe.bundle.js.map