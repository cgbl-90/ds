"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["2890"],{"../node_modules/mermaid/dist/stateDiagram-v2-6c43c13a.js":function(e,t,s){s.d(t,{diagram:function(){return R}});var d=s("../node_modules/mermaid/dist/styles-de3becd0.js"),i=s("../node_modules/dagre-d3-es/src/graphlib/index.js"),o=s("../node_modules/d3/src/index.js"),r=s("../node_modules/mermaid/dist/mermaid-2490e8f2.js"),a=s("../node_modules/mermaid/dist/index-9620d214.js");s("../node_modules/dayjs/dayjs.min.js"),s("../node_modules/@braintree/sanitize-url/dist/index.js"),s("../node_modules/mermaid/node_modules/dompurify/dist/purify.js"),s("../node_modules/dagre-d3-es/src/dagre/index.js"),s("../node_modules/dagre-d3-es/src/graphlib/json.js");let l="rect",n="rectWithTitle",c="statediagram",p=`${c}-state`,g="transition",b=`${g} note-edge`,u=`${c}-note`,m=`${c}-cluster`,h=`${c}-cluster-alt`,y="parent",f="note",x="----",w=`${x}${f}`,$=`${x}${y}`,T="fill:none",_="fill: #333",j="text",S="normal",k={},D=0;function A(e="",t=0,s="",d=x){let i=null!==s&&s.length>0?`${d}${s}`:"";return`state-${e}${i}-${t}`}let v=(e,t,s,i,o,a)=>{var c;let g=s.id;let x=null==(c=i[g])?"":c.classes?c.classes.join(" "):"";if("root"!==g){let t=l;!0===s.start&&(t="start"),!1===s.start&&(t="end"),s.type!==d.D&&(t=s.type),!k[g]&&(k[g]={id:g,shape:t,description:r.e.sanitizeText(g,(0,r.c)()),classes:`${x} ${p}`});let i=k[g];s.description&&(Array.isArray(i.description)?(i.shape=n,i.description.push(s.description)):i.description.length>0?(i.shape=n,i.description===g?i.description=[s.description]:i.description=[i.description,s.description]):(i.shape=l,i.description=s.description),i.description=r.e.sanitizeTextOrArray(i.description,(0,r.c)())),1===i.description.length&&i.shape===n&&(i.shape=l),!i.type&&s.doc&&(r.l.info("Setting cluster for ",g,C(s)),i.type="group",i.dir=C(s),i.shape=s.type===d.a?"divider":"roundedWithTitle",i.classes=i.classes+" "+m+" "+(a?h:""));let o={labelStyle:"",shape:i.shape,labelText:i.description,classes:i.classes,style:"",id:g,dir:i.dir,domId:A(g,D),type:i.type,padding:15};if(o.centerLabel=!0,s.note){let t={labelStyle:"",shape:"note",labelText:s.note.text,classes:u,style:"",id:g+w+"-"+D,domId:A(g,D,f),type:i.type,padding:15},d={labelStyle:"",shape:"noteGroup",labelText:s.note.text,classes:i.classes,style:"",id:g+$,domId:A(g,D,y),type:"group",padding:0};D++;let r=g+$;e.setNode(r,d),e.setNode(t.id,t),e.setNode(g,o),e.setParent(g,r),e.setParent(t.id,r);let a=g,l=t.id;"left of"===s.note.position&&(a=t.id,l=g),e.setEdge(a,l,{arrowhead:"none",arrowType:"",style:T,labelStyle:"",classes:b,arrowheadStyle:_,labelpos:"c",labelType:j,thickness:S})}else e.setNode(g,o)}t&&"root"!==t.id&&(r.l.trace("Setting node ",g," to be child of its parent ",t.id),e.setParent(g,t.id)),s.doc&&(r.l.trace("Adding nodes children "),B(e,s,s.doc,i,o,!a))},B=(e,t,s,i,o,a)=>{r.l.trace("items",s),s.forEach(s=>{switch(s.stmt){case d.b:case d.D:v(e,t,s,i,o,a);break;case d.S:{v(e,t,s.state1,i,o,a),v(e,t,s.state2,i,o,a);let d={id:"edge"+D,arrowhead:"normal",arrowTypeEnd:"arrow_barb",style:T,labelStyle:"",label:r.e.sanitizeText(s.description,(0,r.c)()),arrowheadStyle:_,labelpos:"c",labelType:j,thickness:S,classes:g};e.setEdge(s.state1.id,s.state2.id,d,D),D++}}})},C=(e,t=d.c)=>{let s=t;if(e.doc)for(let t=0;t<e.doc.length;t++){let d=e.doc[t];"dir"===d.stmt&&(s=d.value)}return s},E=async function(e,t,s,d){let n;r.l.info("Drawing state diagram (v2)",t),k={},d.db.getDirection();let{securityLevel:p,state:g}=(0,r.c)(),b=g.nodeSpacing||50,u=g.rankSpacing||50;r.l.info(d.db.getRootDocV2()),d.db.extract(d.db.getRootDocV2()),r.l.info(d.db.getRootDocV2());let m=d.db.getStates(),h=new i.k({multigraph:!0,compound:!0}).setGraph({rankdir:C(d.db.getRootDocV2()),nodesep:b,ranksep:u,marginx:8,marginy:8}).setDefaultEdgeLabel(function(){return{}});v(h,void 0,d.db.getRootDocV2(),m,d.db,!0),"sandbox"===p&&(n=(0,o.Ys)("#i"+t));let y="sandbox"===p?(0,o.Ys)(n.nodes()[0].contentDocument.body):(0,o.Ys)("body"),f=y.select(`[id="${t}"]`),x=y.select("#"+t+" g");await (0,a.r)(x,h,["barb"],c,t);r.u.insertTitle(f,"statediagramTitleText",g.titleTopMargin,d.db.getDiagramTitle());let w=f.node().getBBox(),$=w.width+16,T=w.height+16;f.attr("class",c);let _=f.node().getBBox();(0,r.i)(f,T,$,g.useMaxWidth);let j=`${_.x-8} ${_.y-8} ${$} ${T}`;for(let e of(r.l.debug(`viewBox ${j}`),f.attr("viewBox",j),document.querySelectorAll('[id="'+t+'"] .edgeLabel .label'))){let t=e.getBBox(),s=document.createElementNS("http://www.w3.org/2000/svg",l);s.setAttribute("rx",0),s.setAttribute("ry",0),s.setAttribute("width",t.width),s.setAttribute("height",t.height),e.insertBefore(s,e.firstChild)}},R={parser:d.p,db:d.d,renderer:{setConf:function(e){for(let t of Object.keys(e))e[t]},getClasses:function(e,t){return t.db.extract(t.db.getRootDocV2()),t.db.getClasses()},draw:E},styles:d.s,init:e=>{!e.state&&(e.state={}),e.state.arrowMarkerAbsolute=e.arrowMarkerAbsolute,d.d.clear()}}}}]);