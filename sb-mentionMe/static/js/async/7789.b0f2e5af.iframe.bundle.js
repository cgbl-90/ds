"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["7789"],{"./src/consumer/journey/App.stories.less?d569":function(){},"./src/consumer/journey/components/ContentItem.tsx":function(e,_,o){o.d(_,{Z:()=>O});var r=o("../node_modules/react/jsx-runtime.js"),n=o("../node_modules/classnames/index.js"),t=o.n(n),s=o("./src/shared/constants/preview.ts");o("../node_modules/react/index.js");let c=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",style:{enableBackground:"new 0 0 14 14"},viewBox:"0 0 14 14",...e,children:(0,r.jsx)("path",{d:"M12.2 2.7c.3-.3.3-.7 0-.9L10.7.3c-.3-.3-.7-.3-1-.1L8.5 1.5 11 4l1.2-1.3zm-1.9 2L7.8 2.2.5 9.5V12H3l7.3-7.3zM.5 13v1h13v-1H.5z",style:{fillRule:"evenodd",clipRule:"evenodd"}})});var E=o("./src/consumer/journey/hooks/useContentItem.tsx"),a=o("./src/consumer/journey/hooks/useJourneyData.tsx"),i=o("./src/consumer/journey/utilities/events.ts");let u={edit:"edit-AyCcsu",pencil:"pencil-KSLD5o",hasNoWrapper:"hasNoWrapper-QZByQX"},f=e=>{let{tag:_,hasNoWrapper:o=!1,subOfferId:n,_previewMode:f}=e,{previewMode:O}=(0,a.Z)(),{contentItem:l,parsedContent:R}=(0,E.Z)(_,n),d=R,T=f?f===s.i4.EDIT:O===s.i4.EDIT;if(T||!o){let e=T?{onClick:e=>{T&&l&&(e.preventDefault(),e.stopPropagation(),(0,i.wz)(l,n))},role:"button",tabIndex:0}:{};d=(0,r.jsxs)("span",{className:t()({[u.edit]:T,[u.hasNoWrapper]:o}),...e,children:[d,T&&(0,r.jsx)("span",{className:u.pencil,children:(0,r.jsx)(c,{})})]})}return o?(0,r.jsx)(r.Fragment,{children:d}):(0,r.jsx)("div",{className:"mm-text","data-auto-class":"mm-text-wrapper",children:d})},O=f;f.__docgenInfo={description:"",methods:[],displayName:"ContentItem",props:{tag:{required:!0,tsType:{name:"union",raw:"| GLOBAL_CONTENT_ITEMS\n| REFERRER_CONTENT_ITEMS\n| IFA_CONTENT_ITEMS\n| NPS_CONTENT_ITEMS\n| CHOICE_OF_OFFER_CONTENT_ITEMS\n| CUSTOMER_ORIGIN_SURVEY_CONTENT_ITEMS\n| CUSTOMER_ORIGIN_SURVEY_ANSWERS",elements:[{name:"GLOBAL_CONTENT_ITEMS"},{name:"REFERRER_CONTENT_ITEMS"},{name:"IFA_CONTENT_ITEMS"},{name:"NPS_CONTENT_ITEMS"},{name:"CHOICE_OF_OFFER_CONTENT_ITEMS"},{name:"CUSTOMER_ORIGIN_SURVEY_CONTENT_ITEMS"},{name:"union",raw:"| CUSTOMER_ORIGIN_SURVEY_ANSWERS_WITHOUT_OTHER\n| CUSTOMER_ORIGIN_SURVEY_CONTENT_ITEMS.COS_ANSWER_OTHER",elements:[{name:"CUSTOMER_ORIGIN_SURVEY_ANSWERS_WITHOUT_OTHER"},{name:"CUSTOMER_ORIGIN_SURVEY_CONTENT_ITEMS.COS_ANSWER_OTHER"}]}]},description:""},hasNoWrapper:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},subOfferId:{required:!1,tsType:{name:"string"},description:""},_previewMode:{required:!1,tsType:{name:"PREVIEW_MODE"},description:""}}}},"./src/consumer/journey/hooks/JourneyContext.tsx":function(e,_,o){o.d(_,{Lz:function(){return u},Nk:function(){return O},o2:function(){return d}});var r,n,t=o("../node_modules/react/jsx-runtime.js"),s=o("../node_modules/react/index.js"),c=o("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),E=o("../node_modules/immer/dist/immer.mjs"),a=o("./src/consumer/journey/hooks/useJourneyData.tsx");(r=n||(n={}))[r.SET_CONTENT_ITEM=0]="SET_CONTENT_ITEM",r[r.SET_FIRSTNAME=1]="SET_FIRSTNAME",r[r.SET_SURNAME=2]="SET_SURNAME",r[r.SET_EMAIL=3]="SET_EMAIL",r[r.SET_USER_SAVED=4]="SET_USER_SAVED",r[r.SET_STEP=5]="SET_STEP";let[i,u]=(0,c.kr)({hookName:"useJourneyState",providerName:"JourneyProvider"}),[f,O]=(0,c.kr)({hookName:"useJourneyDispatch",providerName:"JourneyProvider"}),l=(0,E.Uy)((e,_)=>{switch(_.type){case 0:var o,r;let n=null===(o=_.payload.contentItem.tag)||void 0===o?void 0:o.replace(/-/g,"_");n&&((null===(r=e.contentItems[n])||void 0===r?void 0:r.id)===_.payload.contentItem.id?e.contentItems[n]=_.payload.contentItem:Object.entries(e.contentItems.subOffers||{}).forEach(e=>{var o;let[,r]=e;(null===(o=r[n])||void 0===o?void 0:o.id)===_.payload.contentItem.id&&(r[n]=_.payload.contentItem)}));break;case 1:e.user.firstname=_.payload.firstname;break;case 2:e.user.surname=_.payload.surname;break;case 3:e.user.email=_.payload.email;break;case 4:e.user.isSaved=!0;break;case 5:e.step=_.payload.step}}),R=e=>{let{children:_}=e,o=(0,a.Z)(),[r,n]=(0,s.useReducer)(l,void 0,()=>o),c=(0,s.useCallback)(e=>{n({type:0,payload:{contentItem:e}})},[n]),E=(0,s.useCallback)(e=>{n({type:1,payload:{firstname:e}})},[n]),u=(0,s.useCallback)(e=>{n({type:2,payload:{surname:e}})},[n]),O=(0,s.useCallback)(e=>{n({type:3,payload:{email:e}})},[n]),R=(0,s.useCallback)(()=>{n({type:4})},[n]),d=(0,s.useCallback)(e=>{n({type:5,payload:{step:e}})},[n]),T=(0,s.useMemo)(()=>({dispatch:n,setContentItem:c,setFirstname:E,setSurname:u,setEmail:O,setUserSaved:R,setStep:d}),[n,c,E,u,O,R,d]);return(0,t.jsx)(i,{value:r,children:(0,t.jsx)(f,{value:T,children:_})})},d=e=>_=>(0,t.jsx)(R,{children:(0,t.jsx)(e,{..._})})},"./src/consumer/journey/hooks/useContentItem.tsx":function(e,_,o){o.d(_,{Z:function(){return f}});var r=o("../node_modules/react/jsx-runtime.js"),n=o("../node_modules/react/index.js"),t=o("../node_modules/dompurify/dist/purify.js"),s=o.n(t),c=o("../node_modules/html-to-react/index.js"),E=o.n(c),a=o("./src/shared/constants/sanitize.ts"),i=o("./src/consumer/journey/hooks/JourneyContext.tsx");let u=()=>e=>{let _=new(E()).ProcessNodeDefinitions(n).processDefaultNode;return new(E()).Parser().parseWithInstructions(e,()=>!0,[{shouldProcessNode:()=>!0,processNode:_}])},f=(e,_)=>{var o;let{contentItems:n}=(0,i.Lz)(),t=u(),c=_?null===(o=n.subOffers)||void 0===o?void 0:o[_][e]:n[e],E=!!(null==c?void 0:c.content.startsWith("{{UNDEFINED"));return{contentItem:c,isUndefined:E,parsedContent:c?t(s().sanitize(c.content,{ALLOWED_TAGS:a.r,ADD_ATTR:a.o})):(0,r.jsx)(r.Fragment,{})}}},"./src/consumer/journey/hooks/useJourneyData.tsx":function(e,_,o){o.d(_,{Z:function(){return n}});var r=o("../node_modules/react/index.js");let n=()=>{let{user:e,offer:_}=window.MentionMe.JourneyData,o=(0,r.useMemo)(()=>({..._.contentItems,subOffers:_.subOffers&&Object.fromEntries(_.subOffers.reduce((e,_)=>(e.push([_.id,_.contentItems]),e),[]))}),[_.contentItems,_.subOffers]),n=(0,r.useMemo)(()=>({...e,isSaved:!!(e.email&&e.firstname&&e.surname)}),[e]),t=new URLSearchParams(window.location.search).has("isDesignPreview");return{...window.MentionMe.JourneyData,step:window.MentionMe.JourneyData.step||0,isDesignPreview:t,isInPreview:!!window.MentionMe.JourneyData.previewMode,contentItems:o,user:n}}},"./src/consumer/journey/types.ts":function(e,_,o){var r,n,t,s,c,E,a,i,u,f,O,l,R,d,T,N;o.d(_,{I:function(){return r},JI:function(){return a},ht:function(){return S},jy:function(){return n},mu:function(){return t},qo:function(){return s},y:function(){return c},yY:function(){return E},zi:function(){return i}}),(u=r||(r={})).TERMS_AND_CONDITIONS="terms_and_conditions_implied",u.TERMS_AND_CONDITIONS_TEXT="terms_and_conditions",u.FULLFRAME_TERMS="fullframe_terms_caveat",u.POWERED_BY="journey2_powered_by",u.REFERRER_INFO_NOTICE="referrer_information_notice",(f=n||(n={})).CHOICE_OF_OFFER_HEADER="journey2_choice_of_offer_referrer_offer_header",f.CHOICE_OF_OFFER_CTA="journey2_choice_of_offer_to_referrer_offer_cta",f.CHOICE_OF_OFFER_REGISTER="journey2_choice_of_offer_to_referrer_offer_register",(O=t||(t={})).CHOICE_OF_OFFER_HEADER="choice_of_offer_ifa_offer_headline",O.CHOICE_OF_OFFER_CTA="choice_of_offer_to_ifa_offer_cta",O.CHOICE_OF_OFFER_REGISTER="choice_of_offer_to_ifa_offer_register",(l=s||(s={})).CHOICE_OF_OFFER_HEADER="choice_of_offer_nps_offer_headline",l.CHOICE_OF_OFFER_CTA="choice_of_offer_to_nps_offer_cta",l.CHOICE_OF_OFFER_REGISTER="choice_of_offer_to_nps_offer_register",l.HEADLINE="nps_ask_for_your_feedback",l.ORDER_COMPLETE="nps_order_complete_thanks",l.ORDER_COMPLETE_ANONYMOUS="nps_order_complete_thanks_anonymous",l.INFORMATION_NOTICE="nps_information_notice",l.ANSWER_SCALE_LOW="nps_answer_scale_low",l.ANSWER_SCALE_HIGH="nps_answer_scale_high",l.FEEDBACK_REQUEST="nps_feedback_request_generic",l.FEEDBACK_PLACEHOLDER="nps_feedback_placeholder_promoter",l.FEEDBACK_DISCLAIMER="nps_feedback_disclaimer",l.SUBMIT_BUTTON="nps_submit_button",l.THANKS="nps_thanks_for_feedback",(R=c||(c={})).HEADING="cos_how_did_you_originally_find_out_about_us",R.COS_FEEDBACK="cos_feedback",R.COS_WHY="cos_why",R.INFORMATION_NOTICE="cos_information_notice",R.COS_SUBMIT_BUTTON="cos_submit_button",R.COS_CONTINUE_TO_REFERRAL_THANKS="cos_continue_to_referral_thanks",R.COS_CONTINUE_TO_REFERRAL_HEADING="cos_continue_to_referral_heading",R.COS_CONTINUE_TO_REFERRAL_HEADING_ANONYMOUS="cos_continue_to_referral_heading_anonymous",R.COS_CONTINUE_TO_REFERRAL_SUB_HEADING="cos_continue_to_referral_sub_heading",R.COS_CONTINUE_TO_REFERRAL_BODY="cos_continue_to_referral_body",R.COS_CONTINUE_TO_REFERRAL_BUTTON="cos_continue_to_referral_button",R.ORDER_COMPLETE="cos_order_complete_thanks",R.ORDER_COMPLETE_ANONYMOUS="cos_order_complete_thanks_anonymous",R.COS_THANKS="cos_thanks_for_feedback",R.COS_OTHER_HEADING="cos_other_heading",R.COS_OTHER_PLACEHOLDER="cos_other_placeholder",R.COS_OTHER_BACK_CTA="cos_other_back_cta",R.COS_OTHER_CTA="cos_other_cta",R.COS_ANSWER_OTHER="cos_answer_other",(d=E||(E={})).COS_ANSWER_CATEGORY_BRAND_REPUTATION="brand-reputation",d.COS_ANSWER_CATEGORY_PROMOTION="promotion",d.COS_ANSWER_CATEGORY_OTHER="other",d.COS_ANSWER_CATEGORY_RECOMMENDATION="recommendation",d.COS_ANSWER_CATEGORY_REVIEW="review",d.COS_ANSWER_CATEGORY_USED_BEFORE="used-before",(T=a||(a={})).COS_ANSWER_0="cos_answer_0",T.COS_ANSWER_1="cos_answer_1",T.COS_ANSWER_2="cos_answer_2",T.COS_ANSWER_3="cos_answer_3",T.COS_ANSWER_4="cos_answer_4";let S={cos_answer_0:"recommendation",cos_answer_1:"review",cos_answer_2:"promotion",cos_answer_3:"brand-reputation",cos_answer_4:"used-before",cos_answer_other:"other"};(N=i||(i={})).RESEGMENTATION_COMPLETE="journey2_choice_of_offer_resegmentation_complete",N.HEADLINE="journey2_choice_of_offer_offer_headline",N.ORDER_COMPLETE="journey2_choice_of_offer_order_complete_thanks",N.ORDER_COMPLETE_ANONYMOUS="journey2_choice_of_offer_order_complete_thanks_anonymous",N.INFORMATION_NOTICE="journey2_choice_of_offer_information_notice",N.OFFER_HEADLINE="journey2_choice_of_offer_link_offer_headlines",N.HEADLINE_REGISTER="journey2_choice_of_offer_register_headline",N.SUBHEADER_REGISTER="journey2_choice_of_offer_register_subheader",N.REGISTER_CTA="journey2_choice_of_offer_register_cta",N.REQUIRED_FIELD="journey2_choice_of_offer_denotes_mandatory_field",N.FIRSTNAME_PLACEHOLDER="journey2_choice_of_offer_firstname_placeholder",N.SURNAME_PLACEHOLDER="journey2_choice_of_offer_surname_placeholder",N.EMAIL_PLACEHOLDER="journey2_choice_of_offer_email_placeholder",N.FIRSTNAME_LABEL="journey2_choice_of_offer_firstname_label",N.SURNAME_LABEL="journey2_choice_of_offer_surname_label",N.EMAIL_LABEL="journey2_choice_of_offer_email_label",N.FIRSTNAME_ERROR="journey2_choice_of_offer_firstname_error",N.SURNAME_ERROR="journey2_choice_of_offer_surname_error",N.EMAIL_ERROR="journey2_choice_of_offer_email_error",N.CANCEL_REGISTER="journey2_choice_of_offer_cancel_register",N.CORNERPEEL_HEADER="journey2_choice_of_offer_heading_for_corner_peel",N.CORNERPEEL_DESCRIPTION="journey2_choice_of_offer_sub_heading_for_corner_peel",N.CORNERPEEL_CTA="journey2_choice_of_offer_cta_for_corner_peel"},"./src/consumer/journey/utilities/events.ts":function(e,_,o){o.d(_,{h7:()=>s,tc:()=>c,Mr:()=>t,wz:()=>E});let r=(e,_)=>{window.parent.postMessage(JSON.stringify(e),_)};o("../node_modules/process/browser.js");let n=function(e){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";r({...e,sourceName:window.name},_)},t=()=>{n({choice:"clickAction",clickType:"closeClick"})},s=()=>{n({choice:"clickAction",clickType:"openClick"})},c=()=>{n({choice:"clickAction",clickType:"closeCornerPeel"})},E=(e,_)=>{n({type:"ContentEvent",data:{eventType:"FOCUS_REQUEST",contentItem:e,offerId:_,fadeOthers:!0,closeOthers:!0}})}},"./src/shared/constants/filterOfferTypes.ts":function(e,_,o){var r,n;o.d(_,{Z:function(){return t}}),(n=r||(r={})).REFERRAL="referral",n.NPS_ONLY="nps-only",n.NPS_REFERRAL="nps-referral",n.NPS_REFERRAL_INCENTIVE="nps-referral-incentive",n.NPS_INCENTIVE="nps-incentive",n.INCENTIVE="incentive",n.CHOICE_OF_OFFER="choice-of-offer",n.COS_ONLY="cos-only",n.COS_REFERRAL="cos-referral",n.CONTROL="control";let t=r},"./src/shared/constants/preview.ts":function(e,_,o){var r,n,t,s,c,E;o.d(_,{_N:function(){return t},i4:function(){return r},me:function(){return n}}),(s=r||(r={})).VIEW="VIEW",s.EDIT="EDIT",s.PLACEHOLDERS="PLACEHOLDERS",(c=n||(n={})).MOBILE="mobile",c.DESKTOP="desktop",(E=t||(t={})).SMALL="small",E.LARGE="large"},"./src/shared/constants/sanitize.ts":function(e,_,o){o.d(_,{o:function(){return n},r:function(){return r}});let r=["span","p","a","h1","h2","h3","h4","h5","h6","hr","br","b","strong","ul","ol","li","code","em","pre","u","div","blockquote"],n=["target"]}}]);