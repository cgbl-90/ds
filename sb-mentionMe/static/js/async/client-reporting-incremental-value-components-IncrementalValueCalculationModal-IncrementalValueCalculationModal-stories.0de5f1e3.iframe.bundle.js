"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["931"],{"./src/client/reporting/incremental-value/components/IncrementalValueCalculationModal/IncrementalValueCalculationModal.stories.tsx":function(e,t,n){n.r(t),n.d(t,{Default:function(){return d},default:function(){return u}});var r=n("../node_modules/react/jsx-runtime.js"),a=n("../node_modules/msw/lib/core/graphql.mjs"),o=n("../node_modules/msw/lib/core/HttpResponse.mjs"),l=n("./src/client/reporting/hooks/ReportingContext.tsx"),i=n("./src/client/reporting/incremental-value/__mocks__/fetchIncrementalValueStatistics.msw.ts"),s=n("./src/client/reporting/incremental-value/context/IncrementalValuePageProvider.tsx"),c=n("./src/client/reporting/incremental-value/components/IncrementalValueCalculationModal/IncrementalValueCalculationModal.tsx");let u={component:c.Z,title:"Portal / Reporting / Incremental Value / Calculation Modal",decorators:[e=>(0,r.jsx)("div",{style:{width:"300px",height:"300px"},children:e()})],parameters:{msw:{handlers:[a.B.query("fetchIncrementalValueStatistics",()=>o.Z.json({data:i.m}))]}}},d=e=>(0,r.jsx)(l.U,{children:(0,r.jsx)(s.p,{children:(0,r.jsx)(c.Z,{...e})})});d.args={},d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:"args => <ReportingProvider>\n        <IncrementalValuePageProvider>\n            <IncrementalValueCalculationModal {...args} />\n        </IncrementalValuePageProvider>\n    </ReportingProvider>",...d.parameters?.docs?.source}}}},"./src/client/reporting/incremental-value/components/IncrementalValueCalculationModal/IncrementalValueCalculationModal.tsx":function(e,t,n){n.d(t,{Z:()=>f});var r=n("../node_modules/react/jsx-runtime.js"),a=n("../node_modules/react/index.js"),o=n("../node_modules/@heroicons/react/24/solid/esm/ArrowRightCircleIcon.js"),l=n("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),i=n("../node_modules/react-i18next/dist/es/index.js"),s=n("./src/shared/hooks/useZendeskWidget/index.ts"),c=n("./src/client/reporting/incremental-value/hooks/useIncrementalValueStatistics.ts"),u=n("./src/client/reporting/incremental-value/components/ChartCard/ChartCard.tsx"),d=n("./src/client/reporting/incremental-value/components/DonutPieChart/DonutPieChart.tsx");let h=(0,n("../node_modules/styled-components/dist/styled-components.browser.esm.js").ZP)(l.BY).attrs({as:"button"}).withConfig({displayName:"IncrementalValueCalculationModal.styled__Button"})(["display:flex;align-items:center;gap:",";svg{width:18px;height:18px;}","{white-space:nowrap;}"],(0,l.W0)(1),(0,l.mq)("mdMin","min")),m=n.p+"static/image/static/media/Formula.5ab6b4ae.png",p=n.p+"static/image/static/media/FormulaWithControl.7025b85f.png",g=n.p+"static/image/static/media/RepeatRevenueFormula.7e3a6bd3.png",v="incremental-value-calculation-cta",x=e=>{let{isDisabled:t}=e,{t:n}=(0,i.$G)("reporting",{keyPrefix:"incremental-value.calculation-modal"}),[x,f]=(0,l.OT)();(0,s.KF)({shouldBeHidden:x});let{statistics:w,loading:j}=(0,c.Z)(),y=(0,a.useMemo)(()=>{if(!w)return;let{volume:e}=w;return{low:(0,l.rl)((null==e?void 0:e.low)||0),control:(0,l.rl)((null==e?void 0:e.control)||0)}},[w]),C=null==y?void 0:y.low,_=null==y?void 0:y.control;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(h,{"data-ph":v,"data-auto-class":v,onClick:f.open,disabled:t,children:[n("cta","See how we calculate Incremental value from repeat revenue"),(0,r.jsx)(o.Z,{})]}),(0,r.jsx)(l.u_,{isOpen:x,onClose:f.close,modalVariant:"drawer-right",scrollBehaviour:"inside",children:(0,r.jsxs)(l.u_.Content,{children:[(0,r.jsxs)(l.u_.Header,{children:[(0,r.jsx)(l.H5,{children:n("title","How Incremental revenue is calculated")}),(0,r.jsx)(l.u_.CloseButton,{})]}),(0,r.jsxs)(l.u_.Body,{children:[(0,r.jsx)(i.cC,{t:n,i18nKey:"incremental-revenue.copy",children:(0,r.jsxs)(l.al,{children:[(0,r.jsx)(l.H4,{children:"How Incremental revenue is calculated?"}),(0,r.jsx)(l.M,{children:"In simple terms, Incremental revenue is the Repeat revenue you gained from showing customers with a Low Propensity to Refer an alternative action (which made them make another purchase) while also taking into account the revenue you might have gained if you had shown all your customers referral instead."}),(0,r.jsx)("img",{src:m,alt:"How incremental revenue is calculated"}),(0,r.jsx)(l.M,{children:"We directly compare the performance of the Low Propensity to Refer group (who are shown the alternative action) to that of the Control group (a group of customers also identified as having a low propensity to refer but who are shown referral instead, like the High Propensity to Refer group)."}),(0,r.jsx)(u.Z,{isLoading:j||!w,data:null==w?void 0:w.volume,chart:!j&&(null==w?void 0:w.volume)?(0,r.jsx)(d.Z,{data:null==w?void 0:w.volume}):(0,r.jsx)(d.Z.Skeleton,{}),heading:n("segmentation-split.title","Segmentation split"),description:(0,r.jsx)(i.cC,{t:n,i18nKey:"segmentation-split.description",children:(0,r.jsx)(l.al,{children:(0,r.jsxs)(l.M,{children:["Our Propensity to Refer model has correctly identified"," ",{unlikelyToReferPercentage:C}," of your customer base as unlikely to Refer. While ",{controlGroupPercentage:_}," of your customers also identified as unlikely to refer have been placed in the High PTR segment. This is to serve as a control group to accurately measure the incremental performance of customers in the Low PTR segment."]})})})}),(0,r.jsx)(l.M,{children:"We calculate the Repeat revenue by looking at the Low Propensity to Refer groupâ€™s performance (how much revenue is generated by encouraging users to repeat purchase)."}),(0,r.jsx)(l.M,{children:"While the Control group allows us to judge how much Referral revenue you may have missed out on by not showing all of your customers referral."}),(0,r.jsx)("img",{src:p,alt:"How incremental revenue is calculated, including annotations to show which group of customers the revenue came from (low PTR vs control group"})]})}),(0,r.jsx)("hr",{}),(0,r.jsx)(i.cC,{t:n,i18nKey:"repeat-revenue.copy",children:(0,r.jsxs)(l.al,{children:[(0,r.jsx)(l.H4,{children:"How is Repeat revenue calculated?"}),(0,r.jsx)(l.M,{children:'Previous tests have shown we can increase repeat rate by a relative 20% with an Discount off next purchase offer (eg from 10% to 12%), that extra "incremental" 2% is because of our offer. If it is ordered with their AOV, then that helps obtain the amount we can drive in the year.'}),(0,r.jsx)(l.M,{children:"We are conservative on this 20% in 2 ways."}),(0,r.jsx)(l.M,{children:(0,r.jsxs)("ol",{children:[(0,r.jsx)("li",{children:"We consider the 1st order repeat rate which is typically the lowest"}),(0,r.jsx)("li",{children:"We look at a 30 day repeat window as opposed to longer"})]})}),(0,r.jsx)(l.M,{children:"This ensures the incremental (eg. 2%) is conservative."}),(0,r.jsx)(l.M,{children:"Then we estimate the number of orders who will see the alternative offer if this is the value of the calculated value per alternative offer. We obtain the total amount of repeat revenue likely driven and take away the value of the lost referral opportunity from this low PTR group to find the Incremental revenue."}),(0,r.jsx)("img",{src:g,alt:"How repeat revenue is calculated"})]})})]}),(0,r.jsx)(l.u_.Footer,{children:(0,r.jsx)(l.zx,{variant:"secondary",onClick:f.close,children:n("close-text","Close")})})]})})]})},f=x;x.__docgenInfo={description:"",methods:[],displayName:"IncrementalValueCalculationModal",props:{isDisabled:{required:!1,tsType:{name:"boolean"},description:""}}}}}]);