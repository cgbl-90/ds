"use strict";(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["1479"],{"./src/shared/components/DateFormat/DateFormat.stories.tsx":function(e,t,r){r.r(t),r.d(t,{Default:function(){return d},FromNowFuture:function(){return i},FromNowPast:function(){return u},UseDateIfOlderThan:function(){return m},default:function(){return n}});var a=r("../node_modules/react/jsx-runtime.js"),o=r("./src/shared/components/DateFormat/index.ts");let n={title:"Shared / DateFormat",component:o.Z,argTypes:{date:{control:"date"}},args:{date:new Date,format:"dd/MM/yyyy, HH:mm:ss",shouldUpdateEverySecond:!1,lang:"en-GB",variant:void 0},parameters:{chromatic:{disableSnapshot:!0}}},s=e=>(0,a.jsx)(o.Z,{...e}),d=s.bind({});d.args={date:new Date};let i=s.bind({});i.args={variant:"fromNow",shouldUpdateEverySecond:!1,date:new Date(Date.now()+1e4)};let u=s.bind({});u.args={variant:"fromNow",shouldUpdateEverySecond:!0,date:new Date(Date.now()-1e4)};let m=s.bind({});m.args={date:new Date(Date.now()-864e5),variant:"fromNow",shouldUpdateEverySecond:!0,useDateIfOlderThan:3600},d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:"args => <DateFormat {...args} />",...d.parameters?.docs?.source}}},i.parameters={...i.parameters,docs:{...i.parameters?.docs,source:{originalSource:"args => <DateFormat {...args} />",...i.parameters?.docs?.source}}},u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:"args => <DateFormat {...args} />",...u.parameters?.docs?.source}}},m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:"args => <DateFormat {...args} />",...m.parameters?.docs?.source}}}},"./src/shared/components/DateFormat/index.ts":function(e,t,r){r.d(t,{Z:()=>u});var a=r("../node_modules/react/jsx-runtime.js"),o=r("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),n=r("../node_modules/react/index.js"),s=r("../node_modules/react-i18next/dist/es/index.js");let d=e=>{let{date:t,updateFrequency:r}=e,{t:d}=(0,s.$G)("shared"),[i,u]=(0,n.useState)(Date.now());(0,n.useEffect)(()=>{let e;return r&&(e=setInterval(()=>{u(Date.now())},r)),()=>{e&&clearInterval(e)}},[r]);let m=new Date(t).getTime(),l=Math.floor((i-m)/1e3),c="",h="some time ago";i<=m&&(l=Math.floor((m-i)/1e3),c=".future",h="in a bit");let p=Math.floor(l/60),f=Math.floor(p/60),w=Math.floor(f/24),g=Math.floor(w/30),D=Math.floor(w/365),y=d(`shared:date.fromNow${c}.justNow`,h);return D>0?y=d(`shared:date.fromNow${c}.year`,h,{count:D}):g>0?y=d(`shared:date.fromNow${c}.month`,h,{count:g}):w>0&&w<7?y=d(`shared:date.fromNow${c}.days_and_hours`,h,{days:w,hours:f%24}):w>=7?y=d(`shared:date.fromNow${c}.day`,h,{count:w}):f>0?y=d(`shared:date.fromNow${c}.hour`,h,{count:f}):p>0?y=d(`shared:date.fromNow${c}.minute`,h,{count:p}):l>0&&(y=d(`shared:date.fromNow${c}.second`,h,{count:l})),(0,n.useMemo)(()=>(0,a.jsx)(o.u,{tooltip:(0,o.k2)(t),children:(0,a.jsx)("span",{children:y})}),[y,t])},i=e=>{let{variant:t,date:r,format:n,useDateIfOlderThan:s=864e5,shouldUpdateEverySecond:i}=e;if(!r)return null;let u=new Date(r);if(u){if("fromNow"===t){let e=new Date().getTime(),t=u.getTime();if(!s||e-t<s)return(0,a.jsx)(d,{date:u,updateFrequency:i?1e3:0})}return(0,a.jsx)(a.Fragment,{children:(0,o.p6)(r,n?{notation:"custom",format:n}:{notation:"short"})})}return null};i.__docgenInfo={description:"",methods:[],displayName:"DateFormat",props:{date:{required:!1,tsType:{name:"union",raw:"T | null",elements:[{name:"union",raw:"Date | string",elements:[{name:"Date"},{name:"string"}]},{name:"null"}]},description:""},format:{required:!1,tsType:{name:"string"},description:""},variant:{required:!1,tsType:{name:"literal",value:'"fromNow"'},description:""},useDateIfOlderThan:{required:!1,tsType:{name:"number"},description:'If the number of milliseconds is greater than this, we\'ll just display the date and not do the "fromNow" bit.\n\nIt\'s sometimes not very helpful to display "1 month ago", and easier to display "7th Jan".',defaultValue:{value:"86400000",computed:!1}},shouldUpdateEverySecond:{required:!1,tsType:{name:"boolean"},description:"Should we re-render this component every second? By default, we won't - but in places where it's useful to show\ntime progressing (e.g. a page that live renders recent data) it's useful to set this."}}};let u=i}}]);