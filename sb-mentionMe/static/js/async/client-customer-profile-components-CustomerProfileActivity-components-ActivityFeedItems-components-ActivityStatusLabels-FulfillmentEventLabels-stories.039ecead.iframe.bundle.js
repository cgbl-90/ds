/*! For license information please see client-customer-profile-components-CustomerProfileActivity-components-ActivityFeedItems-components-ActivityStatusLabels-FulfillmentEventLabels-stories.039ecead.iframe.bundle.js.LICENSE.txt */
(globalThis.webpackChunk_mention_me_frontend=globalThis.webpackChunk_mention_me_frontend||[]).push([["727"],{"./src/shared/components/Chart/ChartInternal.module.less?712b":function(e,a,r){"use strict";r.d(a,{Z:function(){return i}});let i={loading:"loading-i429gv",header:"header-INChVS",titles:"titles-herhqc",chartWrapper:"chartWrapper-v_5RGH",chartWrapperLegendLeft:"chartWrapperLegendLeft-gyUVNB",chartWrapperLegendRight:"chartWrapperLegendRight-N6VGBw",chartWrapperLegendTop:"chartWrapperLegendTop-JPzW2f",chartWrapperLegendBottom:"chartWrapperLegendBottom-ZyJR9E",chart:"chart-_XQz0c",customChartLegendHidden:"customChartLegendHidden-QDlMox"}},"./src/client/customer/profile/components/CustomerProfileActivity/components/ActivityFeedItems/components/ActivityStatusLabels/FulfillmentEventLabels.stories.tsx":function(e,a,r){"use strict";r.r(a),r.d(a,{Archived:function(){return c},Default:function(){return l},Fulfilled:function(){return d},Owed:function(){return u},RefereeAwaitingPurchase:function(){return p},RefereeRedeemed:function(){return m},ReferrerRewardableArchived:function(){return f},Void:function(){return o},default:function(){return h}});var i=r("../node_modules/react/jsx-runtime.js"),n=r("../node_modules/deepmerge/dist/cjs.js"),t=r.n(n);let s={component:r("./src/client/customer/profile/components/CustomerProfileActivity/components/ActivityFeedItems/components/ActivityStatusLabels/FulfillmentEventLabels.tsx").Z,title:"Portal / Customer Profile / ActivityFeed / Labels / FulfillmentEventLabels",decorators:[e=>(0,i.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:e()})],parameters:{layout:"padded"}},l={args:{fulfillable:{id:"1",isVoid:!1,isArchived:!1,isFulfilled:!1}}},o={args:t()(l.args,{fulfillable:{isVoid:!0}})},d={args:t()(l.args,{fulfillable:{isFulfilled:!0}})},c={args:t()(l.args,{fulfillable:{isArchived:!0}})},u={args:t()(l.args,{fulfillable:{fulfillTriggeredDate:new Date}})},m={args:t()(l.args,{fulfillable:{isRedeemed:!0}})},p={args:t()(l.args,{fulfillable:{isRedeemed:!1,isAwaitingPurchase:!0}})},f={args:t()(l.args,{fulfillable:{isEligibleForReward:!0,hasTriedToClaimReward:!0,isArchived:!0}})},h=s;l.parameters={...l.parameters,docs:{...l.parameters?.docs,source:{originalSource:'{\n  args: {\n    fulfillable: {\n      id: "1",\n      isVoid: false,\n      isArchived: false,\n      isFulfilled: false\n    }\n  }\n} satisfies Story',...l.parameters?.docs?.source}}},o.parameters={...o.parameters,docs:{...o.parameters?.docs,source:{originalSource:"{\n  args: deepmerge(Default.args, {\n    fulfillable: {\n      isVoid: true\n    }\n  })\n} satisfies Story",...o.parameters?.docs?.source}}},d.parameters={...d.parameters,docs:{...d.parameters?.docs,source:{originalSource:"{\n  args: deepmerge(Default.args, {\n    fulfillable: {\n      isFulfilled: true\n    }\n  })\n} satisfies Story",...d.parameters?.docs?.source}}},c.parameters={...c.parameters,docs:{...c.parameters?.docs,source:{originalSource:"{\n  args: deepmerge(Default.args, {\n    fulfillable: {\n      isArchived: true\n    }\n  })\n} satisfies Story",...c.parameters?.docs?.source}}},u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:"{\n  args: deepmerge(Default.args, {\n    fulfillable: {\n      fulfillTriggeredDate: new Date()\n    }\n  })\n} satisfies Story",...u.parameters?.docs?.source}}},m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:"{\n  args: deepmerge(Default.args, {\n    fulfillable: {\n      isRedeemed: true\n    }\n  })\n} satisfies Story",...m.parameters?.docs?.source}}},p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:"{\n  args: deepmerge(Default.args, {\n    fulfillable: {\n      isRedeemed: false,\n      isAwaitingPurchase: true\n    }\n  })\n} satisfies Story",...p.parameters?.docs?.source}}},f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:"{\n  args: deepmerge(Default.args, {\n    fulfillable: {\n      isEligibleForReward: true,\n      hasTriedToClaimReward: true,\n      isArchived: true\n    }\n  })\n} satisfies Story",...f.parameters?.docs?.source}}}},"./src/client/customer/profile/components/CustomerProfileActivity/components/ActivityFeedItems/components/ActivityStatusLabels/FulfillmentEventLabels.tsx":function(e,a,r){"use strict";r.d(a,{Z:()=>h});var i=r("../node_modules/react/jsx-runtime.js"),n=r("../node_modules/@apollo/client/react/hooks/useMutation.js"),t=r("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),s=r("../node_modules/react-i18next/dist/es/index.js"),l=r("./src/client/customer/utilities/getApprovalId.ts"),o=r("./src/shared/@types/graphql.ts"),d=r("./src/shared/hooks/index.ts");let c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"unarchiveApprovable"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ids"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"objectType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ApprovableObjectEnum"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"merchantId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unarchive_Approvable"},arguments:[{kind:"Argument",name:{kind:"Name",value:"ids"},value:{kind:"Variable",name:{kind:"Name",value:"ids"}}},{kind:"Argument",name:{kind:"Name",value:"objectType"},value:{kind:"Variable",name:{kind:"Name",value:"objectType"}}},{kind:"Argument",name:{kind:"Name",value:"merchantId"},value:{kind:"Variable",name:{kind:"Name",value:"merchantId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isPendingApproval"}},{kind:"Field",name:{kind:"Name",value:"isSuspectedOfGaming"}},{kind:"Field",name:{kind:"Name",value:"approvalReason"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"key"}},{kind:"Field",name:{kind:"Name",value:"value"}}]}},{kind:"Field",name:{kind:"Name",value:"isArchived"}}]}}]}}]},u=e=>"isEligibleForReward"in e&&"hasTriedToClaimReward"in e,m=e=>"isRedeemed"in e,p=e=>"fulfillTriggeredDate"in e&&!u(e),f=e=>{let{fulfillable:a}=e,{t:r}=(0,s.$G)("customer",{keyPrefix:"activity.fulfillment"}),{merchantId:f}=(0,d.rc)(),[h,{loading:g}]=(0,n.D)(c,{variables:{merchantId:f,ids:[Number.isNaN(Number(a.id))?(0,l.Z)(a):a.id],objectType:m(a)?o.M$.Referee:o.M$.DriveAction}});if(a.isVoid)return null;if(a.isArchived)return u(a)?(0,i.jsx)(t.u,{tooltip:(0,i.jsx)(s.cC,{t:r,i18nKey:"archived.referrer-rewardable.help",children:"This reward has been archived. We will not attempt to fulfil it."}),children:(0,i.jsx)(t.__,{variant:"status",status:"neutral",children:r("archived.label","Archived")})}):(0,i.jsx)(t.u,{colourTheme:"light",tooltip:(0,i.jsxs)(s.cC,{t:r,i18nKey:"archived.approvable.help",children:["This reward has been archived. We will not attempt to fulfil it.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),(0,i.jsx)(t.zx,{variant:"link",isLoading:g,onClick:()=>{h()},children:"Un-archive"})]}),children:(0,i.jsx)(t.__,{variant:"status",status:"neutral",loading:g,children:r("archived.label","Archived")})});if(m(a)){if(a.isRedeemed)return(0,i.jsx)(t.u,{tooltip:r("redeemed.help","We have given this person a reward and they have subsequently made a transaction."),children:(0,i.jsx)(t.__,{variant:"status",status:"positive",children:r("redeemed.label","Used reward \uD83C\uDF89")})});if(a.isAwaitingPurchase)return(0,i.jsx)(t.u,{tooltip:r("waiting-for-purchase.help","This customer has been promised a reward. They must make a transaction before the reward is given."),children:(0,i.jsx)(t.__,{variant:"status",status:"warning",children:r("waiting-for-purchase.label","Waiting for transaction")})})}return a.isFulfilled?(0,i.jsx)(t.u,{tooltip:r("fulfilled.help","We have given this person their reward. You can retrieve it in the rewards section below."),children:(0,i.jsx)(t.__,{variant:"status",status:"positive",children:r("fulfilled.label","Rewarded")})}):p(a)&&a.fulfillTriggeredDate?(0,i.jsx)(t.u,{tooltip:(0,i.jsxs)(s.cC,{t:r,i18nKey:"not-fulfilled.help",children:["We owe this person a reward but have been unable to give it to them.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"This indicates we're unable to fulfil the reward. Please check the reward has sufficient capacity to give to this customer.",(0,i.jsx)("br",{}),(0,i.jsx)("br",{}),"Mention Me will regularly try and provide this customer with their reward."]}),children:(0,i.jsx)(t.__,{variant:"status",status:"negative",children:r("not-fulfilled.label","Waiting for reward")})}):null},h=f;f.__docgenInfo={description:"This renders details about the fulfilment of things which can be fulfilled, i.e. the Referee, IFA and\nReferrerRewardable.\n\nNote:\n - for ReferrerRewardables, only the fulfilled ones will show here\n - for Referees and IFAs, we'll show basically all of them\n - and Referrer's are NOT shown here. They're handled in the ReferrerEventLabels.",methods:[],displayName:"FulfillmentEventLabels",props:{fulfillable:{required:!0,tsType:{name:"Pick",elements:[{name:"union",raw:"Referee | ReferrerRewardable | IncentiveForActionRewardable",elements:[{name:"Referee"},{name:"ReferrerRewardable"},{name:"IncentiveForActionRewardable"}]},{name:"union",raw:'"id" | "isVoid" | "isFulfilled" | "isArchived"',elements:[{name:"literal",value:'"id"'},{name:"literal",value:'"isVoid"'},{name:"literal",value:'"isFulfilled"'},{name:"literal",value:'"isArchived"'}]}],raw:'Pick<\n    Referee | ReferrerRewardable | IncentiveForActionRewardable,\n    "id" | "isVoid" | "isFulfilled" | "isArchived"\n>'},description:""}}}},"./src/client/customer/utilities/getApprovalId.ts":function(e,a,r){"use strict";r.d(a,{Z:function(){return i}});let i=e=>{let a;if(!(a="string"==typeof e?e:e.id))return"";let r=a.split("-");if(2!==r.length)throw Error(`Invalid approvable id: ${a}. Expected Approvable-ID, e.g. Referee-1234`);return r[1]}},"./src/shared/components/Chart/Chart.tsx":function(e,a,r){"use strict";r.d(a,{Z:()=>h});var i=r("../node_modules/react/jsx-runtime.js"),n=r("../node_modules/react/index.js"),t=r("../node_modules/@mention-me/flamingo-ui/build/index.es.js"),s=r("../node_modules/styled-components/dist/styled-components.browser.esm.js"),l=r("./src/shared/components/Chart/ChartInternal.module.less?712b");let o=(0,n.lazy)(()=>Promise.all([r.e("2084"),r.e("7773"),r.e("6168"),r.e("3268"),r.e("7186"),r.e("2392"),r.e("6064"),r.e("1586"),r.e("6292"),r.e("4878"),r.e("1379"),r.e("3363"),r.e("4699"),r.e("247"),r.e("7847"),r.e("897"),r.e("4175"),r.e("7256"),r.e("1141"),r.e("4684"),r.e("4712"),r.e("9432"),r.e("4537")]).then(r.bind(r,"./src/shared/components/Chart/ChartInternal.tsx"))),d=(0,n.forwardRef)((e,a)=>{let{chartHeight:r,fallback:t,isLoading:s,...d}=e,c=t?(0,i.jsx)("div",{style:{height:r},children:t}):(0,i.jsx)("div",{className:l.Z.loading,style:{height:r}});return(0,i.jsx)(n.Suspense,{fallback:c,children:s?c:(0,i.jsx)(o,{ref:a,chartHeight:r,...d})})});d.__docgenInfo={description:"",methods:[],displayName:"LazyChart"};let c=s.ZP.div.withConfig({displayName:"ChartModal.styled__FallbackContainer"})(["height:80vh;.fallback{height:70vh;}"]),u=s.ZP.div.withConfig({displayName:"ChartModal.styled__Fallback"})(["height:70vh;"]),m=(0,s.ZP)(d).withConfig({displayName:"ChartModal.styled__Chart"})(["h3{font-weight:300;opacity:1;font-size:24px;padding-bottom:11px;}"]),p=e=>{let{config:a,data:r,annotations:n,amChartType:s,className:l,title:o,isOpen:d,isLoading:p,fallback:f,closeModal:h,openModal:g,shouldShowDownloadImage:v,...b}=e;return(0,i.jsx)(t.u_,{isOpen:d,onClose:h,modalVariant:"expanded",children:(0,i.jsxs)(t.u_.Content,{children:[(0,i.jsxs)(t.u_.Header,{children:[(0,i.jsx)(t.H5,{children:o}),(0,i.jsx)(t.u_.CloseButton,{})]}),(0,i.jsx)(t.u_.Body,{children:(0,i.jsx)(m,{isExpandMode:!0,className:l,config:a,data:r,annotations:n,amChartType:s,chartHeight:"75vh",openModal:g,isLoading:p,shouldShowDownloadImage:v,fallback:(0,i.jsx)(c,{children:(0,i.jsx)(u,{children:f})}),...b})})]})})};p.__docgenInfo={description:"",methods:[],displayName:"ChartModal",props:{config:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},description:""},data:{required:!1,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},annotations:{required:!1,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},amChartType:{required:!1,tsType:{name:"string"},description:""},chartHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:""},title:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""},subTitle:{required:!1,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""},isExpandMode:{required:!1,tsType:{name:"boolean"},description:""},openModal:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},shouldShowDownloadImage:{required:!1,tsType:{name:"boolean"},description:""},hasTogglableLegend:{required:!1,tsType:{name:"boolean"},description:""},isAnimated:{required:!1,tsType:{name:"boolean"},description:""},shouldShowHeader:{required:!1,tsType:{name:"boolean"},description:""},isOpen:{required:!0,tsType:{name:"boolean"},description:""},isLoading:{required:!1,tsType:{name:"boolean"},description:""},fallback:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},closeModal:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}},composes:["Omit"]};let f=(0,n.forwardRef)((e,a)=>{let{config:r,data:t,annotations:s,amChartType:l,className:o,chartHeight:c,title:u,subTitle:m,fallback:f,isLoading:h,shouldShowDownloadImage:g=!0,...v}=e,[b,y]=(0,n.useState)(!1),w=()=>y(!0);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d,{className:o,config:r,data:t,annotations:s,amChartType:l,chartHeight:c,title:u,subTitle:m,openModal:w,fallback:f,isLoading:h,ref:a,shouldShowDownloadImage:g,...v}),(0,i.jsx)(p,{className:o,config:r,data:t,annotations:s,amChartType:l,title:u,isOpen:b,fallback:f,closeModal:()=>y(!1),openModal:w,isLoading:h,shouldShowDownloadImage:g,...v})]})}),h=f;f.__docgenInfo={description:"",methods:[],displayName:"Chart",props:{shouldShowDownloadImage:{defaultValue:{value:"true",computed:!1},required:!1}}}},"../node_modules/classnames/index.js":function(e){!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e="",n=0;n<arguments.length;n++){var t=arguments[n];t&&(e=i(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var n="";for(var t in e)a.call(e,t)&&e[t]&&(n=i(n,t));return n}(t)))}return e}function i(e,a){return a?e?e+" "+a:e+a:e}e.exports?(r.default=r,e.exports=r):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return r}):window.classNames=r}()}}]);